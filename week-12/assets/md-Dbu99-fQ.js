import{f as A,K as H,o as g,e as S,g as t,n as x,F as T,aj as R,j as J,t as q,ad as w,r as h,Q as O,b as U,w as W,d as X,v as Y,x as Z,T as E}from"./modules/vue-CCeyAUKo.js";import{u as G,f as ee}from"./slidev/context-BznMRQ6z.js";import{_ as se}from"./index-DzwrLFcJ.js";import{_ as te}from"./interactive-BmqUx-n9.js";import"./modules/shiki-0ujfn9a0.js";const ne={class:"mz"},ae={class:"mz-controls"},le={class:"mz-tabs"},oe=["disabled"],ue={class:"mz-grid"},re={key:0,class:"mz-marker"},ie={key:1,class:"mz-marker"},ce={class:"mz-info"},de={class:"mz-legend"},fe={class:"mz-legend-item"},pe=A({__name:"MazeSolver",setup(I){G();const c=[[2,0,1,0,0,0,1],[1,0,1,0,1,0,1],[0,0,0,0,1,0,0],[0,1,1,0,0,0,1],[0,1,0,0,1,0,3]],$=c.length,F=c[0].length,d=[0,0],z=[4,6],_=h("dfs"),B=h(new Set),y=h(null),D=h([]),j=h(new Set),k=h(0),b=h(!1),N=h(!1),V=h("スタート地点から迷路を探索します"),P=[[-1,0],[0,1],[1,0],[0,-1]];function r(n,e){return`${n},${e}`}function K(){const n=[],e=new Set,o=new Map;if(_.value==="dfs"){const s=[d];for(o.set(r(...d),null);s.length>0;){const[m,i]=s.pop(),f=r(m,i);if(e.has(f))continue;if(e.add(f),m===z[0]&&i===z[1]){const a=new Set;let l=f;for(;l;)a.add(l),l=o.get(l)??null;return n.push({visited:new Set(e),current:f,frontier:s.map(([u,p])=>r(u,p)),path:a,message:`ゴール発見！ 経路長: ${a.size-1}`,found:!0}),n}const v=[];for(const[a,l]of P){const u=m+a,p=i+l;u>=0&&u<$&&p>=0&&p<F&&c[u][p]!==1&&!e.has(r(u,p))&&v.push([u,p])}for(const[a,l]of v.reverse())s.push([a,l]),o.has(r(a,l))||o.set(r(a,l),f);n.push({visited:new Set(e),current:f,frontier:s.map(([a,l])=>r(a,l)),path:new Set,message:`(${m}, ${i}) を訪問 ― スタック: ${s.length}個`,found:!1})}}else{const s=[d];for(e.add(r(...d)),o.set(r(...d),null);s.length>0;){const[m,i]=s.shift(),f=r(m,i);if(m===z[0]&&i===z[1]){const v=new Set;let a=f;for(;a;)v.add(a),a=o.get(a)??null;return n.push({visited:new Set(e),current:f,frontier:s.map(([l,u])=>r(l,u)),path:v,message:`ゴール発見！ 最短経路長: ${v.size-1}`,found:!0}),n}for(const[v,a]of P){const l=m+v,u=i+a,p=r(l,u);l>=0&&l<$&&u>=0&&u<F&&c[l][u]!==1&&!e.has(p)&&(e.add(p),s.push([l,u]),o.set(p,f))}n.push({visited:new Set(e),current:f,frontier:s.map(([v,a])=>r(v,a)),path:new Set,message:`(${m}, ${i}) を訪問 ― キュー: ${s.length}個`,found:!1})}}return n.push({visited:new Set(e),current:"",frontier:[],path:new Set,message:"ゴールに到達できませんでした",found:!1}),n}const C=O([]);function M(){B.value=new Set,y.value=null,D.value=[],j.value=new Set,k.value=0,b.value=!1,N.value=!1,V.value="スタート地点から迷路を探索します",C.value=K()}H(_,M),M();function L(){if(b.value||k.value>=C.value.length){b.value=!0;return}const n=C.value[k.value];B.value=n.visited,y.value=n.current,D.value=n.frontier,j.value=n.path,V.value=n.message,N.value=n.found,k.value++,(k.value>=C.value.length||n.found)&&(b.value=!0)}function Q(n,e){const o=r(n,e),s=["mz-cell"];return c[n][e]===1?(s.push("wall"),s.join(" ")):(j.value.has(o)&&s.push("on-path"),o===y.value?s.push("current"):B.value.has(o)?s.push("visited"):D.value.includes(o)&&s.push("frontier"),c[n][e]===2&&s.push("start"),c[n][e]===3&&s.push("goal"),s.join(" "))}return(n,e)=>(g(),S("div",ne,[t("div",ae,[t("div",le,[t("button",{class:x(["mz-tab",{active:_.value==="dfs"}]),onClick:e[0]||(e[0]=o=>_.value="dfs")},"DFS",2),t("button",{class:x(["mz-tab",{active:_.value==="bfs"}]),onClick:e[1]||(e[1]=o=>_.value="bfs")},"BFS",2)]),t("button",{class:"mz-btn",onClick:L,disabled:b.value},"次のステップ",8,oe),t("button",{class:"mz-btn mz-reset",onClick:M},"リセット")]),t("div",ue,[(g(),S(T,null,R(c,(o,s)=>t("div",{key:s,class:"mz-row"},[(g(!0),S(T,null,R(o,(m,i)=>(g(),S("div",{key:i,class:x(Q(s,i))},[c[s][i]===2?(g(),S("span",re,"S")):c[s][i]===3?(g(),S("span",ie,"G")):J("v-if",!0)],2))),128))])),64))]),t("div",ce,[t("div",{class:x(["mz-message",{"mz-found":N.value}])},q(V.value),3),t("div",de,[e[3]||(e[3]=t("span",{class:"mz-legend-item"},[t("span",{class:"mz-swatch mz-sw-visited"}),w("訪問済み")],-1)),t("span",fe,[e[2]||(e[2]=t("span",{class:"mz-swatch mz-sw-frontier"},null,-1)),w(q(_.value==="dfs"?"スタック":"キュー"),1)]),e[4]||(e[4]=t("span",{class:"mz-legend-item"},[t("span",{class:"mz-swatch mz-sw-path"}),w("経路")],-1))])])]))}}),me=se(pe,[["__scopeId","data-v-877b9c21"]]),ze={__name:"slides.md__slidev_23",setup(I){const{$clicksContext:c,$frontmatter:$}=G();return c.setup(),(F,d)=>{const z=me;return g(),U(te,Y(Z(E(ee)(E($),22))),{default:W(()=>[d[0]||(d[0]=t("h2",null,"迷路でDFS vs BFSを体験しよう",-1)),X(z),d[1]||(d[1]=t("ul",null,[t("li",null,[t("strong",null,"DFS"),w(" は深く潜ってから戻る（行き止まりまで一直線）")]),t("li",null,[t("strong",null,"BFS"),w(" は近い場所から順に広がる（波紋のように）")])],-1)),d[2]||(d[2]=t("p",null,[w("BFSで見つかった経路は"),t("strong",null,"最短"),w("であることが保証される ← DFSにはこの保証がない")],-1))]),_:1},16)}}};export{ze as default};
