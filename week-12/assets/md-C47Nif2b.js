import{f as H,K as J,o as g,e as S,g as t,n as x,F as T,aj as q,j as O,t as E,ad as z,r as h,b as Q,w as U,d as W,v as X,x as Y,T as G}from"./modules/vue-CCeyAUKo.js";import{u as I,f as Z}from"./slidev/context-CYRph3iO.js";import{_ as ee}from"./index-CTfecor2.js";import{_ as se}from"./interactive-DfBAELs1.js";import"./modules/shiki-0ujfn9a0.js";const te={class:"mz"},ne={class:"mz-controls"},ae={class:"mz-tabs"},le=["disabled"],oe={class:"mz-grid"},re={key:0,class:"mz-marker"},ue={key:1,class:"mz-marker"},ie={class:"mz-info"},ce={class:"mz-legend"},de={class:"mz-legend-item"},fe=H({__name:"MazeSolver",setup(K){I();const c=[[2,0,1,0,0,0,1],[1,0,1,0,1,0,1],[0,0,0,0,1,0,0],[0,1,1,0,0,0,1],[0,1,0,0,1,0,3]],b=c.length,F=c[0].length,d=[0,0],w=[4,6],_=h("dfs"),B=h(new Set),y=h(null),D=h([]),j=h(new Set),k=h(0),$=h(!1),N=h(!1),V=h("スタート地点から迷路を探索します"),P=[[-1,0],[0,1],[1,0],[0,-1]];function u(n,e){return`${n},${e}`}function L(){const n=[],e=new Set,o=new Map;if(_.value==="dfs"){const s=[d];for(o.set(u(...d),null);s.length>0;){const[m,i]=s.pop(),f=u(m,i);if(e.has(f))continue;if(e.add(f),m===w[0]&&i===w[1]){const a=new Set;let l=f;for(;l;)a.add(l),l=o.get(l)??null;return n.push({visited:new Set(e),current:f,frontier:s.map(([r,p])=>u(r,p)),path:a,message:`ゴール発見！ 経路長: ${a.size-1}`,found:!0}),n}const v=[];for(const[a,l]of P){const r=m+a,p=i+l;r>=0&&r<b&&p>=0&&p<F&&c[r][p]!==1&&!e.has(u(r,p))&&v.push([r,p])}for(const[a,l]of v.reverse())s.push([a,l]),o.has(u(a,l))||o.set(u(a,l),f);n.push({visited:new Set(e),current:f,frontier:s.map(([a,l])=>u(a,l)),path:new Set,message:`(${m}, ${i}) を訪問 ― スタック: ${s.length}個`,found:!1})}}else{const s=[d];for(e.add(u(...d)),o.set(u(...d),null);s.length>0;){const[m,i]=s.shift(),f=u(m,i);if(m===w[0]&&i===w[1]){const v=new Set;let a=f;for(;a;)v.add(a),a=o.get(a)??null;return n.push({visited:new Set(e),current:f,frontier:s.map(([l,r])=>u(l,r)),path:v,message:`ゴール発見！ 最短経路長: ${v.size-1}`,found:!0}),n}for(const[v,a]of P){const l=m+v,r=i+a,p=u(l,r);l>=0&&l<b&&r>=0&&r<F&&c[l][r]!==1&&!e.has(p)&&(e.add(p),s.push([l,r]),o.set(p,f))}n.push({visited:new Set(e),current:f,frontier:s.map(([v,a])=>u(v,a)),path:new Set,message:`(${m}, ${i}) を訪問 ― キュー: ${s.length}個`,found:!1})}}return n.push({visited:new Set(e),current:"",frontier:[],path:new Set,message:"ゴールに到達できませんでした",found:!1}),n}let C=[];function M(){B.value=new Set,y.value=null,D.value=[],j.value=new Set,k.value=0,$.value=!1,N.value=!1,V.value="スタート地点から迷路を探索します",C=L()}J(_,M),M();function R(){if($.value||k.value>=C.length){$.value=!0;return}const n=C[k.value];B.value=n.visited,y.value=n.current,D.value=n.frontier,j.value=n.path,V.value=n.message,N.value=n.found,k.value++,(k.value>=C.length||n.found)&&($.value=!0)}function A(n,e){const o=u(n,e),s=["mz-cell"];return c[n][e]===1?(s.push("wall"),s.join(" ")):(j.value.has(o)&&s.push("on-path"),o===y.value?s.push("current"):B.value.has(o)?s.push("visited"):D.value.includes(o)&&s.push("frontier"),c[n][e]===2&&s.push("start"),c[n][e]===3&&s.push("goal"),s.join(" "))}return(n,e)=>(g(),S("div",te,[t("div",ne,[t("div",ae,[t("button",{class:x(["mz-tab",{active:_.value==="dfs"}]),onClick:e[0]||(e[0]=o=>_.value="dfs")},"DFS",2),t("button",{class:x(["mz-tab",{active:_.value==="bfs"}]),onClick:e[1]||(e[1]=o=>_.value="bfs")},"BFS",2)]),t("button",{class:"mz-btn",onClick:R,disabled:$.value},"次のステップ",8,le),t("button",{class:"mz-btn mz-reset",onClick:M},"リセット")]),t("div",oe,[(g(),S(T,null,q(c,(o,s)=>t("div",{key:s,class:"mz-row"},[(g(!0),S(T,null,q(o,(m,i)=>(g(),S("div",{key:i,class:x(A(s,i))},[c[s][i]===2?(g(),S("span",re,"S")):c[s][i]===3?(g(),S("span",ue,"G")):O("v-if",!0)],2))),128))])),64))]),t("div",ie,[t("div",{class:x(["mz-message",{"mz-found":N.value}])},E(V.value),3),t("div",ce,[e[3]||(e[3]=t("span",{class:"mz-legend-item"},[t("span",{class:"mz-swatch mz-sw-visited"}),z("訪問済み")],-1)),t("span",de,[e[2]||(e[2]=t("span",{class:"mz-swatch mz-sw-frontier"},null,-1)),z(E(_.value==="dfs"?"スタック":"キュー"),1)]),e[4]||(e[4]=t("span",{class:"mz-legend-item"},[t("span",{class:"mz-swatch mz-sw-path"}),z("経路")],-1))])])]))}}),pe=ee(fe,[["__scopeId","data-v-25146f71"]]),ze={__name:"slides.md__slidev_23",setup(K){const{$clicksContext:c,$frontmatter:b}=I();return c.setup(),(F,d)=>{const w=pe;return g(),Q(se,X(Y(G(Z)(G(b),22))),{default:U(()=>[d[0]||(d[0]=t("h2",null,"迷路でDFS vs BFSを体験しよう",-1)),W(w),d[1]||(d[1]=t("ul",null,[t("li",null,[t("strong",null,"DFS"),z(" は深く潜ってから戻る（行き止まりまで一直線）")]),t("li",null,[t("strong",null,"BFS"),z(" は近い場所から順に広がる（波紋のように）")])],-1)),d[2]||(d[2]=t("p",null,[z("BFSで見つかった経路は"),t("strong",null,"最短"),z("であることが保証される ← DFSにはこの保証がない")],-1))]),_:1},16)}}};export{ze as default};
