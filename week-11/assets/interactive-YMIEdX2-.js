import{f as A,r as _,o,e as d,g as e,n as x,j as h,F as p,aj as f,t as n,ad as g,af as k,ag as C,k as B,z as S,i as I}from"./modules/vue-CCeyAUKo.js";import{u as R}from"./slidev/context-CGX1oFl5.js";import{_ as L}from"./index-BirBe7a9.js";const N={class:"csd"},j={class:"csd-tabs"},F={key:0,class:"csd-cumsum"},T={class:"csd-section"},w={class:"csd-array"},G={class:"csd-val"},H={class:"csd-idx"},J={class:"csd-section"},K={class:"csd-array"},O={class:"csd-val"},P={class:"csd-idx"},Q={class:"csd-query"},W=["max"],X=["max"],Y={class:"csd-formula"},Z={key:1,class:"csd-imos"},ss={class:"csd-section"},es=["onUpdate:modelValue","max"],ts=["onUpdate:modelValue","max"],ls=["onClick"],as={class:"csd-section"},ns={class:"csd-array"},os={class:"csd-val"},ds={class:"csd-idx"},us={class:"csd-section"},is={class:"csd-array"},cs={class:"csd-val"},rs={class:"csd-idx"},i=8,vs=A({__name:"CumulativeSumDemo",props:{mode:{default:"cumsum"}},setup(V){R();const u=_(V.mode),c=_([3,1,4,1,5,9,2,6]),r=_(2),v=_(5),m=S(()=>{const l=[0];for(let s=0;s<c.value.length;s++)l.push(l[s]+c.value[s]);return l}),q=S(()=>{const l=Math.max(0,r.value),s=Math.min(c.value.length-1,v.value);return m.value[s+1]-m.value[l]}),z=l=>l>=r.value&&l<=v.value,y=_([{start:1,end:4},{start:2,end:6},{start:5,end:7}]),$=S(()=>{const l=Array(i+1).fill(0);for(const s of y.value)s.start>=0&&s.start<i&&l[s.start]++,s.end+1>=0&&s.end+1<=i&&l[s.end+1]--;return l.slice(0,i)}),U=S(()=>{const l=[];let s=0;for(const t of $.value)s+=t,l.push(s);return l});function D(){y.value.push({start:0,end:i-1})}function E(l){y.value.splice(l,1)}return(l,s)=>(o(),d("div",N,[e("div",j,[e("button",{class:x(["csd-tab",{active:u.value==="cumsum"}]),onClick:s[0]||(s[0]=t=>u.value="cumsum")}," 累積和 ",2),e("button",{class:x(["csd-tab",{active:u.value==="imos"}]),onClick:s[1]||(s[1]=t=>u.value="imos")}," いもす法 ",2)]),h(" Cumulative Sum Mode "),u.value==="cumsum"?(o(),d("div",F,[e("div",T,[s[4]||(s[4]=e("div",{class:"csd-label"},"元の配列 A:",-1)),e("div",w,[(o(!0),d(p,null,f(c.value,(t,a)=>(o(),d("div",{key:a,class:x(["csd-cell",{"in-range":z(a)}])},[e("div",G,n(t),1),e("div",H,n(a),1)],2))),128))])]),e("div",J,[s[5]||(s[5]=e("div",{class:"csd-label"},"累積和 S:",-1)),e("div",K,[(o(!0),d(p,null,f(m.value,(t,a)=>(o(),d("div",{key:a,class:"csd-cell csd-sum-cell"},[e("div",O,n(t),1),e("div",P,n(a),1)]))),128))])]),e("div",Q,[e("label",null,[s[6]||(s[6]=g(" L: ",-1)),k(e("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=t=>r.value=t),min:0,max:c.value.length-1,class:"csd-input"},null,8,W),[[C,r.value,void 0,{number:!0}]])]),e("label",null,[s[7]||(s[7]=g(" R: ",-1)),k(e("input",{type:"number","onUpdate:modelValue":s[3]||(s[3]=t=>v.value=t),min:0,max:c.value.length-1,class:"csd-input"},null,8,X),[[C,v.value,void 0,{number:!0}]])]),e("div",Y,[g(" S["+n(v.value+1)+"] - S["+n(r.value)+"] = "+n(m.value[v.value+1])+" - "+n(m.value[r.value])+" = ",1),e("strong",null,n(q.value),1)])])])):h("v-if",!0),h(" Imos Mode "),u.value==="imos"?(o(),d("div",Z,[e("div",ss,[s[9]||(s[9]=e("div",{class:"csd-label"},"イベント（区間）:",-1)),(o(!0),d(p,null,f(y.value,(t,a)=>(o(),d("div",{key:a,class:"csd-event"},[k(e("input",{type:"number","onUpdate:modelValue":b=>t.start=b,min:0,max:i-1,class:"csd-input"},null,8,es),[[C,t.start,void 0,{number:!0}]]),s[8]||(s[8]=g(" ~ ",-1)),k(e("input",{type:"number","onUpdate:modelValue":b=>t.end=b,min:0,max:i-1,class:"csd-input"},null,8,ts),[[C,t.end,void 0,{number:!0}]]),e("button",{class:"csd-remove",onClick:b=>E(a)},"x",8,ls)]))),128)),e("button",{class:"csd-add-btn",onClick:D},"+ 区間を追加")]),e("div",as,[s[10]||(s[10]=e("div",{class:"csd-label"},"差分配列:",-1)),e("div",ns,[(o(!0),d(p,null,f($.value,(t,a)=>(o(),d("div",{key:a,class:x(["csd-cell",{positive:t>0,negative:t<0}])},[e("div",os,n(t>0?"+":"")+n(t),1),e("div",ds,n(a),1)],2))),128))])]),e("div",us,[s[11]||(s[11]=e("div",{class:"csd-label"},"結果（差分の累積和）:",-1)),e("div",is,[(o(!0),d(p,null,f(U.value,(t,a)=>(o(),d("div",{key:a,class:"csd-cell csd-result-cell"},[e("div",cs,n(t),1),e("div",rs,n(a),1),e("div",{class:"csd-bar",style:B({height:`${t/Math.max(...U.value,1)*60}px`})},null,4)]))),128))])])])):h("v-if",!0)]))}}),ys=L(vs,[["__scopeId","data-v-99043c69"]]),ms={class:"slidev-layout layout-interactive"},bs={__name:"interactive",setup(V){return R(),(M,u)=>(o(),d("div",ms,[I(M.$slots,"default")]))}};export{ys as _,bs as a};
