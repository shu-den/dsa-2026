const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./md-CunmSa_v.js","./modules/vue-CCeyAUKo.js","./slidev/context-BGLCh0XU.js","./modules/shiki-0ujfn9a0.js","./modules/shiki-UqVAgQbi.css","./md-C_doIEiy.js","./md-BY2HATpL.js","./default-CPI5EjEd.js","./md-BY599WOe.js","./section-divider-BCwVKCog.js","./md-B2A5s67a.js","./md-CJX0qlpU.js","./md-eGks6WfY.js","./md-DE-fd107.js","./md-CzyBmIkH.js","./md-CsQAaj6h.js","./md-PI3IrN3s.js","./md-BbDZg9z4.js","./md-3cYcuKpp.js","./slidev/md-CEEO0_go.js","./modules/unplugin-icons-DMFwnmaC.js","./md-iLPMkmTO.js","./interactive-7ohC8FUS.js","./interactive-DX6lp84X.css","./md-BxUuts9y.js","./md-BrEQaoCR.js","./md-CaNKrM27.js","./md-DjfUlRJz.js","./md-lixgDMPl.js","./md-B7Aa1XlW.js","./md-DTaqayL8.js","./md-BtAfbfVY.js","./md-8xYRBFqq.js","./md-CP07h2oG.js","./md-BVubcHoJ.js","./md-DOx5Cos_.js","./md-Cz79BGpS.js","./md-Bkof0wK1.js","./md-5rveNKx4.js","./md-xKDRh4Qj.js","./question-IvV-M3Dg.js","./md-CFaVEr55.js","./md-Bd7CjY9n.js","./md-BiMUwQxN.js","./slidev/entry-BKQaNEki.js","./entry-CyMt_iSL.css","./slidev/overview-MEIn969o.js","./slidev/NoteDisplay.vue_vue_type_style_index_0_lang-BoZT8bXu.js","./NoteDisplay-DggBAdha.css","./slidev/SlideWrapper-CMBM6dWd.js","./SlideWrapper-4Jte_8x4.css","./slidev/IconButton.vue_vue_type_script_setup_true_lang-DsmzI6NF.js","./slidev/useSlideInfo-DkoBw93_.js","./slidev/notes-BERTpUL5.js","./slidev/TimerBar.vue_vue_type_script_setup_true_lang-BqmmTK4q.js","./slidev/Modal.vue_vue_type_script_setup_true_lang-D8lmX8rK.js","./slidev/notes-edit-Cf2d1RoB.js","./slidev/presenter-BOprgTAJ.js","./slidev/shortcuts-rA6jp8Ne.js","./shortcuts-B4GtsM5T.css","./presenter-Bs6wyjjy.css","./slidev/play-B2Too_UO.js","./play-D_7yfuao.css","./slidev/404-_Ykg9Ru9.js","./404-poZcRPAh.css"])))=>i.map(i=>d[i]);
import{z as v,A as We,B as yn,C as Ue,D as se,E as ma,G as Je,H as Ke,I as Ge,r as D,J as ae,K as ss,L as ne,M as A,N as Ze,O as Ye,o as Ia,e as wn,t as Xe,f as te,F as sm,g as Zn,j as am,P as _,Q as Cn,R as nm,S as Ua,p as tm,T as em,U as mm,V as lm,W as B,X as pm,Y as ee,Z as rm,_ as om,$ as Ja,a0 as im,a1 as me,a2 as cm,a3 as hm,a4 as gm,a5 as le,b as um,a as dm,a6 as fm,a7 as ym,a8 as wm,a9 as xm,aa as km,ab as vm,ac as bm,c as Mm}from"./modules/vue-CCeyAUKo.js";import{T as Sm}from"./modules/shiki-0ujfn9a0.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const m of e)if(m.type==="childList")for(const l of m.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function n(e){const m={};return e.integrity&&(m.integrity=e.integrity),e.referrerPolicy&&(m.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?m.credentials="include":e.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function t(e){if(e.ep)return;e.ep=!0;const m=n(e);fetch(e.href,m)}})();const I={theme:"../theme",title:"DSA 第11回: 前処理の力",titleTemplate:"%s - Slidev",addons:[],remoteAssets:!1,monaco:!0,monacoTypesSource:"local",monacoTypesAdditionalPackages:[],monacoTypesIgnorePackages:[],monacoRunAdditionalDeps:[],monacoRunUseStrict:!0,download:!1,export:{},info:`<p>データ構造とアルゴリズム 2026年度 第11回
関西大学 ビジネスデータサイエンス学部 / 伝住 周平</p>
`,highlighter:"shiki",twoslash:!0,lineNumbers:!1,colorSchema:"light",routerMode:"hash",aspectRatio:1.7777777777777777,canvasWidth:980,exportFilename:"",selectable:!1,themeConfig:{},fonts:{sans:['"Noto Sans JP"','"sans-serif"',"ui-sans-serif","system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"',"sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:['"JetBrains Mono"','"monospace"',"ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"],webfonts:["Noto Sans JP","sans-serif","JetBrains Mono","monospace"],provider:"google",local:[],italic:!1,weights:["200","400","600"]},favicon:"https://cdn.jsdelivr.net/gh/slidevjs/slidev/assets/favicon.png",drawings:{enabled:!1,persist:!1,presenterOnly:!1,syncAll:!0},plantUmlServer:"https://www.plantuml.com/plantuml",codeCopy:!0,magicMoveCopy:!0,author:"",record:"dev",css:"unocss",presenter:!0,browserExporter:"dev",htmlAttrs:{},transition:"slide-left",editor:!0,contextMenu:null,wakeLock:!0,mdc:!1,seoMeta:{},notesAutoRuby:{},duration:"30min",timer:"stopwatch",magicMoveDuration:800,preloadImages:!0,layout:"title",slidesTitle:"DSA 第11回: 前処理の力 - Slidev"};function xn(a,s,n){return Math.min(n,Math.max(s,a))}function _m(...a){return Am(a).reduce((s,n)=>s+n,0)}function Lm(a){return a=a??[],Array.isArray(a)?a:[a]}function Am(a){return Lm(a).flat(1)}function Om(a){return Array.from(new Set(a))}function Yn(...a){let s,n,t;a.length===1?(s=0,t=1,[n]=a):[s,n,t=1]=a;const e=[];let m=s;for(;m<n;)e.push(m),m+=t||1;return e}function $m(a){return a!=null}function Em(a,s){return Object.fromEntries(Object.entries(a).map(([n,t])=>s(n,t)).filter($m))}const Io="build",pe=v(()=>I.aspectRatio),re=v(()=>I.canvasWidth),Dm=v(()=>Math.ceil(re.value/pe.value)),Tm=v(()=>Em(I.themeConfig||{},(a,s)=>[`--slidev-theme-${a}`,s])),tn=I.slidesTitle,jo="./#/",Pm=[Object.values([])[0],Object.values([])[0]].filter(Boolean),Cm=new Set(["link","style","script","noscript"]),Nm=new Set(["title","titleTemplate","script","style","noscript"]),Xn=new Set(["base","meta","link","style","script","noscript"]),Rm=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),Im=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),jm=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),zm=new Set(["templateParams","htmlAttrs","bodyAttrs"]),Hm=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function kn(a,s={},n){for(const t in a){const e=a[t],m=n?`${n}:${t}`:t;typeof e=="object"&&e!==null?kn(e,s,m):typeof e=="function"&&(s[m]=e)}return s}const oe=(()=>{if(console.createTask)return console.createTask;const a={run:s=>s()};return()=>a})();function ie(a,s,n,t){for(let e=n;e<a.length;e+=1)try{const m=t?t.run(()=>a[e](...s)):a[e](...s);if(m instanceof Promise)return m.then(()=>ie(a,s,e+1,t))}catch(m){return Promise.reject(m)}}function Vm(a,s,n){if(a.length>0)return ie(a,s,0,oe(n))}function Qm(a,s,n){if(a.length>0){const t=oe(n);return Promise.all(a.map(e=>t.run(()=>e(...s))))}}function en(a,s){for(const n of[...a])n(s)}var Fm=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(a,s,n={}){if(!a||typeof s!="function")return()=>{};const t=a;let e;for(;this._deprecatedHooks[a];)e=this._deprecatedHooks[a],a=e.to;if(e&&!n.allowDeprecated){let m=e.message;m||(m=`${t} hook has been deprecated`+(e.to?`, please use ${e.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(m)||(console.warn(m),this._deprecatedMessages.add(m))}if(!s.name)try{Object.defineProperty(s,"name",{get:()=>"_"+a.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[a]=this._hooks[a]||[],this._hooks[a].push(s),()=>{s&&(this.removeHook(a,s),s=void 0)}}hookOnce(a,s){let n,t=(...e)=>(typeof n=="function"&&n(),n=void 0,t=void 0,s(...e));return n=this.hook(a,t),n}removeHook(a,s){const n=this._hooks[a];if(n){const t=n.indexOf(s);t!==-1&&n.splice(t,1),n.length===0&&(this._hooks[a]=void 0)}}deprecateHook(a,s){this._deprecatedHooks[a]=typeof s=="string"?{to:s}:s;const n=this._hooks[a]||[];this._hooks[a]=void 0;for(const t of n)this.hook(a,t)}deprecateHooks(a){for(const s in a)this.deprecateHook(s,a[s])}addHooks(a){const s=kn(a),n=Object.keys(s).map(t=>this.hook(t,s[t]));return()=>{for(const t of n)t();n.length=0}}removeHooks(a){const s=kn(a);for(const n in s)this.removeHook(n,s[n])}removeAllHooks(){this._hooks={}}callHook(a,...s){return this.callHookWith(Vm,a,s)}callHookParallel(a,...s){return this.callHookWith(Qm,a,s)}callHookWith(a,s,n){const t=this._before||this._after?{name:s,args:n,context:{}}:void 0;this._before&&en(this._before,t);const e=a(this._hooks[s]?[...this._hooks[s]]:[],n,s);return e instanceof Promise?e.finally(()=>{this._after&&t&&en(this._after,t)}):(this._after&&t&&en(this._after,t),e)}beforeEach(a){return this._before=this._before||[],this._before.push(a),()=>{if(this._before!==void 0){const s=this._before.indexOf(a);s!==-1&&this._before.splice(s,1)}}}afterEach(a){return this._after=this._after||[],this._after.push(a),()=>{if(this._after!==void 0){const s=this._after.indexOf(a);s!==-1&&this._after.splice(s,1)}}}};function Bm(){return new Fm}const qm=["name","property","http-equiv"],Wm=new Set(["viewport","description","keywords","robots"]);function ce(a){const s=a.split(":");return s.length?Hm.has(s[1]):!1}function vn(a){const{props:s,tag:n}=a;if(Im.has(n))return n;if(n==="link"&&s.rel==="canonical")return"canonical";const t=s.hreflang||s.type;if(n==="link"&&s.rel==="alternate"&&t)return`alternate:${t}`;if(s.charset)return"charset";if(a.tag==="meta"){for(const e of qm)if(s[e]!==void 0){const m=s[e],l=m&&typeof m=="string"&&m.includes(":"),p=m&&Wm.has(m),o=!(l||p)&&a.key?`:key:${a.key}`:"";return`${n}:${m}${o}`}}if(a.key)return`${n}:key:${a.key}`;if(s.id)return`${n}:id:${s.id}`;if(Nm.has(n)){const e=a.textContent||a.innerHTML;if(e)return`${n}:content:${e}`}}function st(a){const s=a._h||a._d;if(s)return s;const n=a.textContent||a.innerHTML;return n||`${a.tag}:${Object.entries(a.props).map(([t,e])=>`${t}:${String(e)}`).join(",")}`}function ja(a,s,n){typeof a==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(a=a());const e=s?s(n,a):a;if(Array.isArray(e))return e.map(m=>ja(m,s));if(e?.constructor===Object){const m={};for(const l of Object.keys(e))m[l]=ja(e[l],s,l);return m}return e}function Um(a,s){const n=a==="style"?new Map:new Set;function t(e){if(e==null||e===void 0)return;const m=String(e).trim();if(m)if(a==="style"){const[l,...p]=m.split(":").map(r=>r?r.trim():"");l&&p.length&&n.set(l,p.join(":"))}else m.split(" ").filter(Boolean).forEach(l=>n.add(l))}return typeof s=="string"?a==="style"?s.split(";").forEach(t):t(s):Array.isArray(s)?s.forEach(e=>t(e)):s&&typeof s=="object"&&Object.entries(s).forEach(([e,m])=>{m&&m!=="false"&&(a==="style"?n.set(String(e).trim(),String(m)):t(e))}),n}function he(a,s){return a.props=a.props||{},s?a.tag==="templateParams"?(a.props=s,a):(Object.entries(s).forEach(([n,t])=>{if(t===null){a.props[n]=null;return}if(n==="class"||n==="style"){a.props[n]=Um(n,t);return}if(jm.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof t=="object"){let p=s.type;if(s.type||(p="application/json"),!p?.endsWith("json")&&p!=="speculationrules")return;s.type=p,a.props.type=p,a[n]=JSON.stringify(t)}else a[n]=t;return}const e=String(t),m=n.startsWith("data-"),l=a.tag==="meta"&&n==="content";e==="true"||e===""?a.props[n]=m||l?e:!0:!t&&m&&e==="false"?a.props[n]="false":t!==void 0&&(a.props[n]=t)}),a):a}function Jm(a,s){const n=typeof s=="object"&&typeof s!="function"?s:{[a==="script"||a==="noscript"||a==="style"?"innerHTML":"textContent"]:s},t=he({tag:a,props:{}},n);return t.key&&Cm.has(t.tag)&&(t.props["data-hid"]=t._h=t.key),t.tag==="script"&&typeof t.innerHTML=="object"&&(t.innerHTML=JSON.stringify(t.innerHTML),t.props.type=t.props.type||"application/json"),Array.isArray(t.props.content)?t.props.content.map(e=>({...t,props:{...t.props,content:e}})):t}function Km(a,s){if(!a)return[];typeof a=="function"&&(a=a());const n=(e,m)=>{for(let l=0;l<s.length;l++)m=s[l](e,m);return m};a=n(void 0,a);const t=[];return a=ja(a,n),Object.entries(a||{}).forEach(([e,m])=>{if(m!==void 0)for(const l of Array.isArray(m)?m:[m])t.push(Jm(e,l))}),t.flat()}const at=(a,s)=>a._w===s._w?a._p-s._p:a._w-s._w,nt={base:-10,title:10},Gm={critical:-8,high:-1,low:2},tt={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},Zm=/@import/,oa=a=>a===""||a===!0;function Ym(a,s){if(typeof s.tagPriority=="number")return s.tagPriority;let n=100;const t=Gm[s.tagPriority]||0,e=a.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:tt;if(s.tag in nt)n=nt[s.tag];else if(s.tag==="meta"){const m=s.props["http-equiv"]==="content-security-policy"?"content-security-policy":s.props.charset?"charset":s.props.name==="viewport"?"viewport":null;m&&(n=tt.meta[m])}else if(s.tag==="link"&&s.props.rel)n=e.link[s.props.rel];else if(s.tag==="script"){const m=String(s.props.type);oa(s.props.async)?n=e.script.async:s.props.src&&!oa(s.props.defer)&&!oa(s.props.async)&&m!=="module"&&!m.endsWith("json")||s.innerHTML&&!m.endsWith("json")?n=e.script.sync:(oa(s.props.defer)&&s.props.src&&!oa(s.props.async)||m==="module")&&(n=e.script.defer)}else s.tag==="style"&&(n=s.innerHTML&&Zm.test(s.innerHTML)?e.style.imported:e.style.sync);return(n||100)+t}function et(a,s){const n=typeof s=="function"?s(a):s,t=n.key||String(a.plugins.size+1);a.plugins.get(t)||(a.plugins.set(t,n),a.hooks.addHooks(n.hooks||{}))}function Xm(a={}){const s=Bm();s.addHooks(a.hooks||{});const n=!a.document,t=new Map,e=new Map,m=new Set,l={_entryCount:1,plugins:e,dirty:!1,resolvedOptions:a,hooks:s,ssr:n,entries:t,headEntries(){return[...t.values()]},use:p=>et(l,p),push(p,r){const o={...r||{}};delete o.head;const c=o._index??l._entryCount++,g={_i:c,input:p,options:o},h={_poll(i=!1){l.dirty=!0,!i&&m.add(c),s.callHook("entries:updated",l)},dispose(){t.delete(c)&&l.invalidate()},patch(i){(!o.mode||o.mode==="server"&&n||o.mode==="client"&&!n)&&(g.input=i,t.set(c,g),h._poll())}};return h.patch(p),h},async resolveTags(){const p={tagMap:new Map,tags:[],entries:[...l.entries.values()]};for(await s.callHook("entries:resolve",p);m.size;){const h=m.values().next().value;m.delete(h);const i=t.get(h);if(i){const d={tags:Km(i.input,a.propResolvers||[]).map(u=>Object.assign(u,i.options)),entry:i};await s.callHook("entries:normalize",d),i._tags=d.tags.map((u,f)=>(u._w=Ym(l,u),u._p=(i._i<<10)+f,u._d=vn(u),u))}}let r=!1;p.entries.flatMap(h=>(h._tags||[]).map(i=>({...i,props:{...i.props}}))).sort(at).reduce((h,i)=>{const d=String(i._d||i._p);if(!h.has(d))return h.set(d,i);const u=h.get(d);if((i?.tagDuplicateStrategy||(zm.has(i.tag)?"merge":null)||(i.key&&i.key===u.key?"merge":null))==="merge"){const y={...u.props};Object.entries(i.props).forEach(([w,x])=>y[w]=w==="style"?new Map([...u.props.style||new Map,...x]):w==="class"?new Set([...u.props.class||new Set,...x]):x),h.set(d,{...i,props:y})}else i._p>>10===u._p>>10&&i.tag==="meta"&&ce(d)?(h.set(d,Object.assign([...Array.isArray(u)?u:[u],i],i)),r=!0):(i._w===u._w?i._p>u._p:i?._w<u?._w)&&h.set(d,i);return h},p.tagMap);const o=p.tagMap.get("title"),c=p.tagMap.get("titleTemplate");if(l._title=o?.textContent,c){const h=c?.textContent;if(l._titleTemplate=h,h){let i=typeof h=="function"?h(o?.textContent):h;typeof i=="string"&&!l.plugins.has("template-params")&&(i=i.replace("%s",o?.textContent||"")),o?i===null?p.tagMap.delete("title"):p.tagMap.set("title",{...o,textContent:i}):(c.tag="title",c.textContent=i)}}p.tags=Array.from(p.tagMap.values()),r&&(p.tags=p.tags.flat().sort(at)),await s.callHook("tags:beforeResolve",p),await s.callHook("tags:resolve",p),await s.callHook("tags:afterResolve",p);const g=[];for(const h of p.tags){const{innerHTML:i,tag:d,props:u}=h;if(Rm.has(d)&&!(Object.keys(u).length===0&&!h.innerHTML&&!h.textContent)&&!(d==="meta"&&!u.content&&!u["http-equiv"]&&!u.charset)){if(d==="script"&&i){if(String(u.type).endsWith("json")){const f=typeof i=="string"?i:JSON.stringify(i);h.innerHTML=f.replace(/</g,"\\u003C")}else typeof i=="string"&&(h.innerHTML=i.replace(new RegExp(`</${d}`,"g"),`<\\/${d}`));h._d=vn(h)}g.push(h)}}return g},invalidate(){for(const p of t.values())m.add(p._i);l.dirty=!0,s.callHook("entries:updated",l)}};return(a?.plugins||[]).forEach(p=>et(l,p)),l.hooks.callHook("init",l),a.init?.forEach(p=>p&&l.push(p)),l}const sl=(a,s)=>We(s)?yn(s):s,ge="usehead";function al(a){return{install(n){n.config.globalProperties.$unhead=a,n.config.globalProperties.$head=a,n.provide(ge,a)}}.install}function nl(){if(Ue()){const a=se(ge);if(a)return a}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function tl(a,s={}){const n=s.head||nl();return n.ssr?n.push(a||{},s):el(n,a,s)}function el(a,s,n={}){const t=D(!1);let e;return ma(()=>{const l=t.value?{}:ja(s,sl);e?e.patch(l):e=a.push(l,n)}),ae()&&(Je(()=>{e.dispose()}),Ke(()=>{t.value=!0}),Ge(()=>{t.value=!1})),e}function bn(a){if(a===!1||a==="false")return null;if(a==null||a===!0||a==="true")return"+1";if(typeof a=="string"&&"+-".includes(a[0]))return a;const s=+a;return Number.isNaN(s)?(console.error(`Invalid "at" prop value: ${a}`),null):s<=0?(console.warn(`[Slidev] "at" prop value must be greater than 0, but got ${a}, has been set to 1`),1):s}function ml(a){return Array.isArray(a)?[bn(a[0]),bn(a[1])]:null}function ue(a,s=0,n){const t=D(!1);let e=new Map,m=new Map;const l={get current(){return xn(+a.value,s,l.total)},set current(p){a.value=t.value?xn(p,s,l.total):p},clicksStart:s,get relativeSizeMap(){return e},get maxMap(){return m},get isMounted(){return t.value},setup(){ne(()=>{t.value=!0,m=A(m),Ze(a)||(l.current=a.value)}),Ye(()=>{t.value=!1,e=new Map,m=new Map})},calculateSince(p,r=1){const o=bn(p);if(o==null)return null;let c,g,h;if(typeof o=="string"){const i=l.currentOffset,d=+o;c=i+d,g=i+d+r-1,h=d+r-1}else c=o,g=o+r-1,h=0;return{start:c,end:+Number.POSITIVE_INFINITY,max:g,delta:h,currentOffset:v(()=>l.current-c),isCurrent:v(()=>l.current===c),isActive:v(()=>l.current>=c)}},calculateRange(p){const r=ml(p);if(r==null)return null;const[o,c]=r;let g,h,i;return typeof o=="string"?(g=l.currentOffset+ +o,i=+o):(g=o,i=0),typeof c=="string"?(h=g+ +c,i+=+c):h=c,{start:g,end:h,max:h,delta:i,currentOffset:v(()=>l.current-g),isCurrent:v(()=>l.current===g),isActive:v(()=>g<=l.current&&l.current<h)}},calculate(p){return Array.isArray(p)?l.calculateRange(p):l.calculateSince(p)},register(p,r){if(!r)return;const{delta:o,max:c}=r;e.set(p,o),m.set(p,c)},unregister(p){e.delete(p),m.delete(p)},get currentOffset(){return _m(...e.values())},get total(){return n??(t.value?Math.max(0,...m.values()):0)}};return l}function ll(a,s=0){const n=a?.meta.slide?.frontmatter.clicksStart??0,t=D(Math.max(yn(s),n));return ss(()=>yn(s),e=>{t.value=Math.max(e,n)}),ue(t,n,a?.meta?.clicks)}const pl="modulepreload",rl=function(a,s){return new URL(a,s).href},mt={},S=function(s,n,t){let e=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(g=>Promise.resolve(g).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const l=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),r=p?.nonce||p?.getAttribute("nonce");e=o(n.map(c=>{if(c=rl(c,t),c in mt)return;mt[c]=!0;const g=c.endsWith(".css"),h=g?'[rel="stylesheet"]':"";if(t)for(let d=l.length-1;d>=0;d--){const u=l[d];if(u.href===c&&(!g||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const i=document.createElement("link");if(i.rel=g?"stylesheet":pl,g||(i.as="script"),i.crossOrigin="",i.href=c,r&&i.setAttribute("nonce",r),document.head.appendChild(i),g)return new Promise((d,u)=>{i.addEventListener("load",d),i.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${c}`)))})}))}function m(l){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=l,window.dispatchEvent(p),!p.defaultPrevented)throw l}return e.then(l=>{for(const p of l||[])p.status==="rejected"&&m(p.reason);return s().catch(m)})},ol=(a,s)=>{const n=a.__vccOpts||a;for(const[t,e]of s)n[t]=e;return n},il={},cl={class:"px-4 py-10 text-center text-red-700 dark:text-red-500 font-bold font-mono"};function hl(a,s){return Ia(),wn("div",cl,Xe("Failed to fetch this slide. Please check your network connection."))}const O=ol(il,[["render",hl]]),gl={class:"h-full w-full flex items-center justify-center gap-2 slidev-slide-loading"},ul=te({__name:"SlideLoading",setup(a){const s=D(!1);return ne(()=>{setTimeout(()=>{s.value=!0},200)}),(n,t)=>(Ia(),wn("div",gl,[s.value?(Ia(),wn(sm,{key:0},[t[0]||(t[0]=Zn("div",{class:"i-svg-spinners-90-ring-with-bg text-xl"},null,-1)),t[1]||(t[1]=Zn("div",null,"Loading slide...",-1))],64)):am("v-if",!0)]))}}),dl={theme:"../theme",title:"DSA 第11回: 前処理の力",info:`データ構造とアルゴリズム 2026年度 第11回
関西大学 ビジネスデータサイエンス学部 / 伝住 周平
`,drawings:{enabled:!1},transition:"slide-left",routerMode:"hash",layout:"title"},hs=_(dl),fl=A({get layout(){return hs.layout},get transition(){return hs.transition},get class(){return hs.class},get clicks(){return hs.clicks},get name(){return hs.name},get preload(){return hs.preload},slide:{content:"",revision:"-29pefp",frontmatterRaw:`theme: ../theme
title: 'DSA 第11回: 前処理の力'
info: |
  データ構造とアルゴリズム 2026年度 第11回
  関西大学 ビジネスデータサイエンス学部 / 伝住 周平
drawings:
  enabled: false
transition: slide-left
routerMode: hash
layout: title
`,note:"",title:"DSA 第11回: 前処理の力",index:0,noteHTML:`<p>「みなさんは辞書を引いたことがありますよね．
英和辞書で 'algorithm' を引くとき，AのページからAlの所を開いて……
ほんの数秒で見つかります．</p>
<p>でも，もし索引がなかったら？
最初のページから1ページずつめくって探すことになります．
何千ページもある辞書を毎回1ページ目から．</p>
<p>索引を作るのは大変です．辞書の編集者は膨大な時間をかけて索引を整備した．
でもその<strong>一度だけの労力</strong>のおかげで，何百万人の利用者が何百万回，瞬時に検索できる．</p>
<p>これが<strong>前処理</strong>の発想です．
一度手間をかけて準備すれば，その後の操作が劇的に速くなる．</p>
<p>今日はこの発想を数値計算に応用した，
<strong>累積和</strong>と<strong>いもす法</strong>を学びます．
仕組みはシンプルですが，使いこなすと非常に強力な技法です．」</p>
`,raw:"",frontmatter:hs,filepath:"",start:0,id:0,no:1},__clicksContext:null,__preloaded:!1}),yl={layout:"objectives"},gs=_(yl),wl=A({get layout(){return gs.layout},get transition(){return gs.transition},get class(){return gs.class},get clicks(){return gs.clicks},get name(){return gs.name},get preload(){return gs.preload},slide:{content:"",revision:"-9bp7zg",frontmatterRaw:`layout: objectives
`,note:"",title:"本日の学習目標",level:2,index:1,noteHTML:`<p>「今日の目標です．</p>
<p>前処理による計算量改善の考え方を身につけること．
累積和の仕組みを理解し，区間和を <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> で求められること．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[R+1] - S[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span> の公式を正しく使えること．
いもす法の原理を説明できること．
そして2次元累積和の考え方を理解すること．</p>
<p>今日の内容はDP（第9回・第10回）に比べるとシンプルです．
でも，実務でもプログラミングでも使う頻度はかなり高い技法なので，しっかり身につけてください．」</p>
`,raw:"",frontmatter:gs,filepath:"",start:41,id:1,no:2},__clicksContext:null,__preloaded:!1}),xl={},us=_(xl),kl=A({get layout(){return us.layout},get transition(){return us.transition},get class(){return us.class},get clicks(){return us.clicks},get name(){return us.name},get preload(){return us.preload},slide:{content:"",revision:"-7lpil8",note:"",title:"前回の復習",level:2,index:2,noteHTML:`<p>「前回の復習です．</p>
<p>第10回では2次元DPとナップザック問題を学びました．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>w</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i][w]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span></span></span></span> で品物と重量制限の2軸で状態を管理し，
『入れる』vs『入れない』の2択で <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>max</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\\max</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mop">max</span></span></span></span> を取る漸化式でした．
逆追跡でどの品物を選んだかも復元できましたね．</p>
<p>今日のキーポイントとして，
第3回の<strong>総和記号 Σ</strong> が累積和の定義に登場します．
第2回の<strong>計算量比較</strong>が，前処理の効果を測るのに使います．
そして第14回の<strong>包除原理</strong>が，2次元累積和の公式の背景にあります．</p>
<p>前回の予告で，『100万個の数列に対する区間和クエリを <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> で答えられる』と言いました．
今日はその仕組みを学びます．」</p>
`,raw:"",frontmatter:us,filepath:"",start:67,id:2,no:3},__clicksContext:null,__preloaded:!1}),vl={layout:"section-divider"},ds=_(vl),bl=A({get layout(){return ds.layout},get transition(){return ds.transition},get class(){return ds.class},get clicks(){return ds.clicks},get name(){return ds.name},get preload(){return ds.preload},slide:{content:"",revision:"h8w5fc",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 1",level:1,index:3,noteHTML:`<p>「まずは，なぜ前処理をする必要があるのか，動機から見ていきましょう．」</p>
`,raw:"",frontmatter:ds,filepath:"",start:115,id:3,no:4},__clicksContext:null,__preloaded:!1}),Ml={},fs=_(Ml),Sl=A({get layout(){return fs.layout},get transition(){return fs.transition},get class(){return fs.class},get clicks(){return fs.clicks},get name(){return fs.name},get preload(){return fs.preload},slide:{content:"",revision:"-niumco",note:"",title:"辞書の索引 ― 前処理の原点",level:2,index:4,noteHTML:`<p>「辞書の索引を思い出してください．</p>
<p>索引がなければ，毎回1ページずつ探す ― <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> です．
索引があれば，一発で見つかる ― <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> です．</p>
<p>前処理の発想はこれと同じです．
索引を作るのには時間がかかる ― これが前処理コスト．
でもその一度だけの労力のおかげで，何百万回のクエリが一瞬で終わる．</p>
<p>『一度だけ頑張って準備すれば，あとは高速』 ―
この発想を数値計算に応用したのが，今日学ぶ累積和といもす法です．」</p>
`,raw:"",frontmatter:fs,filepath:"",start:128,id:4,no:5},__clicksContext:null,__preloaded:!1}),_l={},ys=_(_l),Ll=A({get layout(){return ys.layout},get transition(){return ys.transition},get class(){return ys.class},get clicks(){return ys.clicks},get name(){return ys.name},get preload(){return ys.preload},slide:{content:"",revision:"-um31av",note:"",title:"「毎回計算」の問題点",level:2,index:5,noteHTML:`<p>「具体的な問題を見てみましょう．</p>
<p>配列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mo stretchy="false">[</mo><mn>3</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>4</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>9</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A = [3, 1, 4, 1, 5, 9, 2, 6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">]</span></span></span></span> があります．
この配列に対して，次のようなクエリが何度も飛んできます．</p>
<p>クエリ1: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span></span></span></span> の合計は？ → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>5</mn><mo>+</mo><mn>9</mn><mo>=</mo><mn>19</mn></mrow><annotation encoding="application/x-tex">4+1+5+9 = 19</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">19</span></span></span></span>
クエリ2: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span></span></span></span> の合計は？ → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">3+1+4+1 = 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span></span></span></span>
クエリ3: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span></span></span></span> の合計は？ → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>5</mn><mo>+</mo><mn>9</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>22</mn></mrow><annotation encoding="application/x-tex">1+4+1+5+9+2 = 22</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">22</span></span></span></span></p>
<p>こういうクエリが <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span></span></span></span> 回来るとします．</p>
<p>素朴に毎回足すと，1回のクエリで最悪 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> の足し算．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span></span></span></span> 回のクエリで全体 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(NQ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal">NQ</span><span class="mclose">)</span></span></span></span> です．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>100,000</mn></mrow><annotation encoding="application/x-tex">N = 100{,}000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mord"><span class="mpunct">,</span></span><span class="mord">000</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo>=</mo><mn>100,000</mn></mrow><annotation encoding="application/x-tex">Q = 100{,}000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mord"><span class="mpunct">,</span></span><span class="mord">000</span></span></span></span> だと，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">10^{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span></span></span></span> 回の計算．
第2回で学んだように，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">10^{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span></span></span></span> は1秒に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">10^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span> 回として約10秒．
リアルタイムのサービスでは使えません．」</p>
`,raw:"",frontmatter:ys,filepath:"",start:167,id:5,no:6},__clicksContext:null,__preloaded:!1}),Al={layout:"assertion-evidence"},ws=_(Al),Ol=A({get layout(){return ws.layout},get transition(){return ws.transition},get class(){return ws.class},get clicks(){return ws.clicks},get name(){return ws.name},get preload(){return ws.preload},slide:{content:"",revision:"jzl9o1",frontmatterRaw:`layout: assertion-evidence
`,note:"",title:"観察: 毎回足し算するのは無駄",level:3,index:6,noteHTML:`<p>「ここで立ち止まって考えてみてください．</p>
<p>配列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> は<strong>一度も変わらない</strong>のに，毎回同じ足し算を繰り返している．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[0]+A[1]+A[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> を100回聞かれたら100回足す ― これは無駄ですよね．</p>
<p>解決策は辞書の索引と同じです．
最初に全部の『ここまでの合計』を計算しておけばいい．</p>
<p>これが**累積和（Prefix Sum）**の発想です．
英語ではPrefix Sum，日本語では累積和と呼びます．」</p>
`,raw:"",frontmatter:ws,filepath:"",start:214,id:6,no:7},__clicksContext:null,__preloaded:!1}),$l={layout:"section-divider"},xs=_($l),El=A({get layout(){return xs.layout},get transition(){return xs.transition},get class(){return xs.class},get clicks(){return xs.clicks},get name(){return xs.name},get preload(){return xs.preload},slide:{content:"",revision:"1p5l74",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 2",level:1,index:7,noteHTML:`<p>「では，具体的にどうやって事前計算するかを見ていきましょう．」</p>
`,raw:"",frontmatter:xs,filepath:"",start:255,id:7,no:8},__clicksContext:null,__preloaded:!1}),Dl={},ks=_(Dl),Tl=A({get layout(){return ks.layout},get transition(){return ks.transition},get class(){return ks.class},get clicks(){return ks.clicks},get name(){return ks.name},get preload(){return ks.preload},slide:{content:"",revision:"-p0opll",note:"",title:"累積和配列の定義",level:2,index:8,noteHTML:`<p>「累積和配列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> を定義します．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S[0] = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[i] = S[i-1] + A[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>≥</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i \\geq 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7955em;vertical-align:-0.136em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> のとき）</p>
<p>つまり，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> の先頭 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 個の合計です．</p>
<p>ポイントが3つあります．</p>
<p>1つ目．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> の長さは <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> より<strong>1つ多い</strong>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> が8個なら <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> は9個です．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span> を含めるからです．</p>
<p>2つ目．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> は『<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> の先頭 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 個の合計』を意味します．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span></span></span></span> なら <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[0]+A[1]+A[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> の合計です．</p>
<p>3つ目．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S[0] = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> は『0個の合計 = 0』という意味．
この番兵を置くことで，後の公式がシンプルになります．」</p>
`,raw:"",frontmatter:ks,filepath:"",start:268,id:8,no:9},__clicksContext:null,__preloaded:!1}),Pl={},vs=_(Pl),Cl=A({get layout(){return vs.layout},get transition(){return vs.transition},get class(){return vs.class},get clicks(){return vs.clicks},get name(){return vs.name},get preload(){return vs.preload},slide:{content:"",revision:"-6crgya",note:"",title:"累積和配列の構築",level:2,index:9,noteHTML:`<p>「<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mo stretchy="false">[</mo><mn>3</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>4</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>9</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A = [3, 1, 4, 1, 5, 9, 2, 6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">]</span></span></span></span> で実際に構築しましょう．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S[0] = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>．これは初期値です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn><mo>+</mo><mn>3</mn><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">S[1] = S[0] + A[0] = 0 + 3 = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>3</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">S[2] = S[1] + A[1] = 3 + 1 = 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mn>4</mn><mo>+</mo><mn>4</mn><mo>=</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">S[3] = S[2] + A[2] = 4 + 4 = 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>=</mo><mn>8</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">S[4] = S[3] + A[3] = 8 + 1 = 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>=</mo><mn>9</mn><mo>+</mo><mn>5</mn><mo>=</mo><mn>14</mn></mrow><annotation encoding="application/x-tex">S[5] = S[4] + A[4] = 9 + 5 = 14</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">14</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo><mo>=</mo><mn>14</mn><mo>+</mo><mn>9</mn><mo>=</mo><mn>23</mn></mrow><annotation encoding="application/x-tex">S[6] = S[5] + A[5] = 14 + 9 = 23</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">14</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">23</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>7</mn><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo><mo>=</mo><mn>23</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>25</mn></mrow><annotation encoding="application/x-tex">S[7] = S[6] + A[6] = 23 + 2 = 25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">7</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">23</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">25</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>8</mn><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mn>7</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>7</mn><mo stretchy="false">]</mo><mo>=</mo><mn>25</mn><mo>+</mo><mn>6</mn><mo>=</mo><mn>31</mn></mrow><annotation encoding="application/x-tex">S[8] = S[7] + A[7] = 25 + 6 = 31</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">8</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">7</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">7</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">25</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">31</span></span></span></span>．</p>
<p>左から順に前の値に足していくだけです．
この前処理にかかる時間は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> ― 1回のforループで終わります．」</p>
`,raw:"",frontmatter:vs,filepath:"",start:312,id:9,no:10},__clicksContext:null,__preloaded:!1}),Nl={},bs=_(Nl),Rl=A({get layout(){return bs.layout},get transition(){return bs.transition},get class(){return bs.class},get clicks(){return bs.clicks},get name(){return bs.name},get preload(){return bs.preload},slide:{content:"",revision:"-l03fek",note:"",title:"区間和の公式",level:2,index:10,noteHTML:`<p>「累積和配列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> があると何がうれしいか？</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mi>L</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mo>⋯</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mi>R</mi><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[L] + A[L+1] + \\cdots + A[R] = S[R+1] - S[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span></p>
<p>引き算1回で区間の合計が求まるのです！</p>
<p>なぜこの公式が成り立つか，直感的に説明します．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[R+1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi>R</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[R]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span></span></span></span> までの合計，つまり先頭 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">R+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 個の合計です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span> は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi>L</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[L-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> までの合計，つまり先頭 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 個の合計です．
差を取ると，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi>L</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[L-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> の分がキャンセルされて，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi>R</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[R]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span></span></span></span> の合計だけが残る．</p>
<p>例をやってみましょう．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span></span></span></span> の合計は？</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mn>23</mn><mo>−</mo><mn>4</mn><mo>=</mo><mn>19</mn></mrow><annotation encoding="application/x-tex">S[6] - S[2] = 23 - 4 = 19</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">23</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">19</span></span></span></span></p>
<p>検算: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo><mo>=</mo><mn>4</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>5</mn><mo>+</mo><mn>9</mn><mo>=</mo><mn>19</mn></mrow><annotation encoding="application/x-tex">A[2]+A[3]+A[4]+A[5] = 4+1+5+9 = 19</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">19</span></span></span></span> ✓</p>
<p>引き算1回で答えが出ました．」</p>
`,raw:"",frontmatter:bs,filepath:"",start:357,id:10,no:11},__clicksContext:null,__preloaded:!1}),Il={},Ms=_(Il),jl=A({get layout(){return Ms.layout},get transition(){return Ms.transition},get class(){return Ms.class},get clicks(){return Ms.clicks},get name(){return Ms.name},get preload(){return Ms.preload},slide:{content:"",revision:"-drxmn0",note:"",title:"累積和の練習",level:2,index:11,noteHTML:`<p>「いくつかのクエリで練習してみましょう．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span></span></span></span> の合計は？
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>9</mn><mo>−</mo><mn>0</mn><mo>=</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">S[4] - S[0] = 9 - 0 = 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span></span></span></span>．検算: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">3+1+4+1 = 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span></span></span></span> ✓</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span></span></span></span> の合計は？
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>7</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>25</mn><mo>−</mo><mn>3</mn><mo>=</mo><mn>22</mn></mrow><annotation encoding="application/x-tex">S[7] - S[1] = 25 - 3 = 22</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">7</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">25</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">22</span></span></span></span>．検算: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>5</mn><mo>+</mo><mn>9</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>22</mn></mrow><annotation encoding="application/x-tex">1+4+1+5+9+2 = 22</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">22</span></span></span></span> ✓</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span></span></span></span> の合計は？ ― つまり1要素だけ．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>=</mo><mn>9</mn><mo>−</mo><mn>8</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">S[4] - S[3] = 9 - 8 = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>．検算: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">A[3] = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> ✓
1要素でも公式はちゃんと動きます．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>7</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[7]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">7</span><span class="mclose">]</span></span></span></span> の合計は？ ― つまり全体．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>8</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>31</mn><mo>−</mo><mn>0</mn><mo>=</mo><mn>31</mn></mrow><annotation encoding="application/x-tex">S[8] - S[0] = 31 - 0 = 31</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">8</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">31</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">31</span></span></span></span>．全体の合計です ✓</p>
<p>紙で <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span></span></span></span> の合計を計算してみてください．</p>
<p>（間）</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>7</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>=</mo><mn>25</mn><mo>−</mo><mn>8</mn><mo>=</mo><mn>17</mn></mrow><annotation encoding="application/x-tex">S[7] - S[3] = 25 - 8 = 17</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">7</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">25</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">17</span></span></span></span>．検算: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>+</mo><mn>5</mn><mo>+</mo><mn>9</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>17</mn></mrow><annotation encoding="application/x-tex">1+5+9+2 = 17</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">17</span></span></span></span> ✓
できましたか？」</p>
`,raw:"",frontmatter:Ms,filepath:"",start:408,id:11,no:12},__clicksContext:null,__preloaded:!1}),zl={},Ss=_(zl),Hl=A({get layout(){return Ss.layout},get transition(){return Ss.transition},get class(){return Ss.class},get clicks(){return Ss.clicks},get name(){return Ss.name},get preload(){return Ss.preload},slide:{content:"",revision:"-czy9a",note:"",title:"計算量の比較",level:2,index:12,noteHTML:`<p>「計算量を比較してみましょう．</p>
<p>素朴な方法は前処理なし，各クエリ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，全体 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(NQ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal">NQ</span><span class="mclose">)</span></span></span></span>．
累積和は前処理 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，各クエリ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>，全体 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N+Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span>．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi>Q</mi><mo>=</mo><mn>100,000</mn></mrow><annotation encoding="application/x-tex">N = Q = 100{,}000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mord"><span class="mpunct">,</span></span><span class="mord">000</span></span></span></span> で具体的に比較すると，
素朴な方法は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">10^{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span></span></span></span> 回の計算で約10秒．
累積和は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>200,000</mn></mrow><annotation encoding="application/x-tex">200{,}000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">200</span><span class="mord"><span class="mpunct">,</span></span><span class="mord">000</span></span></span></span> 回の計算で一瞬．
改善倍率は<strong>5万倍</strong>です．</p>
<p>前処理の <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> は，全体の計算量を <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(NQ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal">NQ</span><span class="mclose">)</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N+Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span> に劇的に改善する投資です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span></span></span></span> が大きいほど，この投資の効果は絶大になります．」</p>
`,raw:"",frontmatter:Ss,filepath:"",start:459,id:12,no:13},__clicksContext:null,__preloaded:!1}),Vl={},_s=_(Vl),Ql=A({get layout(){return _s.layout},get transition(){return _s.transition},get class(){return _s.class},get clicks(){return _s.clicks},get name(){return _s.name},get preload(){return _s.preload},slide:{content:"",revision:"dn6sfc",note:"",title:"累積和の擬似コード",level:2,index:13,noteHTML:`<p>「擬似コードを確認しておきましょう．</p>
<p>前処理は，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S[0] = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> から始めて，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> まで <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[i] = S[i-1] + A[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> を計算する．</p>
<p>クエリは，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[R+1] - S[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span> を返すだけ．</p>
<p>非常にシンプルですね．</p>
<p>ところで，この累積和の構築コード，何かに似ていませんか？</p>
<p>第9回で学んだDPテーブルの構築と同じ構造なのです．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[i] = S[i-1] + A[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> は漸化式そのもの．
小さい方から順に値を確定させていく ― ボトムアップの構造です．</p>
<p>累積和はDPの特殊ケースとも言えます．」</p>
`,raw:"",frontmatter:_s,filepath:"",start:504,id:13,no:14},__clicksContext:null,__preloaded:!1}),Fl={layout:"interactive"},Ls=_(Fl),Bl=A({get layout(){return Ls.layout},get transition(){return Ls.transition},get class(){return Ls.class},get clicks(){return Ls.clicks},get name(){return Ls.name},get preload(){return Ls.preload},slide:{content:"",revision:"-jevxkr",frontmatterRaw:`layout: interactive
`,note:"",title:"累積和で区間合計を求めよう",level:2,index:14,noteHTML:`<p>「画面に CumulativeSumDemo が表示されています．
配列の値を変えたり，区間を指定したりして，
累積和がどう動くか体験してみてください．</p>
<p>特に注目してほしいのは，
区間をどう変えても，答えが<strong>一瞬で</strong>表示されること．
毎回足し直しているのではなく，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[R+1] - S[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span> の引き算だけで求めているからです．</p>
<p>自分でいくつかの区間を試して，公式が正しいことを確認してみてください．」</p>
`,raw:"",frontmatter:Ls,filepath:"",start:554,id:14,no:15},__clicksContext:null,__preloaded:!1}),ql={layout:"section-divider"},As=_(ql),Wl=A({get layout(){return As.layout},get transition(){return As.transition},get class(){return As.class},get clicks(){return As.clicks},get name(){return As.name},get preload(){return As.preload},slide:{content:"",revision:"qittd2",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 3",level:1,index:15,noteHTML:`<p>「累積和は『区間の合計を<strong>読み出す</strong>』技法でした．
次は逆の発想 ― 『区間に値を<strong>加算する</strong>』技法，<strong>いもす法</strong>です．」</p>
`,raw:"",frontmatter:As,filepath:"",start:574,id:15,no:16},__clicksContext:null,__preloaded:!1}),Ul={},Os=_(Ul),Jl=A({get layout(){return Os.layout},get transition(){return Os.transition},get class(){return Os.class},get clicks(){return Os.clicks},get name(){return Os.name},get preload(){return Os.preload},slide:{content:"",revision:"1cvm6h",note:"",title:"いもす法の動機",level:2,index:16,noteHTML:`<p>「こういう問題を考えましょう．</p>
<p>電車が10個の駅を走っています．
乗客がそれぞれ違う区間で乗り降りする．
各駅間の乗車人数を求めたい．</p>
<p>素朴にやると，乗客ごとに該当する駅間を1つずつ +1 する．
乗客が3人なら大したことない．
でも乗客が100万人で駅が100万個なら？
100万人 × 区間の長さ分の操作 ― <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(NQ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal">NQ</span><span class="mclose">)</span></span></span></span> で非常に重い．</p>
<p>もっと賢い方法はないか？
実は，各乗客につき<strong>たった2箇所だけ</strong>操作すれば済む方法があるのです．」</p>
`,raw:"",frontmatter:Os,filepath:"",start:588,id:16,no:17},__clicksContext:null,__preloaded:!1}),Kl={},$s=_(Kl),Gl=A({get layout(){return $s.layout},get transition(){return $s.transition},get class(){return $s.class},get clicks(){return $s.clicks},get name(){return $s.name},get preload(){return $s.preload},slide:{content:"",revision:"-4km5v",note:"",title:"いもす法のアルゴリズム",level:2,index:17,noteHTML:`<p>「いもす法のアルゴリズムは3ステップです．</p>
<p>ステップ1: 差分配列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span> を用意する．全要素0で初期化．
ステップ2: 各区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>L</mi><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[L, R]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span></span></span></span> に対して，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[R+1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>．
ステップ3: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span> の累積和を取る．これが結果の配列．</p>
<p>なぜこれで正しいのか？</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> すると，累積和を取ったとき，位置 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 以降すべてに <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> の効果が伝播します．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[R+1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> すると，位置 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">R+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 以降で <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> の効果が打ち消される．
結果として，位置 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> の範囲だけに <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> が反映される．</p>
<p>各区間の処理がたった2回の操作で終わる ― これがいもす法の威力です．」</p>
`,raw:"",frontmatter:$s,filepath:"",start:628,id:17,no:18},__clicksContext:null,__preloaded:!1}),Zl={},Es=_(Zl),Yl=A({get layout(){return Es.layout},get transition(){return Es.transition},get class(){return Es.class},get clicks(){return Es.clicks},get name(){return Es.name},get preload(){return Es.preload},slide:{content:"",revision:"i6m4rp",note:"",title:"いもす法: ステップバイステップ",level:2,index:18,noteHTML:`<p>「区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1,4]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mclose">]</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[2,6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">]</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>5</mn><mo separator="true">,</mo><mn>7</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[5,7]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">7</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> する問題で実演します．</p>
<p>差分配列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span> を用意します．最初は全部0です．</p>
<p><strong>区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1,4]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mclose">]</span></span></span></span> を処理:</strong>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D = [0, +1, 0, 0, 0, -1, 0, 0, 0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose">]</span></span></span></span></p>
<p><strong>区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[2,6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">]</span></span></span></span> を処理:</strong>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>7</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[7]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">7</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D = [0, +1, +1, 0, 0, -1, 0, -1, 0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose">]</span></span></span></span></p>
<p><strong>区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>5</mn><mo separator="true">,</mo><mn>7</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[5,7]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">7</span><span class="mclose">]</span></span></span></span> を処理:</strong>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>8</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[8]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">8</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>．
ここで <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span></span></span></span> は元々 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> だったところに <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> を足すので <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> になります．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D = [0, +1, +1, 0, 0, 0, 0, -1, -1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mclose">]</span></span></span></span></p>
<p>最後に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span> の累積和を取ります．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo>+</mo><mn>0</mn><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo>+</mo><mn>0</mn><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo>+</mo><mn>0</mn><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo>+</mo><mn>0</mn><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo>+</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo>+</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">0, 0+1=1, 1+1=2, 2+0=2, 2+0=2, 2+0=2, 2+0=2, 2+(-1)=1, 1+(-1)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></p>
<p>結果: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 1, 2, 2, 2, 2, 2, 1, 0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose">]</span></span></span></span>」</p>
`,raw:"",frontmatter:Es,filepath:"",start:670,id:18,no:19},__clicksContext:null,__preloaded:!1}),Xl={},Ds=_(Xl),sp=A({get layout(){return Ds.layout},get transition(){return Ds.transition},get class(){return Ds.class},get clicks(){return Ds.clicks},get name(){return Ds.name},get preload(){return Ds.preload},slide:{content:"",revision:"-orhbha",note:"",title:"いもす法の検算",level:2,index:19,noteHTML:`<p>「結果を検算してみましょう．</p>
<p>位置1は区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1,4]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mclose">]</span></span></span></span> だけに含まれる → 重なり1 → 結果1 ✓
位置2,3,4は区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1,4]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mclose">]</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[2,6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">]</span></span></span></span> の2つに含まれる → 重なり2 → 結果2 ✓
位置5,6は区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[2,6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">]</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>5</mn><mo separator="true">,</mo><mn>7</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[5,7]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">7</span><span class="mclose">]</span></span></span></span> の2つに含まれる → 重なり2 → 結果2 ✓
位置7は区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>5</mn><mo separator="true">,</mo><mn>7</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[5,7]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">7</span><span class="mclose">]</span></span></span></span> だけに含まれる → 重なり1 → 結果1 ✓</p>
<p>合っていますね．</p>
<p>計算量を確認しましょう．
各区間の処理は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> の2操作だけ）．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span></span></span></span> 個の区間で <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span>．
最後の累積和が <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>．
合計 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N + Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span> です．</p>
<p>素朴な <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(NQ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal">NQ</span><span class="mclose">)</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N+Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span> へ ― 累積和と同じ構造の改善ですね．」</p>
`,raw:"",frontmatter:Ds,filepath:"",start:717,id:19,no:20},__clicksContext:null,__preloaded:!1}),ap={},Ts=_(ap),np=A({get layout(){return Ts.layout},get transition(){return Ts.transition},get class(){return Ts.class},get clicks(){return Ts.clicks},get name(){return Ts.name},get preload(){return Ts.preload},slide:{content:"",revision:"lyne9e",note:"",title:"いもす法の応用例",level:2,index:20,noteHTML:`<p>「いもす法は身の回りのさまざまな場面で使えます．</p>
<p>電車の混雑度 ― 乗車駅から降車駅までの区間で +1 すれば，各駅間の乗車人数が求まる．</p>
<p>ホテルの予約管理 ― チェックイン日で +1，チェックアウト日で -1 すれば，各日の宿泊者数が求まる．</p>
<p>イベントの参加者数 ― 開始時刻で +1，終了時刻で -1 すれば，各時間帯の参加人数が求まる．</p>
<p>Webサーバーの負荷 ― セッション開始で +1，終了で -1 すれば，各時刻の同時接続数が求まる．</p>
<p>どれも同じパターン ― 区間の始点と終点を記録して，最後に累積和を取るだけ．
データ分析の現場で非常に使われている技法です．</p>
<p>ちなみに『いもす法』という名前は，
日本の競技プログラマのハンドルネーム『imos』に由来します．
日本発の命名として世界の競技プログラミングコミュニティに定着している珍しい例です．」</p>
`,raw:"",frontmatter:Ts,filepath:"",start:764,id:20,no:21},__clicksContext:null,__preloaded:!1}),tp={layout:"interactive"},Ps=_(tp),ep=A({get layout(){return Ps.layout},get transition(){return Ps.transition},get class(){return Ps.class},get clicks(){return Ps.clicks},get name(){return Ps.name},get preload(){return Ps.preload},slide:{content:"",revision:"-ij1azg",frontmatterRaw:`layout: interactive
`,note:"",title:"いもす法を体験",level:2,index:21,noteHTML:`<p>「画面に CumulativeSumDemo のいもす法モードが表示されています．
区間を追加していくと，差分配列がどう変化し，
累積和を取ると結果がどうなるか，視覚的に確認できます．</p>
<p>いくつかの区間を追加して，重なりが多い場所の値が大きくなる様子を見てください．</p>
<p>できたら，隣の人と結果を確認し合ってみましょう．」</p>
`,raw:"",frontmatter:Ps,filepath:"",start:803,id:21,no:22},__clicksContext:null,__preloaded:!1}),mp={layout:"section-divider"},Cs=_(mp),lp=A({get layout(){return Cs.layout},get transition(){return Cs.transition},get class(){return Cs.class},get clicks(){return Cs.clicks},get name(){return Cs.name},get preload(){return Cs.preload},slide:{content:"",revision:"ps1ent",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 4",level:1,index:22,noteHTML:`<p>「累積和といもす法の基本を学びました．
ここからは応用と発展を見ていきましょう．」</p>
`,raw:"",frontmatter:Cs,filepath:"",start:821,id:22,no:23},__clicksContext:null,__preloaded:!1}),pp={},Ns=_(pp),rp=A({get layout(){return Ns.layout},get transition(){return Ns.transition},get class(){return Ns.class},get clicks(){return Ns.clicks},get name(){return Ns.name},get preload(){return Ns.preload},slide:{content:"",revision:"-bt90tq",note:"",title:"累積和とDPのつながり",level:2,index:23,noteHTML:`<p>「累積和の構築コードをもう一度見てください．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S[0] = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[i] = S[i-1] + A[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></p>
<p>これは第9回で学んだDPの3ステップと全く同じ構造です．</p>
<p>状態は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> = 先頭 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 個の合計．
漸化式は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[i] = S[i-1] + A[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>．
初期値は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S[0] = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>．</p>
<p>フィボナッチDPも同じ構造でした．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i] = dp[i-1] + dp[i-2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span>，初期値 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">dp[0] = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">dp[1] = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>．</p>
<p>共通するのは，『前の値を使って次の値を計算する』ボトムアップの構造です．
配列を左から右に順に埋めていく．</p>
<p>累積和を理解していれば，DPテーブルの構築も同じ発想だと納得できますし，
逆にDPを理解していれば，累積和もすんなり使えるはずです．」</p>
`,raw:"",frontmatter:Ns,filepath:"",start:835,id:23,no:24},__clicksContext:null,__preloaded:!1}),op={},Rs=_(op),ip=A({get layout(){return Rs.layout},get transition(){return Rs.transition},get class(){return Rs.class},get clicks(){return Rs.clicks},get name(){return Rs.name},get preload(){return Rs.preload},slide:{content:"",revision:"zcm7tl",note:"",title:"2次元累積和",level:2,index:24,noteHTML:`<p>「累積和を2次元に拡張すると，さらに強力になります．</p>
<p>2次元の配列 ― 表やグリッド ― があるとします．
この中の<strong>矩形領域の合計</strong>を <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> で求めたい．</p>
<p>画像処理では矩形領域の画素値合計を高速に計算するのに使われます．
顔認識や物体検出のアルゴリズムで，この2次元累積和が活躍しています．</p>
<p>公式はこうなります．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>sum</mtext><mo stretchy="false">(</mo><msub><mi>r</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>r</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><msub><mi>r</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><msub><mi>c</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><msub><mi>r</mi><mn>1</mn></msub><mo stretchy="false">]</mo><mo stretchy="false">[</mo><msub><mi>c</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><msub><mi>r</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><msub><mi>c</mi><mn>1</mn></msub><mo stretchy="false">]</mo><mo>+</mo><mi>S</mi><mo stretchy="false">[</mo><msub><mi>r</mi><mn>1</mn></msub><mo stretchy="false">]</mo><mo stretchy="false">[</mo><msub><mi>c</mi><mn>1</mn></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\\text{sum}(r_1, c_1, r_2, c_2) = S[r_2+1][c_2+1] - S[r_1][c_2+1] - S[r_2+1][c_1] + S[r_1][c_1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">sum</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></p>
<p>この式，引いて引いて足す ― 見覚えがありませんか？</p>
<p>大きい矩形から，上の余分を引いて，左の余分を引く．
でも左上の角は2回引いてしまったから1回足し直す．
これは<strong>包除原理</strong>そのものです．</p>
<p>第14回で『包除原理』を正式に学びます．
そのとき今日の2次元累積和を思い出すと，つながりが見えるはずです．」</p>
`,raw:"",frontmatter:Rs,filepath:"",start:884,id:24,no:25},__clicksContext:null,__preloaded:!1}),cp={},Is=_(cp),hp=A({get layout(){return Is.layout},get transition(){return Is.transition},get class(){return Is.class},get clicks(){return Is.clicks},get name(){return Is.name},get preload(){return Is.preload},slide:{content:"",revision:"c3yob3",note:"",title:"2次元累積和の具体例",level:2,index:25,noteHTML:`<p>「3×3の配列で具体例を見てみましょう．</p>
<p>元の配列は，1行目が <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1, 2, 3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mclose">]</span></span></span></span>，2行目が <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>4</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[4, 5, 6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">]</span></span></span></span>，3行目が <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>7</mn><mo separator="true">,</mo><mn>8</mn><mo separator="true">,</mo><mn>9</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[7, 8, 9]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">9</span><span class="mclose">]</span></span></span></span> です．</p>
<p>2次元累積和配列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> は4×4になります．
1行目は全部0．1列目も全部0．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[i][j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span> は左上の角からの矩形の合計です．</p>
<p>例えば <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>r</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(r_1, c_1) = (1, 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>r</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(r_2, c_2) = (2, 2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span> の矩形 ― つまり <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>5</mn><mo separator="true">,</mo><mn>6</mn><mo separator="true">,</mo><mn>8</mn><mo separator="true">,</mo><mn>9</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[5, 6, 8, 9]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">9</span><span class="mclose">]</span></span></span></span> の合計を求めてみます．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>S</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[3][3] - S[1][3] - S[3][1] + S[1][1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>45</mn><mo>−</mo><mn>6</mn><mo>−</mo><mn>12</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>28</mn></mrow><annotation encoding="application/x-tex">= 45 - 6 - 12 + 1 = 28</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">45</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">12</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">28</span></span></span></span></p>
<p>検算: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mo>+</mo><mn>6</mn><mo>+</mo><mn>8</mn><mo>+</mo><mn>9</mn><mo>=</mo><mn>28</mn></mrow><annotation encoding="application/x-tex">5+6+8+9 = 28</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">28</span></span></span></span> ✓</p>
<p>矩形領域の合計が引き算と足し算だけで求まりました．
前処理は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>×</mo><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N \\times M)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mclose">)</span></span></span></span>，各クエリは <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> です．」</p>
`,raw:"",frontmatter:Is,filepath:"",start:936,id:25,no:26},__clicksContext:null,__preloaded:!1}),gp={},js=_(gp),up=A({get layout(){return js.layout},get transition(){return js.transition},get class(){return js.class},get clicks(){return js.clicks},get name(){return js.name},get preload(){return js.preload},slide:{content:"",revision:"qaqkza",note:"",title:"2次元累積和の応用: 顔検出",level:2,index:26,noteHTML:`<p>「2次元累積和が実世界でどう使われているか，具体例を1つ紹介します．</p>
<p>みなさんのスマホのカメラで顔にピントが合いますよね．
あれの裏側で動いているのが<strong>Viola-Jones法</strong>という顔検出アルゴリズムで，
2001年に発表されました．</p>
<p>このアルゴリズムは，画像の中から顔を見つけるために，
<strong>数千個の矩形フィルタ</strong>を画像の各位置に適用します．
矩形フィルタというのは，『この矩形領域の画素値の合計はいくつか？』を求める操作です．</p>
<p>もし毎回素朴に矩形領域を全部足していたら，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>W</mi><mi>H</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(WH)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mclose">)</span></span></span></span> × 数千回 × 画像の各位置 ―
とてもリアルタイムでは処理できません．</p>
<p>そこで登場するのが<strong>積分画像（Integral Image）</strong> ―
これはまさに2次元累積和のことです．
前処理として <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>W</mi><mi>H</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(WH)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mclose">)</span></span></span></span> で積分画像を構築しておけば，
任意の矩形領域の画素値合計が <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> で求まる．</p>
<p>累積和は『前処理への投資が後のクエリを高速化する』という考え方の典型です．
この発想があったからこそ，デジタルカメラのリアルタイム顔検出が実用化されたのです．」</p>
`,raw:"",frontmatter:js,filepath:"",start:987,id:26,no:27},__clicksContext:null,__preloaded:!1}),dp={},zs=_(dp),fp=A({get layout(){return zs.layout},get transition(){return zs.transition},get class(){return zs.class},get clicks(){return zs.clicks},get name(){return zs.name},get preload(){return zs.preload},slide:{content:"",revision:"qp510m",note:"",title:"前処理の考え方のまとめ",level:2,index:27,noteHTML:`<p>「今日学んだ手法を整理しましょう．</p>
<p>前処理のパターンとして，
素朴な方法は前処理なし，各クエリ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>．
累積和は前処理 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，各クエリ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>．
いもす法は前処理 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，各操作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>．
参考としてソート+二分探索は前処理 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N\\log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，各クエリ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(\\log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>．</p>
<p>前処理が有効になる条件は3つです．</p>
<p>1つ目．データが変化しない，または変化が少ないこと．
2つ目．同じデータに対して何度もクエリが来ること．
3つ目．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span></span></span></span> が大きいほど前処理の効果が大きいこと．</p>
<p>『怠惰な人ほど得をする』 ― 最初に頑張って準備すれば，あとは楽できる．
これが前処理の本質です．」</p>
`,raw:"",frontmatter:zs,filepath:"",start:1035,id:27,no:28},__clicksContext:null,__preloaded:!1}),yp={layout:"section-divider"},Hs=_(yp),wp=A({get layout(){return Hs.layout},get transition(){return Hs.transition},get class(){return Hs.class},get clicks(){return Hs.clicks},get name(){return Hs.name},get preload(){return Hs.preload},slide:{content:"",revision:"-p5h6uq",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 5",level:1,index:28,noteHTML:`<p>「最後にまとめと確認問題です．」</p>
`,raw:"",frontmatter:Hs,filepath:"",start:1082,id:28,no:29},__clicksContext:null,__preloaded:!1}),xp={layout:"summary"},Vs=_(xp),kp=A({get layout(){return Vs.layout},get transition(){return Vs.transition},get class(){return Vs.class},get clicks(){return Vs.clicks},get name(){return Vs.name},get preload(){return Vs.preload},slide:{content:"",revision:"-8hi0wm",frontmatterRaw:`layout: summary
`,note:"",title:"本日のまとめ",level:2,index:29,noteHTML:`<p>「今日のポイントを5つにまとめます．</p>
<p>1つ目．<strong>累積和:</strong> 前処理 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> で区間和を <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> で取得．公式は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[R+1] - S[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span>．</p>
<p>2つ目．<strong>いもす法:</strong> 差分配列 + 累積和で区間更新を <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> に．始点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>，終点の次 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>．</p>
<p>3つ目．<strong>2次元累積和:</strong> 包除原理で矩形領域の合計を <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> に．</p>
<p>4つ目．<strong>前処理の考え方:</strong> 一度手間をかけておくことで，何度も高速に回答．</p>
<p>5つ目．<strong>累積和とDPのつながり:</strong> ボトムアップで『前の値から次の値を計算する』共通構造．</p>
<p>教科書の対応箇所は第8章の8.1から8.4です．」</p>
`,raw:"",frontmatter:Vs,filepath:"",start:1094,id:29,no:30},__clicksContext:null,__preloaded:!1}),vp={layout:"question"},Qs=_(vp),bp=A({get layout(){return Qs.layout},get transition(){return Qs.transition},get class(){return Qs.class},get clicks(){return Qs.clicks},get name(){return Qs.name},get preload(){return Qs.preload},slide:{content:"",revision:"s3tk9g",frontmatterRaw:`layout: question
`,note:"",title:"確認問題 ①",level:2,index:30,noteHTML:`<p>「確認問題です．</p>
<p>累積和配列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>4</mn><mo separator="true">,</mo><mn>8</mn><mo separator="true">,</mo><mn>9</mn><mo separator="true">,</mo><mn>14</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S = [0, 3, 4, 8, 9, 14]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">14</span><span class="mclose">]</span></span></span></span> のとき，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[1] + A[2] + A[3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span></span></span></span> を求める式は？</p>
<p>選択肢は，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[3] - S[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[3] - S[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[4] - S[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[4] - S[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span>．</p>
<p>紙に公式を書いて確認してみてください．</p>
<p>……答えは4番の <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>9</mn><mo>−</mo><mn>3</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">S[4] - S[1] = 9 - 3 = 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span></strong> です．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo><mo>+</mo><mo>⋯</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mi>R</mi><mo stretchy="false">]</mo><mo>=</mo><mi>S</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[L] + \\cdots + A[R] = S[R+1] - S[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span> で，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>R</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">L=1, R=3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> ですから <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[4] - S[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">R+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> のところを間違えやすいので注意してください．」</p>
`,raw:"",frontmatter:Qs,filepath:"",start:1128,id:30,no:31},__clicksContext:null,__preloaded:!1}),Mp={layout:"question"},Fs=_(Mp),Sp=A({get layout(){return Fs.layout},get transition(){return Fs.transition},get class(){return Fs.class},get clicks(){return Fs.clicks},get name(){return Fs.name},get preload(){return Fs.preload},slide:{content:"",revision:"-1awg8d",frontmatterRaw:`layout: question
`,note:"",title:"確認問題 ②",level:2,index:31,noteHTML:`<p>「2問目です．</p>
<p>いもす法で区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[2, 5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> するとき，差分配列に行う操作は？</p>
<p>選択肢は，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>・<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>・<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span></span></span></span> すべてに <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>・<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>．</p>
<p>……答えは2番の <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></strong> です．</p>
<p>区間 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>L</mi><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[L, R]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span></span></span></span> への <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[R+1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>+</mo><mn>1</mn><mo>=</mo><mn>5</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">R+1 = 5+1 = 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span> なので <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> です．
1番の <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">D[5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span></span></span></span> に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> では位置5に +1 が反映されません．」</p>
`,raw:"",frontmatter:Fs,filepath:"",start:1172,id:31,no:32},__clicksContext:null,__preloaded:!1}),_p={layout:"question"},Bs=_(_p),Lp=A({get layout(){return Bs.layout},get transition(){return Bs.transition},get class(){return Bs.class},get clicks(){return Bs.clicks},get name(){return Bs.name},get preload(){return Bs.preload},slide:{content:"",revision:"-rvetd7",frontmatterRaw:`layout: question
`,note:"",title:"確認問題 ③",level:2,index:32,noteHTML:`<p>「最後の確認問題です．</p>
<p>配列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>（長さ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>）に対して <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span></span></span></span> 回の区間和クエリを処理するとき，累積和を使った場合の全体の計算量は？</p>
<p>選択肢は，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(NQ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal">NQ</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N + Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span>．</p>
<p>……答えは3番の <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N + Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span></strong> です．</p>
<p>前処理（累積和配列の構築）に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>．
各クエリが <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> なので <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span></span></span></span> 回で <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span>．
合計 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N + Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span>．</p>
<p>4番の <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mclose">)</span></span></span></span> を選んだ人もいるかもしれませんが，
前処理の <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> を忘れてはいけません．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>+</mo><mi>Q</mi></mrow><annotation encoding="application/x-tex">N + Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span></span></span></span> がこの問題の正確な答えです．」</p>
`,raw:"",frontmatter:Bs,filepath:"",start:1219,id:32,no:33},__clicksContext:null,__preloaded:!1}),Ap={},qs=_(Ap),Op=A({get layout(){return qs.layout},get transition(){return qs.transition},get class(){return qs.class},get clicks(){return qs.clicks},get name(){return qs.name},get preload(){return qs.preload},slide:{content:"",revision:"3zsnyt",note:"",title:"次回予告",level:2,index:33,noteHTML:`<p>「来週からグラフ理論に入ります．</p>
<p>みなさん，SNSの友達関係って，数学的にはどう表現できると思いますか？
鉄道の路線図は？Webのリンク構造は？</p>
<p>実はこれらすべて，<strong>グラフ</strong>という1つの数学的構造で統一的に表現できます．</p>
<p>頂点と辺 ― たったこれだけの道具で，
世界のあらゆる『つながり』をモデル化できる．</p>
<p>次回は迷路の解き方も学びます．
迷路もグラフなのです．</p>
<p>教科書の第9章前半に目を通しておいてください．</p>
<p>小テストは授業後にMicrosoft Formsで配信します．
累積和の公式 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">[</mo><mi>R</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mi>S</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">S[R+1] - S[L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span> は必ず覚えてきてください．
それでは今日はここまで．ありがとうございました．」</p>
`,raw:"",frontmatter:qs,filepath:"",start:1267,id:33,no:34},__clicksContext:null,__preloaded:!1}),E=new Array(34),$=(a,s)=>nm({loader:s,delay:300,loadingComponent:ul,errorComponent:O,onError:n=>console.error("Failed to load slide "+(a+1),n)}),lt=async()=>{try{return E[0]??=await S(()=>import("./md-CunmSa_v.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},pt=async()=>{try{return E[1]??=await S(()=>import("./md-C_doIEiy.js"),__vite__mapDeps([5,1,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},rt=async()=>{try{return E[2]??=await S(()=>import("./md-BY2HATpL.js"),__vite__mapDeps([6,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},ot=async()=>{try{return E[3]??=await S(()=>import("./md-BY599WOe.js"),__vite__mapDeps([8,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},it=async()=>{try{return E[4]??=await S(()=>import("./md-B2A5s67a.js"),__vite__mapDeps([10,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},ct=async()=>{try{return E[5]??=await S(()=>import("./md-CJX0qlpU.js"),__vite__mapDeps([11,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},ht=async()=>{try{return E[6]??=await S(()=>import("./md-eGks6WfY.js"),__vite__mapDeps([12,1,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},gt=async()=>{try{return E[7]??=await S(()=>import("./md-DE-fd107.js"),__vite__mapDeps([13,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},ut=async()=>{try{return E[8]??=await S(()=>import("./md-CzyBmIkH.js"),__vite__mapDeps([14,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},dt=async()=>{try{return E[9]??=await S(()=>import("./md-CsQAaj6h.js"),__vite__mapDeps([15,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},ft=async()=>{try{return E[10]??=await S(()=>import("./md-PI3IrN3s.js"),__vite__mapDeps([16,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},yt=async()=>{try{return E[11]??=await S(()=>import("./md-BbDZg9z4.js"),__vite__mapDeps([17,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},wt=async()=>{try{return E[12]??=await S(()=>import("./md-3cYcuKpp.js"),__vite__mapDeps([18,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},xt=async()=>{try{return E[13]??=await S(()=>import("./slidev/md-CEEO0_go.js"),__vite__mapDeps([19,20,1,2,7,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},kt=async()=>{try{return E[14]??=await S(()=>import("./md-iLPMkmTO.js"),__vite__mapDeps([21,22,1,2,23,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},vt=async()=>{try{return E[15]??=await S(()=>import("./md-BxUuts9y.js"),__vite__mapDeps([24,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},bt=async()=>{try{return E[16]??=await S(()=>import("./md-BrEQaoCR.js"),__vite__mapDeps([25,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Mt=async()=>{try{return E[17]??=await S(()=>import("./md-CaNKrM27.js"),__vite__mapDeps([26,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},St=async()=>{try{return E[18]??=await S(()=>import("./md-DjfUlRJz.js"),__vite__mapDeps([27,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},_t=async()=>{try{return E[19]??=await S(()=>import("./md-lixgDMPl.js"),__vite__mapDeps([28,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Lt=async()=>{try{return E[20]??=await S(()=>import("./md-B7Aa1XlW.js"),__vite__mapDeps([29,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},At=async()=>{try{return E[21]??=await S(()=>import("./md-DTaqayL8.js"),__vite__mapDeps([30,22,1,2,23,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Ot=async()=>{try{return E[22]??=await S(()=>import("./md-BtAfbfVY.js"),__vite__mapDeps([31,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},$t=async()=>{try{return E[23]??=await S(()=>import("./md-8xYRBFqq.js"),__vite__mapDeps([32,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Et=async()=>{try{return E[24]??=await S(()=>import("./md-CP07h2oG.js"),__vite__mapDeps([33,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Dt=async()=>{try{return E[25]??=await S(()=>import("./md-BVubcHoJ.js"),__vite__mapDeps([34,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Tt=async()=>{try{return E[26]??=await S(()=>import("./md-DOx5Cos_.js"),__vite__mapDeps([35,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Pt=async()=>{try{return E[27]??=await S(()=>import("./md-Cz79BGpS.js"),__vite__mapDeps([36,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Ct=async()=>{try{return E[28]??=await S(()=>import("./md-Bkof0wK1.js"),__vite__mapDeps([37,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Nt=async()=>{try{return E[29]??=await S(()=>import("./md-5rveNKx4.js"),__vite__mapDeps([38,1,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Rt=async()=>{try{return E[30]??=await S(()=>import("./md-xKDRh4Qj.js"),__vite__mapDeps([39,1,40,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},It=async()=>{try{return E[31]??=await S(()=>import("./md-CFaVEr55.js"),__vite__mapDeps([41,1,40,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},jt=async()=>{try{return E[32]??=await S(()=>import("./md-Bd7CjY9n.js"),__vite__mapDeps([42,1,40,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},zt=async()=>{try{return E[33]??=await S(()=>import("./md-BiMUwQxN.js"),__vite__mapDeps([43,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},$p=[{no:1,meta:fl,load:lt,component:$(0,lt)},{no:2,meta:wl,load:pt,component:$(1,pt)},{no:3,meta:kl,load:rt,component:$(2,rt)},{no:4,meta:bl,load:ot,component:$(3,ot)},{no:5,meta:Sl,load:it,component:$(4,it)},{no:6,meta:Ll,load:ct,component:$(5,ct)},{no:7,meta:Ol,load:ht,component:$(6,ht)},{no:8,meta:El,load:gt,component:$(7,gt)},{no:9,meta:Tl,load:ut,component:$(8,ut)},{no:10,meta:Cl,load:dt,component:$(9,dt)},{no:11,meta:Rl,load:ft,component:$(10,ft)},{no:12,meta:jl,load:yt,component:$(11,yt)},{no:13,meta:Hl,load:wt,component:$(12,wt)},{no:14,meta:Ql,load:xt,component:$(13,xt)},{no:15,meta:Bl,load:kt,component:$(14,kt)},{no:16,meta:Wl,load:vt,component:$(15,vt)},{no:17,meta:Jl,load:bt,component:$(16,bt)},{no:18,meta:Gl,load:Mt,component:$(17,Mt)},{no:19,meta:Yl,load:St,component:$(18,St)},{no:20,meta:sp,load:_t,component:$(19,_t)},{no:21,meta:np,load:Lt,component:$(20,Lt)},{no:22,meta:ep,load:At,component:$(21,At)},{no:23,meta:lp,load:Ot,component:$(22,Ot)},{no:24,meta:rp,load:$t,component:$(23,$t)},{no:25,meta:ip,load:Et,component:$(24,Et)},{no:26,meta:hp,load:Dt,component:$(25,Dt)},{no:27,meta:up,load:Tt,component:$(26,Tt)},{no:28,meta:fp,load:Pt,component:$(27,Pt)},{no:29,meta:wp,load:Ct,component:$(28,Ct)},{no:30,meta:kp,load:Nt,component:$(29,Nt)},{no:31,meta:bp,load:Rt,component:$(30,Rt)},{no:32,meta:Sp,load:It,component:$(31,It)},{no:33,meta:Lp,load:jt,component:$(32,jt)},{no:34,meta:Op,load:zt,component:$(33,zt)}],ts=Cn($p);function zo(a){if(typeof a=="number")return{seconds:a,relative:!1};const s=a.startsWith("+");s&&(a=a.slice(1));let n=0;if(a.includes(":")){const t=a.split(":").map(Number);let e=0,m=0,l=0;if(t.length===3)e=t[0],m=t[1],l=t[2];else if(t.length===2)m=t[0],l=t[1];else if(t.length===1)l=t[0];else throw new TypeError("Invalid timestamp format");if(Number.isNaN(e)||Number.isNaN(m)||Number.isNaN(l))throw new TypeError("Invalid timestamp format");n=(e||0)*3600+(m||0)*60+(l||0)}else if(!a.match(/[a-z]/i))n=Number(a);else{const t={s:1,sec:1,secs:1,m:60,min:60,mins:60,h:3600,hr:3600,hrs:3600,hour:3600,hours:3600,day:86400,days:86400,week:604800,weeks:604800,month:2629746,months:2629746,year:31556952,years:31556952},e=/([\d.]+)([a-z]+)/gi,m=a.matchAll(e);if(m)for(const p of m){const r=Number(p[1]);if(Number.isNaN(r))throw new TypeError(`Invalid timestamp value: ${p[1]}`);const o=p[2].toLowerCase();if(!(o in t))throw new TypeError(`Invalid timestamp unit: ${o}`);n+=r*t[o]}const l=a.replace(e,"").trim();if(l)throw new TypeError(`Unknown timestamp remaining: ${l}`)}return{seconds:n,relative:s}}function de(a,s){if(!s||s==="all"||s==="*")return Yn(1,a+1);if(s==="none")return[];const n=[];for(const t of s.split(/[,;]/g))if(!t.includes("-"))n.push(+t);else{const[e,m]=t.split("-",2);n.push(...Yn(+e,m?+m+1:a+1))}return Om(n).filter(t=>t<=a).sort((t,e)=>t-e)}const Ka="$$slidev-clicks-context",Nn="$$slidev-page",fe="$$slidev-slide-element",Ep="$$slidev-slide-scale",Dp="$$slidev-context",Ho="$$slidev-route",Rn="$$slidev-render-context",Tp="$$slidev-fontmatter",Pp="$$slidev-slide-zoom",Ea="slidev-vclick-target",ia="slidev-vclick-hidden",ca="slidev-vclick-fade",mn="slidev-vclick-hidden-explicitly",ln="slidev-vclick-current",pn="slidev-vclick-prior",Da=999999,Cp=["localhost","127.0.0.1"],Np=["clicks","clicksStart","disabled","hide","hideInToc","layout","level","preload","routeAlias","src","title","transition","zoom","dragPos","lang"],Vo=[...Np,"theme","titleTemplate","info","author","keywords","presenter","browserExporter","download","exportFilename","export","highlighter","lineNumbers","monaco","monacoTypesSource","monacoTypesAdditionalPackages","monacoRunAdditionalDeps","monacoRunUseStrict","remoteAssets","selectable","record","colorSchema","routerMode","aspectRatio","canvasWidth","themeConfig","favicon","plantUmlServer","fonts","defaults","drawings","htmlAttrs","mdc","contextMenu","wakeLock","seoMeta","notesAutoRuby","magicMoveDuration","preloadImages"];function Rp(a,s,{mode:n="replace"}={}){const t=Ua();return v({get(){const e=t.currentRoute.value.query[a];return e==null?s:Array.isArray(e)?e.filter(Boolean):e},set(e){tm(()=>{(t.currentRoute.value.query[a]??s?.toString())!==e.toString()&&t[em(n)]({query:{...t.currentRoute.value.query,[a]:`${e}`===s?void 0:e}})})}})}function Ga(a){return ts.value.find(s=>s.no===+a||s.meta.slide?.frontmatter.routeAlias===a)}function aa(a,s,n=!1){(typeof a=="number"||typeof a=="string")&&(a=Ga(a));const t=a.meta.slide?.frontmatter.routeAlias??a.no;return n?`/export/${t}`:s?`/presenter/${t}`:`/${t}`}const Ip={"slide-left":"slide-left | slide-right","slide-right":"slide-right | slide-left","slide-up":"slide-up | slide-down","slide-down":"slide-down | slide-up"};function jp(a,s=!1){if(!a||(typeof a=="string"&&(a={name:a}),!a.name))return;let n=a.name.includes("|")?a.name:Ip[a.name]||a.name;if(n.includes("|")){const[t,e]=n.split("|").map(m=>m.trim());n=s?e:t}if(n)return{...a,name:n}}function zp(a,s,n){let t=a>0?n?.meta?.transition:s?.meta?.transition;return t||(t=I.transition||void 0),jp(t,a<0)}const Qo=D(!1),Fo=D(!1),Bo=D(!1),Hp=D(!1),In=D(!1),qo=D(!1),Wo=D(!0),Vp=_(new Set),Uo=v(()=>Vp.size>0),Jo=pm({xs:460,...om}),za=im(),Ko=mm(),Go=v(()=>za.height.value-za.width.value/pe.value>120),Zo=lm(Ja?document.body:null),ye=rm(),Yo=v(()=>["INPUT","TEXTAREA"].includes(ye.value?.tagName||"")),Xo=v(()=>["BUTTON","A"].includes(ye.value?.tagName||""));B("slidev-camera","default",{listenToStorageChanges:!1});B("slidev-mic","default",{listenToStorageChanges:!1});const Qp=B("slidev-scale",0),si=B("slidev-wake-lock",!0),ai=B("slidev-hide-cursor-idle",!0);B("slidev-skip-export-pdf-tip",!1);B("slidev-export-capture-delay",400,{listenToStorageChanges:!1});const ni=B("slidev-presenter-cursor",!0,{listenToStorageChanges:!1}),Fp=B("slidev-show-editor",!1,{listenToStorageChanges:!1}),Bp=B("slidev-editor-vertical",!1,{listenToStorageChanges:!1}),qp=B("slidev-editor-width",Ja?window.innerWidth*.4:318,{listenToStorageChanges:!1}),Wp=B("slidev-editor-height",Ja?window.innerHeight*.4:300,{listenToStorageChanges:!1}),ba=Cn(null),Ha=B("slidev-presenter-font-size",1,{listenToStorageChanges:!1}),Ma=B("slidev-presenter-layout",1,{listenToStorageChanges:!1}),Mn={invert:!1,contrast:1,brightness:1,hueRotate:0,saturate:1,sepia:0},Up=B("slidev-viewer-css-filter",Mn,{listenToStorageChanges:!1,mergeDefaults:!0,deep:!0}),ti=v(()=>Object.keys(Mn).some(a=>Up.value[a]!==Mn[a]));function ei(){Ma.value=Ma.value+1,Ma.value>3&&(Ma.value=1)}function mi(){Ha.value=Math.min(2,Ha.value+.1)}function li(){Ha.value=Math.max(.5,Ha.value-.1)}const pi=ee(Hp),Sa=B("slidev-sync-directions",{viewerSend:!0,viewerReceive:!0,presenterSend:!0,presenterReceive:!0},{listenToStorageChanges:!1,mergeDefaults:!0});function we(a,s,n=1){const t=s.meta.slide.level??n;t&&t>n&&a.length>0?we(a[a.length-1].children,s,n+1):a.push({no:s.no,children:[],level:n,titleLevel:t,path:aa(s.meta.slide?.frontmatter?.routeAlias??s.no,!1),hideInToc:!!s.meta?.slide?.frontmatter?.hideInToc,title:s.meta?.slide?.title})}function xe(a,s,n=!1,t,e){return a.map(m=>{const l={...m,active:m.no===e?.value,hasActiveParent:n};return l.children.length>0&&(l.children=xe(l.children,s,l.active||l.hasActiveParent,l,e)),t&&(l.active||l.activeParent)&&(t.activeParent=!0),l})}function ke(a,s=1){return a.filter(n=>!n.hideInToc).map(n=>({...n,children:ke(n.children,s+1)}))}function Jp(a,s,n){const t=v(()=>a.value.filter(m=>m.meta?.slide?.title).reduce((m,l)=>(we(m,l),m),[])),e=v(()=>xe(t.value,n.value,void 0,void 0,s));return v(()=>ke(e.value))}function Kp(a,s,n=D(0),t,e,m){const l=v(()=>ts.value.length),p=D(0),r=D(0),o=v(()=>aa(a.value,t.value)),c=v(()=>a.value.no),g=v(()=>a.value.meta?.layout||(c.value===1?"cover":"default")),h=v(()=>s.value.current),i=v(()=>s.value.clicksStart),d=v(()=>s.value.total),u=v(()=>ts.value[Math.min(ts.value.length,c.value+1)-1]),f=v(()=>ts.value[Math.max(1,c.value-1)-1]),y=v(()=>c.value<ts.value.length||h.value<d.value),w=v(()=>c.value>1||h.value>0),x=v(()=>e.value?void 0:zp(p.value,a.value,f.value));ss(a,(z,N)=>{p.value=z.no-N.no});async function k(z){return!1}const b=Jp(ts,c,a);async function T(){r.value=1,d.value<=n.value?await V():n.value+=1}async function C(){r.value=-1,n.value<=i.value?await W(!0):n.value-=1}async function V(z=!1){r.value=1,c.value<ts.value.length&&await L(c.value+1,z&&!e.value?Da:void 0)}async function W(z=!1){r.value=-1,c.value>1&&await L(c.value-1,z&&!e.value?Da:void 0)}function rs(){return L(1)}function Y(){return L(l.value)}async function L(z,N=0,ls=!1){In.value=!1;const os=c.value!==z,ra=N!==n.value,K=Ga(z)?.meta,j=K?.slide?.frontmatter.clicksStart??0;N=xn(N,j,K?.__clicksContext?.total??Da),(ls||os||ra)&&await m?.push({path:aa(z,t.value,m.currentRoute.value.name==="export"),query:{...m.currentRoute.value.query,clicks:N===0?void 0:N.toString(),embedded:location.search.includes("embedded")?"true":void 0}})}function P(){m?.push({path:aa(c.value,!0),query:{...m.currentRoute.value.query}})}function Q(){m?.push({path:aa(c.value,!1),query:{...m.currentRoute.value.query}})}return{slides:ts,total:l,currentPath:o,currentSlideNo:c,currentPage:c,currentSlideRoute:a,currentLayout:g,currentTransition:x,clicksDirection:r,nextRoute:u,prevRoute:f,clicksContext:s,clicks:h,clicksStart:i,clicksTotal:d,hasNext:y,hasPrev:w,tocTree:b,navDirection:p,openInEditor:k,next:T,prev:C,go:L,goLast:Y,goFirst:rs,nextSlide:V,prevSlide:W,enterPresenter:P,exitPresenter:Q}}const Gp=me(()=>{const a=Ua(),s=cm(),n=v(()=>(a?.currentRoute?.value?.query,new URLSearchParams(location.search))),t=v(()=>n.value.has("print")||s.name==="export"),e=D(n.value.get("print")==="clicks"),m=v(()=>n.value.has("embedded")),l=v(()=>s.name==="play"),p=v(()=>s.name==="presenter"),r=v(()=>s.name==="notes"),o=v(()=>!p.value&&(!I.remote||n.value.get("password")===I.remote)),c=v(()=>!!s.params.no),g=v(()=>c.value?Ga(s.params.no)?.no??1:1),h=v(()=>ts.value[g.value-1]),i=D(de(ts.value.length,s?.query?.range)),d=Rp("clicks","0"),u=v(()=>y(h.value)),f=v({get(){let w=+(d.value||0);return Number.isNaN(w)&&(w=0),w},set(w){In.value=!1,d.value=w.toString()}});function y(w){if(w?.meta?.__clicksContext)return w.meta.__clicksContext;const x=w.no,k=ue(v({get(){return g.value===x?Math.max(+(d.value??0),k.clicksStart):g.value>x?Da:k.clicksStart},set(b){g.value===x&&(d.value=b.toString())}}),w?.meta.slide?.frontmatter.clicksStart??0,w?.meta.clicks);return w?.meta&&(w.meta.__clicksContext=k),k}return{router:a,currentRoute:v(()=>s),isPrintMode:t,isPrintWithClicks:e,isEmbedded:m,isPlaying:l,isPresenter:p,isNotesViewer:r,isPresenterAvailable:o,hasPrimarySlide:c,currentSlideNo:g,currentSlideRoute:h,clicksContext:u,queryClicksRaw:d,queryClicks:f,printRange:i,getPrimaryClicks:y}}),pa=me(()=>{const a=Gp(),s=Ua(),n=Kp(a.currentSlideRoute,a.clicksContext,a.queryClicks,a.isPresenter,a.isPrintMode,s);return ss([n.total,a.currentRoute],async()=>{const t=a.currentRoute.value.params.no;a.hasPrimarySlide.value&&!Ga(t)&&(t&&t!=="index.html"?await n.go(n.total.value,0,!0):await n.go(1,0,!0))},{flush:"pre",immediate:!0}),{...n,...a}}),Ht=hm(),rn=B("slidev-color-schema","auto"),Vt=v(()=>I.colorSchema!=="auto"),ve=v({get(){return Vt.value?I.colorSchema==="dark":rn.value==="auto"?Ht.value:rn.value==="dark"},set(a){Vt.value||(rn.value=a===Ht.value?"auto":a?"dark":"light")}}),ri=ee(ve);if(Ja){const a="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";ss(ve,s=>{const n=window.document.createElement("style");n.appendChild(document.createTextNode(a)),window.document.head.appendChild(n);const t=document.querySelector("html");t.classList.toggle("dark",s),t.classList.toggle("light",!s),window.getComputedStyle(n).opacity,document.head.removeChild(n)},{immediate:!0})}function Zp(){const{isPrintMode:a}=pa();gm(v(()=>a.value?`
@page {
  size: ${re.value}px ${Dm.value}px;
  margin: 0px;
}

* {
  transition: none !important;
  transition-duration: 0s !important;
}`:""))}const jn=Symbol.for("yaml.alias"),Yp=Symbol.for("yaml.document"),Ks=Symbol.for("yaml.map"),be=Symbol.for("yaml.pair"),zn=Symbol.for("yaml.scalar"),xa=Symbol.for("yaml.seq"),ms=Symbol.for("yaml.node.type"),Gs=a=>!!a&&typeof a=="object"&&a[ms]===jn,Za=a=>!!a&&typeof a=="object"&&a[ms]===Yp,Me=a=>!!a&&typeof a=="object"&&a[ms]===Ks,F=a=>!!a&&typeof a=="object"&&a[ms]===be,H=a=>!!a&&typeof a=="object"&&a[ms]===zn,Hn=a=>!!a&&typeof a=="object"&&a[ms]===xa;function Z(a){if(a&&typeof a=="object")switch(a[ms]){case Ks:case xa:return!0}return!1}function q(a){if(a&&typeof a=="object")switch(a[ms]){case jn:case Ks:case zn:case xa:return!0}return!1}const Se=a=>(H(a)||Z(a))&&!!a.anchor,Ws=Symbol("break visit"),Xp=Symbol("skip children"),da=Symbol("remove node");function Ya(a,s){const n=sr(s);Za(a)?na(null,a.contents,n,Object.freeze([a]))===da&&(a.contents=null):na(null,a,n,Object.freeze([]))}Ya.BREAK=Ws;Ya.SKIP=Xp;Ya.REMOVE=da;function na(a,s,n,t){const e=ar(a,s,n,t);if(q(e)||F(e))return nr(a,t,e),na(a,e,n,t);if(typeof e!="symbol"){if(Z(s)){t=Object.freeze(t.concat(s));for(let m=0;m<s.items.length;++m){const l=na(m,s.items[m],n,t);if(typeof l=="number")m=l-1;else{if(l===Ws)return Ws;l===da&&(s.items.splice(m,1),m-=1)}}}else if(F(s)){t=Object.freeze(t.concat(s));const m=na("key",s.key,n,t);if(m===Ws)return Ws;m===da&&(s.key=null);const l=na("value",s.value,n,t);if(l===Ws)return Ws;l===da&&(s.value=null)}}return e}function sr(a){return typeof a=="object"&&(a.Collection||a.Node||a.Value)?Object.assign({Alias:a.Node,Map:a.Node,Scalar:a.Node,Seq:a.Node},a.Value&&{Map:a.Value,Scalar:a.Value,Seq:a.Value},a.Collection&&{Map:a.Collection,Seq:a.Collection},a):a}function ar(a,s,n,t){if(typeof n=="function")return n(a,s,t);if(Me(s))return n.Map?.(a,s,t);if(Hn(s))return n.Seq?.(a,s,t);if(F(s))return n.Pair?.(a,s,t);if(H(s))return n.Scalar?.(a,s,t);if(Gs(s))return n.Alias?.(a,s,t)}function nr(a,s,n){const t=s[s.length-1];if(Z(t))t.items[a]=n;else if(F(t))a==="key"?t.key=n:t.value=n;else if(Za(t))t.contents=n;else{const e=Gs(t)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}}function _e(a){if(/[\x00-\x19\s,[\]{}]/.test(a)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(a)}`;throw new Error(n)}return!0}function ua(a,s,n,t){if(t&&typeof t=="object")if(Array.isArray(t))for(let e=0,m=t.length;e<m;++e){const l=t[e],p=ua(a,t,String(e),l);p===void 0?delete t[e]:p!==l&&(t[e]=p)}else if(t instanceof Map)for(const e of Array.from(t.keys())){const m=t.get(e),l=ua(a,t,e,m);l===void 0?t.delete(e):l!==m&&t.set(e,l)}else if(t instanceof Set)for(const e of Array.from(t)){const m=ua(a,t,e,e);m===void 0?t.delete(e):m!==e&&(t.delete(e),t.add(m))}else for(const[e,m]of Object.entries(t)){const l=ua(a,t,e,m);l===void 0?delete t[e]:l!==m&&(t[e]=l)}return a.call(s,n,t)}function es(a,s,n){if(Array.isArray(a))return a.map((t,e)=>es(t,String(e),n));if(a&&typeof a.toJSON=="function"){if(!n||!Se(a))return a.toJSON(s,n);const t={aliasCount:0,count:1,res:void 0};n.anchors.set(a,t),n.onCreate=m=>{t.res=m,delete n.onCreate};const e=a.toJSON(s,n);return n.onCreate&&n.onCreate(e),e}return typeof a=="bigint"&&!n?.keep?Number(a):a}class Vn{constructor(s){Object.defineProperty(this,ms,{value:s})}clone(){const s=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(s.range=this.range.slice()),s}toJS(s,{mapAsMap:n,maxAliasCount:t,onAnchor:e,reviver:m}={}){if(!Za(s))throw new TypeError("A document argument is required");const l={anchors:new Map,doc:s,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof t=="number"?t:100},p=es(this,"",l);if(typeof e=="function")for(const{count:r,res:o}of l.anchors.values())e(o,r);return typeof m=="function"?ua(m,{"":p},"",p):p}}class tr extends Vn{constructor(s){super(jn),this.source=s,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(s,n){let t;n?.aliasResolveCache?t=n.aliasResolveCache:(t=[],Ya(s,{Node:(m,l)=>{(Gs(l)||Se(l))&&t.push(l)}}),n&&(n.aliasResolveCache=t));let e;for(const m of t){if(m===this)break;m.anchor===this.source&&(e=m)}return e}toJSON(s,n){if(!n)return{source:this.source};const{anchors:t,doc:e,maxAliasCount:m}=n,l=this.resolve(e,n);if(!l){const r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(r)}let p=t.get(l);if(p||(es(l,null,n),p=t.get(l)),p?.res===void 0){const r="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(r)}if(m>=0&&(p.count+=1,p.aliasCount===0&&(p.aliasCount=Ta(e,l,t)),p.count*p.aliasCount>m)){const r="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(r)}return p.res}toString(s,n,t){const e=`*${this.source}`;if(s){if(_e(this.source),s.options.verifyAliasOrder&&!s.anchors.has(this.source)){const m=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(m)}if(s.implicitKey)return`${e} `}return e}}function Ta(a,s,n){if(Gs(s)){const t=s.resolve(a),e=n&&t&&n.get(t);return e?e.count*e.aliasCount:0}else if(Z(s)){let t=0;for(const e of s.items){const m=Ta(a,e,n);m>t&&(t=m)}return t}else if(F(s)){const t=Ta(a,s.key,n),e=Ta(a,s.value,n);return Math.max(t,e)}return 1}const Le=a=>!a||typeof a!="function"&&typeof a!="object";class R extends Vn{constructor(s){super(zn),this.value=s}toJSON(s,n){return n?.keep?this.value:es(this.value,s,n)}toString(){return String(this.value)}}R.BLOCK_FOLDED="BLOCK_FOLDED";R.BLOCK_LITERAL="BLOCK_LITERAL";R.PLAIN="PLAIN";R.QUOTE_DOUBLE="QUOTE_DOUBLE";R.QUOTE_SINGLE="QUOTE_SINGLE";function er(a,s,n){return n.find(t=>t.identify?.(a)&&!t.format)}function Va(a,s,n){if(Za(a)&&(a=a.contents),q(a))return a;if(F(a)){const g=n.schema[Ks].createNode?.(n.schema,null,n);return g.items.push(a),g}(a instanceof String||a instanceof Number||a instanceof Boolean||typeof BigInt<"u"&&a instanceof BigInt)&&(a=a.valueOf());const{aliasDuplicateObjects:t,onAnchor:e,onTagObj:m,schema:l,sourceObjects:p}=n;let r;if(t&&a&&typeof a=="object"){if(r=p.get(a),r)return r.anchor??(r.anchor=e(a)),new tr(r.anchor);r={anchor:null,node:null},p.set(a,r)}let o=er(a,s,l.tags);if(!o){if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),!a||typeof a!="object"){const g=new R(a);return r&&(r.node=g),g}o=a instanceof Map?l[Ks]:Symbol.iterator in Object(a)?l[xa]:l[Ks]}m&&(m(o),delete n.onTagObj);const c=o?.createNode?o.createNode(n.schema,a,n):typeof o?.nodeClass?.from=="function"?o.nodeClass.from(n.schema,a,n):new R(a);return o.default||(c.tag=o.tag),r&&(r.node=c),c}function Qt(a,s,n){let t=n;for(let e=s.length-1;e>=0;--e){const m=s[e];if(typeof m=="number"&&Number.isInteger(m)&&m>=0){const l=[];l[m]=t,t=l}else t=new Map([[m,t]])}return Va(t,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:a,sourceObjects:new Map})}const mr=a=>a==null||typeof a=="object"&&!!a[Symbol.iterator]().next().done;class Ae extends Vn{constructor(s,n){super(s),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(s){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return s&&(n.schema=s),n.items=n.items.map(t=>q(t)||F(t)?t.clone(s):t),this.range&&(n.range=this.range.slice()),n}addIn(s,n){if(mr(s))this.add(n);else{const[t,...e]=s,m=this.get(t,!0);if(Z(m))m.addIn(e,n);else if(m===void 0&&this.schema)this.set(t,Qt(this.schema,e,n));else throw new Error(`Expected YAML collection at ${t}. Remaining path: ${e}`)}}deleteIn(s){const[n,...t]=s;if(t.length===0)return this.delete(n);const e=this.get(n,!0);if(Z(e))return e.deleteIn(t);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${t}`)}getIn(s,n){const[t,...e]=s,m=this.get(t,!0);return e.length===0?!n&&H(m)?m.value:m:Z(m)?m.getIn(e,n):void 0}hasAllNullValues(s){return this.items.every(n=>{if(!F(n))return!1;const t=n.value;return t==null||s&&H(t)&&t.value==null&&!t.commentBefore&&!t.comment&&!t.tag})}hasIn(s){const[n,...t]=s;if(t.length===0)return this.has(n);const e=this.get(n,!0);return Z(e)?e.hasIn(t):!1}setIn(s,n){const[t,...e]=s;if(e.length===0)this.set(t,n);else{const m=this.get(t,!0);if(Z(m))m.setIn(e,n);else if(m===void 0&&this.schema)this.set(t,Qt(this.schema,e,n));else throw new Error(`Expected YAML collection at ${t}. Remaining path: ${e}`)}}}const lr=a=>a.replace(/^(?!$)(?: $)?/gm,"#");function wa(a,s){return/^\n+$/.test(a)?a.substring(1):s?a.replace(/^(?! *$)/gm,s):a}const ta=(a,s,n)=>a.endsWith(`
`)?wa(n,s):n.includes(`
`)?`
`+wa(n,s):(a.endsWith(" ")?"":" ")+n,Oe="flow",Sn="block",Pa="quoted";function Xa(a,s,n="flow",{indentAtStart:t,lineWidth:e=80,minContentWidth:m=20,onFold:l,onOverflow:p}={}){if(!e||e<0)return a;e<m&&(m=0);const r=Math.max(1+m,1+e-s.length);if(a.length<=r)return a;const o=[],c={};let g=e-s.length;typeof t=="number"&&(t>e-Math.max(2,m)?o.push(0):g=e-t);let h,i,d=!1,u=-1,f=-1,y=-1;n===Sn&&(u=Ft(a,u,s.length),u!==-1&&(g=u+r));for(let x;x=a[u+=1];){if(n===Pa&&x==="\\"){switch(f=u,a[u+1]){case"x":u+=3;break;case"u":u+=5;break;case"U":u+=9;break;default:u+=1}y=u}if(x===`
`)n===Sn&&(u=Ft(a,u,s.length)),g=u+s.length+r,h=void 0;else{if(x===" "&&i&&i!==" "&&i!==`
`&&i!=="	"){const k=a[u+1];k&&k!==" "&&k!==`
`&&k!=="	"&&(h=u)}if(u>=g)if(h)o.push(h),g=h+r,h=void 0;else if(n===Pa){for(;i===" "||i==="	";)i=x,x=a[u+=1],d=!0;const k=u>y+1?u-2:f-1;if(c[k])return a;o.push(k),c[k]=!0,g=k+r,h=void 0}else d=!0}i=x}if(d&&p&&p(),o.length===0)return a;l&&l();let w=a.slice(0,o[0]);for(let x=0;x<o.length;++x){const k=o[x],b=o[x+1]||a.length;k===0?w=`
${s}${a.slice(0,b)}`:(n===Pa&&c[k]&&(w+=`${a[k]}\\`),w+=`
${s}${a.slice(k+1,b)}`)}return w}function Ft(a,s,n){let t=s,e=s+1,m=a[e];for(;m===" "||m==="	";)if(s<e+n)m=a[++s];else{do m=a[++s];while(m&&m!==`
`);t=s,e=s+1,m=a[e]}return t}const sn=(a,s)=>({indentAtStart:s?a.indent.length:a.indentAtStart,lineWidth:a.options.lineWidth,minContentWidth:a.options.minContentWidth}),an=a=>/^(%|---|\.\.\.)/m.test(a);function pr(a,s,n){if(!s||s<0)return!1;const t=s-n,e=a.length;if(e<=t)return!1;for(let m=0,l=0;m<e;++m)if(a[m]===`
`){if(m-l>t)return!0;if(l=m+1,e-l<=t)return!1}return!0}function fa(a,s){const n=JSON.stringify(a);if(s.options.doubleQuotedAsJSON)return n;const{implicitKey:t}=s,e=s.options.doubleQuotedMinMultiLineLength,m=s.indent||(an(a)?"  ":"");let l="",p=0;for(let r=0,o=n[r];o;o=n[++r])if(o===" "&&n[r+1]==="\\"&&n[r+2]==="n"&&(l+=n.slice(p,r)+"\\ ",r+=1,p=r,o="\\"),o==="\\")switch(n[r+1]){case"u":{l+=n.slice(p,r);const c=n.substr(r+2,4);switch(c){case"0000":l+="\\0";break;case"0007":l+="\\a";break;case"000b":l+="\\v";break;case"001b":l+="\\e";break;case"0085":l+="\\N";break;case"00a0":l+="\\_";break;case"2028":l+="\\L";break;case"2029":l+="\\P";break;default:c.substr(0,2)==="00"?l+="\\x"+c.substr(2):l+=n.substr(r,6)}r+=5,p=r+1}break;case"n":if(t||n[r+2]==='"'||n.length<e)r+=1;else{for(l+=n.slice(p,r)+`

`;n[r+2]==="\\"&&n[r+3]==="n"&&n[r+4]!=='"';)l+=`
`,r+=2;l+=m,n[r+2]===" "&&(l+="\\"),r+=1,p=r+1}break;default:r+=1}return l=p?l+n.slice(p):n,t?l:Xa(l,m,Pa,sn(s,!1))}function _n(a,s){if(s.options.singleQuote===!1||s.implicitKey&&a.includes(`
`)||/[ \t]\n|\n[ \t]/.test(a))return fa(a,s);const n=s.indent||(an(a)?"  ":""),t="'"+a.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return s.implicitKey?t:Xa(t,n,Oe,sn(s,!1))}function ea(a,s){const{singleQuote:n}=s.options;let t;if(n===!1)t=fa;else{const e=a.includes('"'),m=a.includes("'");e&&!m?t=_n:m&&!e?t=fa:t=n?_n:fa}return t(a,s)}let Ln;try{Ln=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Ln=/\n+(?!\n|$)/g}function Ca({comment:a,type:s,value:n},t,e,m){const{blockQuote:l,commentString:p,lineWidth:r}=t.options;if(!l||/\n[\t ]+$/.test(n))return ea(n,t);const o=t.indent||(t.forceBlockIndent||an(n)?"  ":""),c=l==="literal"?!0:l==="folded"||s===R.BLOCK_FOLDED?!1:s===R.BLOCK_LITERAL?!0:!pr(n,r,o.length);if(!n)return c?`|
`:`>
`;let g,h;for(h=n.length;h>0;--h){const b=n[h-1];if(b!==`
`&&b!=="	"&&b!==" ")break}let i=n.substring(h);const d=i.indexOf(`
`);d===-1?g="-":n===i||d!==i.length-1?(g="+",m&&m()):g="",i&&(n=n.slice(0,-i.length),i[i.length-1]===`
`&&(i=i.slice(0,-1)),i=i.replace(Ln,`$&${o}`));let u=!1,f,y=-1;for(f=0;f<n.length;++f){const b=n[f];if(b===" ")u=!0;else if(b===`
`)y=f;else break}let w=n.substring(0,y<f?y+1:f);w&&(n=n.substring(w.length),w=w.replace(/\n+/g,`$&${o}`));let k=(u?o?"2":"1":"")+g;if(a&&(k+=" "+p(a.replace(/ ?[\r\n]+/g," ")),e&&e()),!c){const b=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${o}`);let T=!1;const C=sn(t,!0);l!=="folded"&&s!==R.BLOCK_FOLDED&&(C.onOverflow=()=>{T=!0});const V=Xa(`${w}${b}${i}`,o,Sn,C);if(!T)return`>${k}
${o}${V}`}return n=n.replace(/\n+/g,`$&${o}`),`|${k}
${o}${w}${n}${i}`}function rr(a,s,n,t){const{type:e,value:m}=a,{actualString:l,implicitKey:p,indent:r,indentStep:o,inFlow:c}=s;if(p&&m.includes(`
`)||c&&/[[\]{},]/.test(m))return ea(m,s);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(m))return p||c||!m.includes(`
`)?ea(m,s):Ca(a,s,n,t);if(!p&&!c&&e!==R.PLAIN&&m.includes(`
`))return Ca(a,s,n,t);if(an(m)){if(r==="")return s.forceBlockIndent=!0,Ca(a,s,n,t);if(p&&r===o)return ea(m,s)}const g=m.replace(/\n+/g,`$&
${r}`);if(l){const h=u=>u.default&&u.tag!=="tag:yaml.org,2002:str"&&u.test?.test(g),{compat:i,tags:d}=s.doc.schema;if(d.some(h)||i?.some(h))return ea(m,s)}return p?g:Xa(g,r,Oe,sn(s,!1))}function or(a,s,n,t){const{implicitKey:e,inFlow:m}=s,l=typeof a.value=="string"?a:Object.assign({},a,{value:String(a.value)});let{type:p}=a;p!==R.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(l.value)&&(p=R.QUOTE_DOUBLE);const r=c=>{switch(c){case R.BLOCK_FOLDED:case R.BLOCK_LITERAL:return e||m?ea(l.value,s):Ca(l,s,n,t);case R.QUOTE_DOUBLE:return fa(l.value,s);case R.QUOTE_SINGLE:return _n(l.value,s);case R.PLAIN:return rr(l,s,n,t);default:return null}};let o=r(p);if(o===null){const{defaultKeyType:c,defaultStringType:g}=s.options,h=e&&c||g;if(o=r(h),o===null)throw new Error(`Unsupported default string type ${h}`)}return o}function ir(a,s){const n=Object.assign({blockQuote:!0,commentString:lr,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},a.schema.toStringOptions,s);let t;switch(n.collectionStyle){case"block":t=!1;break;case"flow":t=!0;break;default:t=null}return{anchors:new Set,doc:a,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:t,options:n}}function cr(a,s){if(s.tag){const e=a.filter(m=>m.tag===s.tag);if(e.length>0)return e.find(m=>m.format===s.format)??e[0]}let n,t;if(H(s)){t=s.value;let e=a.filter(m=>m.identify?.(t));if(e.length>1){const m=e.filter(l=>l.test);m.length>0&&(e=m)}n=e.find(m=>m.format===s.format)??e.find(m=>!m.format)}else t=s,n=a.find(e=>e.nodeClass&&t instanceof e.nodeClass);if(!n){const e=t?.constructor?.name??(t===null?"null":typeof t);throw new Error(`Tag not resolved for ${e} value`)}return n}function hr(a,s,{anchors:n,doc:t}){if(!t.directives)return"";const e=[],m=(H(a)||Z(a))&&a.anchor;m&&_e(m)&&(n.add(m),e.push(`&${m}`));const l=a.tag??(s.default?null:s.tag);return l&&e.push(t.directives.tagString(l)),e.join(" ")}function Qa(a,s,n,t){if(F(a))return a.toString(s,n,t);if(Gs(a)){if(s.doc.directives)return a.toString(s);if(s.resolvedAliases?.has(a))throw new TypeError("Cannot stringify circular structure without alias nodes");s.resolvedAliases?s.resolvedAliases.add(a):s.resolvedAliases=new Set([a]),a=a.resolve(s.doc)}let e;const m=q(a)?a:s.doc.createNode(a,{onTagObj:r=>e=r});e??(e=cr(s.doc.schema.tags,m));const l=hr(m,e,s);l.length>0&&(s.indentAtStart=(s.indentAtStart??0)+l.length+1);const p=typeof e.stringify=="function"?e.stringify(m,s,n,t):H(m)?or(m,s,n,t):m.toString(s,n,t);return l?H(m)||p[0]==="{"||p[0]==="["?`${l} ${p}`:`${l}
${s.indent}${p}`:p}function gr({key:a,value:s},n,t,e){const{allNullValues:m,doc:l,indent:p,indentStep:r,options:{commentString:o,indentSeq:c,simpleKeys:g}}=n;let h=q(a)&&a.comment||null;if(g){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(Z(a)||!q(a)&&typeof a=="object"){const C="With simple keys, collection cannot be used as a key value";throw new Error(C)}}let i=!g&&(!a||h&&s==null&&!n.inFlow||Z(a)||(H(a)?a.type===R.BLOCK_FOLDED||a.type===R.BLOCK_LITERAL:typeof a=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!i&&(g||!m),indent:p+r});let d=!1,u=!1,f=Qa(a,n,()=>d=!0,()=>u=!0);if(!i&&!n.inFlow&&f.length>1024){if(g)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");i=!0}if(n.inFlow){if(m||s==null)return d&&t&&t(),f===""?"?":i?`? ${f}`:f}else if(m&&!g||s==null&&i)return f=`? ${f}`,h&&!d?f+=ta(f,n.indent,o(h)):u&&e&&e(),f;d&&(h=null),i?(h&&(f+=ta(f,n.indent,o(h))),f=`? ${f}
${p}:`):(f=`${f}:`,h&&(f+=ta(f,n.indent,o(h))));let y,w,x;q(s)?(y=!!s.spaceBefore,w=s.commentBefore,x=s.comment):(y=!1,w=null,x=null,s&&typeof s=="object"&&(s=l.createNode(s))),n.implicitKey=!1,!i&&!h&&H(s)&&(n.indentAtStart=f.length+1),u=!1,!c&&r.length>=2&&!n.inFlow&&!i&&Hn(s)&&!s.flow&&!s.tag&&!s.anchor&&(n.indent=n.indent.substring(2));let k=!1;const b=Qa(s,n,()=>k=!0,()=>u=!0);let T=" ";if(h||y||w){if(T=y?`
`:"",w){const C=o(w);T+=`
${wa(C,n.indent)}`}b===""&&!n.inFlow?T===`
`&&x&&(T=`

`):T+=`
${n.indent}`}else if(!i&&Z(s)){const C=b[0],V=b.indexOf(`
`),W=V!==-1,rs=n.inFlow??s.flow??s.items.length===0;if(W||!rs){let Y=!1;if(W&&(C==="&"||C==="!")){let L=b.indexOf(" ");C==="&"&&L!==-1&&L<V&&b[L+1]==="!"&&(L=b.indexOf(" ",L+1)),(L===-1||V<L)&&(Y=!0)}Y||(T=`
${n.indent}`)}}else(b===""||b[0]===`
`)&&(T="");return f+=T+b,n.inFlow?k&&t&&t():x&&!k?f+=ta(f,n.indent,o(x)):u&&e&&e(),f}function ur(a,s){(a==="debug"||a==="warn")&&console.warn(s)}const _a="<<",on={identify:a=>a===_a||typeof a=="symbol"&&a.description===_a,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new R(Symbol(_a)),{addToJSMap:$e}),stringify:()=>_a},dr=(a,s)=>(on.identify(s)||H(s)&&(!s.type||s.type===R.PLAIN)&&on.identify(s.value))&&a?.doc.schema.tags.some(n=>n.tag===on.tag&&n.default);function $e(a,s,n){if(n=a&&Gs(n)?n.resolve(a.doc):n,Hn(n))for(const t of n.items)cn(a,s,t);else if(Array.isArray(n))for(const t of n)cn(a,s,t);else cn(a,s,n)}function cn(a,s,n){const t=a&&Gs(n)?n.resolve(a.doc):n;if(!Me(t))throw new Error("Merge sources must be maps or map aliases");const e=t.toJSON(null,a,Map);for(const[m,l]of e)s instanceof Map?s.has(m)||s.set(m,l):s instanceof Set?s.add(m):Object.prototype.hasOwnProperty.call(s,m)||Object.defineProperty(s,m,{value:l,writable:!0,enumerable:!0,configurable:!0});return s}function Ee(a,s,{key:n,value:t}){if(q(n)&&n.addToJSMap)n.addToJSMap(a,s,t);else if(dr(a,n))$e(a,s,t);else{const e=es(n,"",a);if(s instanceof Map)s.set(e,es(t,e,a));else if(s instanceof Set)s.add(e);else{const m=fr(n,e,a),l=es(t,m,a);m in s?Object.defineProperty(s,m,{value:l,writable:!0,enumerable:!0,configurable:!0}):s[m]=l}}return s}function fr(a,s,n){if(s===null)return"";if(typeof s!="object")return String(s);if(q(a)&&n?.doc){const t=ir(n.doc,{});t.anchors=new Set;for(const m of n.anchors.keys())t.anchors.add(m.anchor);t.inFlow=!0,t.inStringifyKey=!0;const e=a.toString(t);if(!n.mapKeyWarned){let m=JSON.stringify(e);m.length>40&&(m=m.substring(0,36)+'..."'),ur(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${m}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return e}return JSON.stringify(s)}function Qn(a,s,n){const t=Va(a,void 0,n),e=Va(s,void 0,n);return new ps(t,e)}class ps{constructor(s,n=null){Object.defineProperty(this,ms,{value:be}),this.key=s,this.value=n}clone(s){let{key:n,value:t}=this;return q(n)&&(n=n.clone(s)),q(t)&&(t=t.clone(s)),new ps(n,t)}toJSON(s,n){const t=n?.mapAsMap?new Map:{};return Ee(n,t,this)}toString(s,n,t){return s?.doc?gr(this,s,n,t):JSON.stringify(this)}}function De(a,s,n){return(s.inFlow??a.flow?wr:yr)(a,s,n)}function yr({comment:a,items:s},n,{blockItemPrefix:t,flowChars:e,itemIndent:m,onChompKeep:l,onComment:p}){const{indent:r,options:{commentString:o}}=n,c=Object.assign({},n,{indent:m,type:null});let g=!1;const h=[];for(let d=0;d<s.length;++d){const u=s[d];let f=null;if(q(u))!g&&u.spaceBefore&&h.push(""),Fa(n,h,u.commentBefore,g),u.comment&&(f=u.comment);else if(F(u)){const w=q(u.key)?u.key:null;w&&(!g&&w.spaceBefore&&h.push(""),Fa(n,h,w.commentBefore,g))}g=!1;let y=Qa(u,c,()=>f=null,()=>g=!0);f&&(y+=ta(y,m,o(f))),g&&f&&(g=!1),h.push(t+y)}let i;if(h.length===0)i=e.start+e.end;else{i=h[0];for(let d=1;d<h.length;++d){const u=h[d];i+=u?`
${r}${u}`:`
`}}return a?(i+=`
`+wa(o(a),r),p&&p()):g&&l&&l(),i}function wr({items:a},s,{flowChars:n,itemIndent:t}){const{indent:e,indentStep:m,flowCollectionPadding:l,options:{commentString:p}}=s;t+=m;const r=Object.assign({},s,{indent:t,inFlow:!0,type:null});let o=!1,c=0;const g=[];for(let d=0;d<a.length;++d){const u=a[d];let f=null;if(q(u))u.spaceBefore&&g.push(""),Fa(s,g,u.commentBefore,!1),u.comment&&(f=u.comment);else if(F(u)){const w=q(u.key)?u.key:null;w&&(w.spaceBefore&&g.push(""),Fa(s,g,w.commentBefore,!1),w.comment&&(o=!0));const x=q(u.value)?u.value:null;x?(x.comment&&(f=x.comment),x.commentBefore&&(o=!0)):u.value==null&&w?.comment&&(f=w.comment)}f&&(o=!0);let y=Qa(u,r,()=>f=null);d<a.length-1&&(y+=","),f&&(y+=ta(y,t,p(f))),!o&&(g.length>c||y.includes(`
`))&&(o=!0),g.push(y),c=g.length}const{start:h,end:i}=n;if(g.length===0)return h+i;if(!o){const d=g.reduce((u,f)=>u+f.length+2,2);o=s.options.lineWidth>0&&d>s.options.lineWidth}if(o){let d=h;for(const u of g)d+=u?`
${m}${e}${u}`:`
`;return`${d}
${e}${i}`}else return`${h}${l}${g.join(" ")}${l}${i}`}function Fa({indent:a,options:{commentString:s}},n,t,e){if(t&&e&&(t=t.replace(/^\n+/,"")),t){const m=wa(s(t),a);n.push(m.trimStart())}}function Js(a,s){const n=H(s)?s.value:s;for(const t of a)if(F(t)&&(t.key===s||t.key===n||H(t.key)&&t.key.value===n))return t}class Xs extends Ae{static get tagName(){return"tag:yaml.org,2002:map"}constructor(s){super(Ks,s),this.items=[]}static from(s,n,t){const{keepUndefined:e,replacer:m}=t,l=new this(s),p=(r,o)=>{if(typeof m=="function")o=m.call(n,r,o);else if(Array.isArray(m)&&!m.includes(r))return;(o!==void 0||e)&&l.items.push(Qn(r,o,t))};if(n instanceof Map)for(const[r,o]of n)p(r,o);else if(n&&typeof n=="object")for(const r of Object.keys(n))p(r,n[r]);return typeof s.sortMapEntries=="function"&&l.items.sort(s.sortMapEntries),l}add(s,n){let t;F(s)?t=s:!s||typeof s!="object"||!("key"in s)?t=new ps(s,s?.value):t=new ps(s.key,s.value);const e=Js(this.items,t.key),m=this.schema?.sortMapEntries;if(e){if(!n)throw new Error(`Key ${t.key} already set`);H(e.value)&&Le(t.value)?e.value.value=t.value:e.value=t.value}else if(m){const l=this.items.findIndex(p=>m(t,p)<0);l===-1?this.items.push(t):this.items.splice(l,0,t)}else this.items.push(t)}delete(s){const n=Js(this.items,s);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(s,n){const e=Js(this.items,s)?.value;return(!n&&H(e)?e.value:e)??void 0}has(s){return!!Js(this.items,s)}set(s,n){this.add(new ps(s,n),!0)}toJSON(s,n,t){const e=t?new t:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(e);for(const m of this.items)Ee(n,e,m);return e}toString(s,n,t){if(!s)return JSON.stringify(this);for(const e of this.items)if(!F(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!s.allNullValues&&this.hasAllNullValues(!1)&&(s=Object.assign({},s,{allNullValues:!0})),De(this,s,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:s.indent||"",onChompKeep:t,onComment:n})}}class Te extends Ae{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(s){super(xa,s),this.items=[]}add(s){this.items.push(s)}delete(s){const n=La(s);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(s,n){const t=La(s);if(typeof t!="number")return;const e=this.items[t];return!n&&H(e)?e.value:e}has(s){const n=La(s);return typeof n=="number"&&n<this.items.length}set(s,n){const t=La(s);if(typeof t!="number")throw new Error(`Expected a valid index, not ${s}.`);const e=this.items[t];H(e)&&Le(n)?e.value=n:this.items[t]=n}toJSON(s,n){const t=[];n?.onCreate&&n.onCreate(t);let e=0;for(const m of this.items)t.push(es(m,String(e++),n));return t}toString(s,n,t){return s?De(this,s,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(s.indent||"")+"  ",onChompKeep:t,onComment:n}):JSON.stringify(this)}static from(s,n,t){const{replacer:e}=t,m=new this(s);if(n&&Symbol.iterator in Object(n)){let l=0;for(let p of n){if(typeof e=="function"){const r=n instanceof Set?p:String(l++);p=e.call(n,r,p)}m.items.push(Va(p,void 0,t))}}return m}}function La(a){let s=H(a)?a.value:a;return s&&typeof s=="string"&&(s=Number(s)),typeof s=="number"&&Number.isInteger(s)&&s>=0?s:null}function xr(a,s,n){const{replacer:t}=n,e=new Te(a);e.tag="tag:yaml.org,2002:pairs";let m=0;if(s&&Symbol.iterator in Object(s))for(let l of s){typeof t=="function"&&(l=t.call(s,String(m++),l));let p,r;if(Array.isArray(l))if(l.length===2)p=l[0],r=l[1];else throw new TypeError(`Expected [key, value] tuple: ${l}`);else if(l&&l instanceof Object){const o=Object.keys(l);if(o.length===1)p=o[0],r=l[p];else throw new TypeError(`Expected tuple with one key, not ${o.length} keys`)}else p=l;e.items.push(Qn(p,r,n))}return e}class Fn extends Te{constructor(){super(),this.add=Xs.prototype.add.bind(this),this.delete=Xs.prototype.delete.bind(this),this.get=Xs.prototype.get.bind(this),this.has=Xs.prototype.has.bind(this),this.set=Xs.prototype.set.bind(this),this.tag=Fn.tag}toJSON(s,n){if(!n)return super.toJSON(s);const t=new Map;n?.onCreate&&n.onCreate(t);for(const e of this.items){let m,l;if(F(e)?(m=es(e.key,"",n),l=es(e.value,m,n)):m=es(e,"",n),t.has(m))throw new Error("Ordered maps must not include duplicate keys");t.set(m,l)}return t}static from(s,n,t){const e=xr(s,n,t),m=new this;return m.items=e.items,m}}Fn.tag="tag:yaml.org,2002:omap";class Bn extends Xs{constructor(s){super(s),this.tag=Bn.tag}add(s){let n;F(s)?n=s:s&&typeof s=="object"&&"key"in s&&"value"in s&&s.value===null?n=new ps(s.key,null):n=new ps(s,null),Js(this.items,n.key)||this.items.push(n)}get(s,n){const t=Js(this.items,s);return!n&&F(t)?H(t.key)?t.key.value:t.key:t}set(s,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const t=Js(this.items,s);t&&!n?this.items.splice(this.items.indexOf(t),1):!t&&n&&this.items.push(new ps(s))}toJSON(s,n){return super.toJSON(s,n,Set)}toString(s,n,t){if(!s)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},s,{allNullValues:!0}),n,t);throw new Error("Set items must all have null values")}static from(s,n,t){const{replacer:e}=t,m=new this(s);if(n&&Symbol.iterator in Object(n))for(let l of n)typeof e=="function"&&(l=e.call(n,l,l)),m.items.push(Qn(l,null,t));return m}}Bn.tag="tag:yaml.org,2002:set";new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);function qn(a=5){const s=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=n.length;for(let e=0;e<a;e++)s.push(n.charAt(Math.floor(Math.random()*t)));return s.join("")}function oi(a,s,n,t){const e=de(s+n-1,a);for(let m=0;m<s;m++){const l=t(m),p=e.includes(m+n);for(const r of l)r.classList.toggle("slidev-code-highlighted",p),r.classList.toggle("slidev-code-dishonored",!p),r.classList.toggle("highlighted",p),r.classList.toggle("dishonored",!p)}}function Pe(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)}function as(a,s,n){Object.defineProperty(a,s,{value:n,writable:!0,enumerable:!1})}const is=_({});let kr=[],vr=[];as(is,"$syncUp",!0);as(is,"$syncDown",!0);as(is,"$paused",!1);as(is,"$onSet",a=>kr.push(a));as(is,"$onPatch",a=>vr.push(a));Pe();as(is,"$patch",async()=>!1);const br={channels:[],enabled:!0,init(a,s,n,t=!1){let e;if(!t)e=new BroadcastChannel(a),e.addEventListener("message",m=>s(m.data)),this.channels.push(e);else if(t){this.listener=function(l){l&&l.key===a&&l.newValue&&s(JSON.parse(l.newValue))},window.addEventListener("storage",this.listener);const m=window.localStorage.getItem(a);m&&s(JSON.parse(m))}return(m,l=!1)=>{this.enabled&&(!t&&e&&!l&&e.postMessage(le(m)),t&&!l&&window.localStorage.setItem(a,JSON.stringify(m)))}},disable(){this.enabled=!1,this.channels.forEach(a=>a.close()),this.listener&&window.removeEventListener("storage",this.listener)}},Mr=_([br]),Sr=new Map,Bt=D({});function Ce(a,s,n=!1){const t=[];let e=!1,m=!1,l,p;const r=_(s);function o(i){t.push(i)}function c(i,d){r[i]!==d&&(clearTimeout(l),e=!0,r[i]=d,l=setTimeout(()=>e=!1,0))}function g(i){e||(clearTimeout(p),m=!0,Object.entries(i).forEach(([d,u])=>{r[d]=u}),p=setTimeout(()=>m=!1,0))}function h(i){Sr.set(i,{onUpdate:g,persist:n,state:r}),Bt.value[i]=Mr.map(u=>u.init(i,g,r,n)).filter(u=>!!u);function d(){Bt.value[i].forEach(u=>u?.(le(r),m)),e||t.forEach(u=>u(r))}ss(r,d,{deep:!0})}return{init:h,onPatch:o,onUpdate:g,patch:c,state:r}}const{init:_r,onPatch:ii,patch:ci,state:hi}=Ce(is,is,!1),Zs=_({page:0,clicks:0,timer:{status:"stopped",slides:{},startedAt:0,pausedAt:0}});let Lr=[],Ar=[];as(Zs,"$syncUp",!0);as(Zs,"$syncDown",!0);as(Zs,"$paused",!1);as(Zs,"$onSet",a=>Lr.push(a));as(Zs,"$onPatch",a=>Ar.push(a));Pe();as(Zs,"$patch",async()=>!1);const{init:Or,onPatch:$r,patch:Aa,state:gi}=Ce(Zs,{page:1,clicks:0,clicksTotal:0,timer:{status:"stopped",slides:{},startedAt:0,pausedAt:0}});function Er(){const a=ae().appContext.app,s=_({nav:pa(),configs:I,themeConfigs:v(()=>I.themeConfig)});a.provide(Rn,D("none")),a.provide(Dp,s),a.provide(Nn,v(()=>s.nav.currentSlideNo)),a.provide(Ka,Cn(ll()));for(const h of Pm)h();const{clicksContext:n,currentSlideNo:t,hasPrimarySlide:e,isNotesViewer:m,isPresenter:l,isPrintMode:p}=pa();tl({title:tn,htmlAttrs:I.htmlAttrs}),Zp(),Or(`${tn} - shared`),_r(`${tn} - drawings`);const r=`${location.origin}_${qn()}`,o=v(()=>l.value?"presenter":"viewer");function c(){(l.value?Sa.value.presenterSend:Sa.value.viewerSend)&&(m.value||p.value||!l.value&&!Cp.includes(location.host.split(":")[0])||(Aa("page",+t.value),Aa("clicks",n.value.current),Aa("clicksTotal",n.value.total),Aa("lastUpdate",{id:r,type:o.value,time:new Date().getTime()})))}const g=Ua();g.afterEach(c),ss(n,c),$r(h=>{(l.value?Sa.value.presenterReceive:Sa.value.viewerReceive)&&(!e.value||p.value||h.lastUpdate?.type!==o.value&&(+h.page==+t.value&&+n.value.current==+h.clicks||(In.value=!1,g.replace({path:aa(h.page,l.value),query:{...g.currentRoute.value.query,clicks:h.clicks||0}}))))})}const Dr=te({__name:"App",setup(a){return Er(),ma(()=>{for(const[s,n]of Object.entries(Tm.value))document.body.style.setProperty(s,n.toString())}),(s,n)=>{const t=dm("RouterView");return Ia(),um(t)}}});function Tr(a){return a}const Pr=Tr,Cr=Pr(({app:a})=>{}),Nr=[Object.values([Cr])[0],Object.values([])[0]].filter(Boolean);async function Ne(a,s={}){const n=s.document||a.resolvedOptions.document;if(!n||!a.dirty)return;const t={shouldRender:!0,tags:[]};if(await a.hooks.callHook("dom:beforeRender",t),!!t.shouldRender)return a._domUpdatePromise||(a._domUpdatePromise=new Promise(async e=>{const m=new Map,l=new Promise(i=>{a.resolveTags().then(d=>{i(d.map(u=>{const f=m.get(u._d)||0,y={tag:u,id:(f?`${u._d}:${f}`:u._d)||st(u),shouldRender:!0};return u._d&&ce(u._d)&&m.set(u._d,f+1),y}))})});let p=a._dom;if(!p){p={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const i of["body","head"]){const d=n[i]?.children;for(const u of d){const f=u.tagName.toLowerCase();if(!Xn.has(f))continue;const y=he({tag:f,props:{}},{innerHTML:u.innerHTML,...u.getAttributeNames().reduce((w,x)=>(w[x]=u.getAttribute(x),w),{})||{}});if(y.key=u.getAttribute("data-hid")||void 0,y._d=vn(y)||st(y),p.elMap.has(y._d)){let w=1,x=y._d;for(;p.elMap.has(x);)x=`${y._d}:${w++}`;p.elMap.set(x,u)}else p.elMap.set(y._d,u)}}}p.pendingSideEffects={...p.sideEffects},p.sideEffects={};function r(i,d,u){const f=`${i}:${d}`;p.sideEffects[f]=u,delete p.pendingSideEffects[f]}function o({id:i,$el:d,tag:u}){const f=u.tag.endsWith("Attrs");p.elMap.set(i,d),f||(u.textContent&&u.textContent!==d.textContent&&(d.textContent=u.textContent),u.innerHTML&&u.innerHTML!==d.innerHTML&&(d.innerHTML=u.innerHTML),r(i,"el",()=>{d?.remove(),p.elMap.delete(i)}));for(const y in u.props){if(!Object.prototype.hasOwnProperty.call(u.props,y))continue;const w=u.props[y];if(y.startsWith("on")&&typeof w=="function"){const k=d?.dataset;if(k&&k[`${y}fired`]){const b=y.slice(0,-5);w.call(d,new Event(b.substring(2)))}d.getAttribute(`data-${y}`)!==""&&((u.tag==="bodyAttrs"?n.defaultView:d).addEventListener(y.substring(2),w.bind(d)),d.setAttribute(`data-${y}`,""));continue}const x=`attr:${y}`;if(y==="class"){if(!w)continue;for(const k of w)f&&r(i,`${x}:${k}`,()=>d.classList.remove(k)),!d.classList.contains(k)&&d.classList.add(k)}else if(y==="style"){if(!w)continue;for(const[k,b]of w)r(i,`${x}:${k}`,()=>{d.style.removeProperty(k)}),d.style.setProperty(k,b)}else w!==!1&&w!==null&&(d.getAttribute(y)!==w&&d.setAttribute(y,w===!0?"":String(w)),f&&r(i,x,()=>d.removeAttribute(y)))}}const c=[],g={bodyClose:void 0,bodyOpen:void 0,head:void 0},h=await l;for(const i of h){const{tag:d,shouldRender:u,id:f}=i;if(u){if(d.tag==="title"){n.title=d.textContent,r("title","",()=>n.title=p.title);continue}i.$el=i.$el||p.elMap.get(f),i.$el?o(i):Xn.has(d.tag)&&c.push(i)}}for(const i of c){const d=i.tag.tagPosition||"head";i.$el=n.createElement(i.tag.tag),o(i),g[d]=g[d]||n.createDocumentFragment(),g[d].appendChild(i.$el)}for(const i of h)await a.hooks.callHook("dom:renderTag",i,n,r);g.head&&n.head.appendChild(g.head),g.bodyOpen&&n.body.insertBefore(g.bodyOpen,n.body.firstChild),g.bodyClose&&n.body.appendChild(g.bodyClose);for(const i in p.pendingSideEffects)p.pendingSideEffects[i]();a._dom=p,await a.hooks.callHook("dom:rendered",{renders:h}),e()}).finally(()=>{a._domUpdatePromise=void 0,a.dirty=!1})),a._domUpdatePromise}function Rr(a={}){const s=a.domOptions?.render||Ne;a.document=a.document||(typeof window<"u"?document:void 0);const n=a.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return Xm({...a,plugins:[...a.plugins||[],{key:"client",hooks:{"entries:updated":s}}],init:[n?JSON.parse(n):!1,...a.init||[]]})}function Ir(a,s){let n=0;return()=>{const t=++n;s(()=>{n===t&&a()})}}function jr(a={}){const s=Rr({domOptions:{render:Ir(()=>Ne(s),n=>setTimeout(n,0))},...a});return s.install=al(s),s}function ui(a,s=""){const n=["slidev-page",s],t=a?.meta?.slide?.no;return t!=null&&n.push(`slidev-page-${t}`),n.filter(Boolean).join(" ")}async function di(){const{saveAs:a}=await S(async()=>{const{saveAs:s}=await import("./modules/file-saver-DKWcVV7Q.js").then(n=>n.F);return{saveAs:s}},[],import.meta.url);a(typeof I.download=="string"?I.download:I.exportFilename?`${I.exportFilename}.pdf`:"./slidev-exported.pdf",`${I.title}.pdf`)}function la(a,s,n){return(a.instance?.$).provides[s]??n}function zr(){return{install(a){a.directive("click",{name:"v-click",mounted(s,n){const t=Na(s,n,n.value);t!=null&&(s.classList.toggle(Ea,!0),s.dataset.slidevClicksStart=String(t.start),Number.isFinite(t.end)&&(s.dataset.slidevClicksEnd=String(t.end)),s.watchStopHandle=ma(()=>{const e=t.isActive.value,m=t.isCurrent.value,l=e&&!m;t.flagHide?(s.classList.toggle(t.flagFade?ca:ia,e),s.classList.toggle(mn,e)):s.classList.toggle(t.flagFade?ca:ia,!e),s.classList.toggle(ln,m),s.classList.toggle(pn,l)}))},unmounted:hn}),a.directive("after",{name:"v-after",mounted(s,n){const t=Na(s,n,"+0");t!=null&&(s.classList.toggle(Ea,!0),s.watchStopHandle=ma(()=>{const e=t.isActive.value,m=t.isCurrent.value,l=e&&!m;t.flagHide?(s.classList.toggle(t.flagFade?ca:ia,e),s.classList.toggle(mn,e)):s.classList.toggle(t.flagFade?ca:ia,!e),s.classList.toggle(ln,m),s.classList.toggle(pn,l)}))},unmounted:hn}),a.directive("click-hide",{name:"v-click-hide",mounted(s,n){const t=Na(s,n,n.value,!0);t!=null&&(s.classList.toggle(Ea,!0),s.watchStopHandle=ma(()=>{const e=t.isActive.value,m=t.isCurrent.value,l=e&&!m;s.classList.toggle(t.flagFade?ca:ia,e),s.classList.toggle(mn,e),s.classList.toggle(ln,m),s.classList.toggle(pn,l)}))},unmounted:hn})}}}const Re=new Map;function Na(a,s,n,t=!1){const e=la(s,Ka)?.value;if(!a||!e)return null;const m=t||s.modifiers.hide!==!1&&s.modifiers.hide!=null,l=s.modifiers.fade!==!1&&s.modifiers.fade!=null,p=e.calculate(n);if(!p)return null;e.register(a,p);const r=v(()=>m?!p.isActive.value:p.isActive.value),o=v(()=>r.value?"shown":Number.isFinite(p.end)?e.current<p.start?"before":"after":m?"after":"before"),c={...p,isShown:r,visibilityState:o,flagFade:l,flagHide:m};return Re.set(a,c),c}function hn(a,s){a.classList.toggle(Ea,!1),la(s,Ka)?.value?.unregister(a),a.watchStopHandle?.()}function Hr(a=se(fe,D())){const s=fm(a),n=ss([Fp,Bp,qp,Wp,Qp,za.width,za.height],()=>{setTimeout(s.update,300)},{flush:"post",immediate:!0});return{...s,stop:n}}function Vr(a){return()=>{}}function Qr(a,s,n,t=!1){function e(j){return a?la(a,j):wm(j)}const m=e(Rn),l=e(Tp)??{},p=e(Nn),r=v(()=>Vr(p.value)),o=e(Ep)??D(1),c=e(Pp)??D(1),{left:g,top:h,stop:i}=Hr(e(fe)??D()),{isPrintMode:d}=pa(),u=["slide","presenter"].includes(m.value)&&!d.value;let f=a?"directive":"prop",y=qn(),w;if(Array.isArray(s)?w=s:typeof s=="string"&&s.includes(",")?w=s.split(",").map(Number):s!=null&&(f="frontmatter",y=`${s}`,s=l?.dragPos?.[y],w=s?.split(",").map(Number)),f!=="frontmatter"&&!n)throw new Error("[Slidev] Can not identify the source position of the v-drag element, please provide an explicit `id` prop.");const x=[i],k=!t&&s!=null&&!Number.isFinite(w?.[3]);w??=[Number.NaN,Number.NaN,0];const b=D(w[2]),T=D(w[0]+w[2]/2),C=D(t?0:w[4]??0),V=v(()=>C.value*Math.PI/180),W=v(()=>Math.sin(V.value)),rs=v(()=>Math.cos(V.value)),Y=D(),L=D({left:0,top:0,width:0,height:0}),P=D(0);function Q(){if(!Y.value)return;const j=Y.value.getBoundingClientRect();L.value={left:j.left/c.value,top:j.top/c.value,width:j.width/c.value,height:j.height/c.value},P.value=(L.value.width+L.value.height)/o.value/(Math.abs(W.value)+Math.abs(rs.value))-b.value}x.push(ss(b,Q,{flush:"post"}));const z=D(w[3]??0),N=k?v({get:()=>(k?P.value:z.value)||0,set:j=>!k&&(z.value=j)}):z,ls=k?D(w[1]):D(w[1]+w[3]/2),os=k?v({get:()=>ls.value+N.value/2,set:j=>ls.value=j-N.value/2}):ls,ra=v(()=>Number.isFinite(T.value)?{position:"absolute",zIndex:100,left:`${T.value-b.value/2}px`,top:`${os.value-N.value/2}px`,width:`${b.value}px`,height:k?void 0:`${N.value}px`,transformOrigin:"center center",transform:`rotate(${C.value}deg)`}:{position:"absolute",zIndex:100});x.push(ss([T,os,b,N,C],([j,va,Jn,Kn,Gn])=>{let Ys=[j-Jn/2,va-Kn/2,Jn].map(Math.round).join();k?Ys+=f==="directive"?",NaN":",_":Ys+=`,${Math.round(Kn)}`,Math.round(Gn)!==0&&(Ys+=`,${Math.round(Gn)}`),f==="directive"&&(Ys=`[${Ys}]`),r.value(y,Ys,f,n)}));const K={dragId:y,dataSource:f,markdownSource:n,isArrow:t,zoom:c,autoHeight:k,x0:T,y0:os,width:b,height:N,rotate:C,container:Y,containerStyle:ra,watchStopHandles:x,dragging:v(()=>ba.value===K),mounted(){u&&(Q(),s||setTimeout(()=>{Q(),T.value=(L.value.left+L.value.width/2-g.value)/o.value,os.value=(L.value.top-h.value)/o.value,b.value=L.value.width/o.value,N.value=L.value.height/o.value},100))},unmounted(){u&&K.stopDragging()},startDragging(){u&&(Q(),ba.value=K)},stopDragging(){u&&ba.value===K&&(ba.value=null)}};return x.push(ym(Y,j=>{const va=document.querySelector("#drag-control-container");va&&j.target&&va.contains(j.target)||K.stopDragging()}),ss(xm(),j=>{j||K.stopDragging()})),K}function Fr(){return{install(a){a.directive("drag",{name:"v-drag",created(s,n,t){const e=Qr(n,n.value,t.props?.markdownSource);t.props&&(t.props={...t.props},delete t.props.markdownSource),e.container.value=s,s.draggingState=e,s.dataset.dragId=e.dragId,e.watchStopHandles.push(ss(e.containerStyle,m=>{for(const[l,p]of Object.entries(m))p&&(s.style[l]=p)},{immediate:!0})),s.addEventListener("dblclick",e.startDragging)},mounted(s){s.draggingState.mounted()},unmounted(s){const n=s.draggingState;n.unmounted(),s.removeEventListener("dblclick",n.startDragging),n.watchStopHandles.forEach(t=>t())}})}}}function Ie(){return Math.floor(Math.random()*2**31)}class Br{constructor(s){this.seed=s}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}function An(a,s,n){if(a&&a.length){const[t,e]=s,m=Math.PI/180*n,l=Math.cos(m),p=Math.sin(m);for(const r of a){const[o,c]=r;r[0]=(o-t)*l-(c-e)*p+t,r[1]=(o-t)*p+(c-e)*l+e}}}function qr(a,s,n){const t=[];a.forEach(e=>t.push(...e)),An(t,s,n)}function Wr(a,s){return a[0]===s[0]&&a[1]===s[1]}function Ur(a,s,n,t=1){const e=n,m=Math.max(s,.1),l=a[0]&&a[0][0]&&typeof a[0][0]=="number"?[a]:a,p=[0,0];if(e)for(const o of l)An(o,p,e);const r=Jr(l,m,t);if(e){for(const o of l)An(o,p,-e);qr(r,p,-e)}return r}function Jr(a,s,n){const t=[];for(const o of a){const c=[...o];Wr(c[0],c[c.length-1])||c.push([c[0][0],c[0][1]]),c.length>2&&t.push(c)}const e=[];s=Math.max(s,.1);const m=[];for(const o of t)for(let c=0;c<o.length-1;c++){const g=o[c],h=o[c+1];if(g[1]!==h[1]){const i=Math.min(g[1],h[1]);m.push({ymin:i,ymax:Math.max(g[1],h[1]),x:i===g[1]?g[0]:h[0],islope:(h[0]-g[0])/(h[1]-g[1])})}}if(m.sort((o,c)=>o.ymin<c.ymin?-1:o.ymin>c.ymin?1:o.x<c.x?-1:o.x>c.x?1:o.ymax===c.ymax?0:(o.ymax-c.ymax)/Math.abs(o.ymax-c.ymax)),!m.length)return e;let l=[],p=m[0].ymin,r=0;for(;l.length||m.length;){if(m.length){let o=-1;for(let g=0;g<m.length&&!(m[g].ymin>p);g++)o=g;m.splice(0,o+1).forEach(g=>{l.push({s:p,edge:g})})}if(l=l.filter(o=>!(o.edge.ymax<=p)),l.sort((o,c)=>o.edge.x===c.edge.x?0:(o.edge.x-c.edge.x)/Math.abs(o.edge.x-c.edge.x)),(n!==1||r%s===0)&&l.length>1)for(let o=0;o<l.length;o=o+2){const c=o+1;if(c>=l.length)break;const g=l[o].edge,h=l[c].edge;e.push([[Math.round(g.x),p],[Math.round(h.x),p]])}p+=n,l.forEach(o=>{o.edge.x=o.edge.x+n*o.edge.islope}),r++}return e}function ka(a,s){var n;const t=s.hachureAngle+90;let e=s.hachureGap;e<0&&(e=s.strokeWidth*4),e=Math.round(Math.max(e,.1));let m=1;return s.roughness>=1&&(((n=s.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(m=e),Ur(a,e,t,m||1)}class Wn{constructor(s){this.helper=s}fillPolygons(s,n){return this._fillPolygons(s,n)}_fillPolygons(s,n){const t=ka(s,n);return{type:"fillSketch",ops:this.renderLines(t,n)}}renderLines(s,n){const t=[];for(const e of s)t.push(...this.helper.doubleLineOps(e[0][0],e[0][1],e[1][0],e[1][1],n));return t}}function nn(a){const s=a[0],n=a[1];return Math.sqrt(Math.pow(s[0]-n[0],2)+Math.pow(s[1]-n[1],2))}class Kr extends Wn{fillPolygons(s,n){let t=n.hachureGap;t<0&&(t=n.strokeWidth*4),t=Math.max(t,.1);const e=Object.assign({},n,{hachureGap:t}),m=ka(s,e),l=Math.PI/180*n.hachureAngle,p=[],r=t*.5*Math.cos(l),o=t*.5*Math.sin(l);for(const[g,h]of m)nn([g,h])&&p.push([[g[0]-r,g[1]+o],[...h]],[[g[0]+r,g[1]-o],[...h]]);return{type:"fillSketch",ops:this.renderLines(p,n)}}}class Gr extends Wn{fillPolygons(s,n){const t=this._fillPolygons(s,n),e=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),m=this._fillPolygons(s,e);return t.ops=t.ops.concat(m.ops),t}}class Zr{constructor(s){this.helper=s}fillPolygons(s,n){n=Object.assign({},n,{hachureAngle:0});const t=ka(s,n);return this.dotsOnLines(t,n)}dotsOnLines(s,n){const t=[];let e=n.hachureGap;e<0&&(e=n.strokeWidth*4),e=Math.max(e,.1);let m=n.fillWeight;m<0&&(m=n.strokeWidth/2);const l=e/4;for(const p of s){const r=nn(p),o=r/e,c=Math.ceil(o)-1,g=r-c*e,h=(p[0][0]+p[1][0])/2-e/4,i=Math.min(p[0][1],p[1][1]);for(let d=0;d<c;d++){const u=i+g+d*e,f=h-l+Math.random()*2*l,y=u-l+Math.random()*2*l,w=this.helper.ellipse(f,y,m,m,n);t.push(...w.ops)}}return{type:"fillSketch",ops:t}}}class Yr{constructor(s){this.helper=s}fillPolygons(s,n){const t=ka(s,n);return{type:"fillSketch",ops:this.dashedLine(t,n)}}dashedLine(s,n){const t=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,e=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,m=[];return s.forEach(l=>{const p=nn(l),r=Math.floor(p/(t+e)),o=(p+e-r*(t+e))/2;let c=l[0],g=l[1];c[0]>g[0]&&(c=l[1],g=l[0]);const h=Math.atan((g[1]-c[1])/(g[0]-c[0]));for(let i=0;i<r;i++){const d=i*(t+e),u=d+t,f=[c[0]+d*Math.cos(h)+o*Math.cos(h),c[1]+d*Math.sin(h)+o*Math.sin(h)],y=[c[0]+u*Math.cos(h)+o*Math.cos(h),c[1]+u*Math.sin(h)+o*Math.sin(h)];m.push(...this.helper.doubleLineOps(f[0],f[1],y[0],y[1],n))}}),m}}class Xr{constructor(s){this.helper=s}fillPolygons(s,n){const t=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,e=n.zigzagOffset<0?t:n.zigzagOffset;n=Object.assign({},n,{hachureGap:t+e});const m=ka(s,n);return{type:"fillSketch",ops:this.zigzagLines(m,e,n)}}zigzagLines(s,n,t){const e=[];return s.forEach(m=>{const l=nn(m),p=Math.round(l/(2*n));let r=m[0],o=m[1];r[0]>o[0]&&(r=m[1],o=m[0]);const c=Math.atan((o[1]-r[1])/(o[0]-r[0]));for(let g=0;g<p;g++){const h=g*2*n,i=(g+1)*2*n,d=Math.sqrt(2*Math.pow(n,2)),u=[r[0]+h*Math.cos(c),r[1]+h*Math.sin(c)],f=[r[0]+i*Math.cos(c),r[1]+i*Math.sin(c)],y=[u[0]+d*Math.cos(c+Math.PI/4),u[1]+d*Math.sin(c+Math.PI/4)];e.push(...this.helper.doubleLineOps(u[0],u[1],y[0],y[1],t),...this.helper.doubleLineOps(y[0],y[1],f[0],f[1],t))}}),e}}const U={};function so(a,s){let n=a.fillStyle||"hachure";if(!U[n])switch(n){case"zigzag":U[n]||(U[n]=new Kr(s));break;case"cross-hatch":U[n]||(U[n]=new Gr(s));break;case"dots":U[n]||(U[n]=new Zr(s));break;case"dashed":U[n]||(U[n]=new Yr(s));break;case"zigzag-line":U[n]||(U[n]=new Xr(s));break;default:n="hachure",U[n]||(U[n]=new Wn(s));break}return U[n]}const ao=0,On=1,je=2,Oa={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function no(a){const s=new Array;for(;a!=="";)if(a.match(/^([ \t\r\n,]+)/))a=a.substr(RegExp.$1.length);else if(a.match(/^([aAcChHlLmMqQsStTvVzZ])/))s[s.length]={type:ao,text:RegExp.$1},a=a.substr(RegExp.$1.length);else if(a.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))s[s.length]={type:On,text:`${parseFloat(RegExp.$1)}`},a=a.substr(RegExp.$1.length);else return[];return s[s.length]={type:je,text:""},s}function gn(a,s){return a.type===s}function Un(a){const s=[],n=no(a);let t="BOD",e=0,m=n[e];for(;!gn(m,je);){let l=0;const p=[];if(t==="BOD")if(m.text==="M"||m.text==="m")e++,l=Oa[m.text],t=m.text;else return Un("M0,0"+a);else gn(m,On)?l=Oa[t]:(e++,l=Oa[m.text],t=m.text);if(e+l<n.length){for(let r=e;r<e+l;r++){const o=n[r];if(gn(o,On))p[p.length]=+o.text;else throw new Error("Param not a number: "+t+","+o.text)}if(typeof Oa[t]=="number"){const r={key:t,data:p};s.push(r),e+=l,m=n[e],t==="M"&&(t="L"),t==="m"&&(t="l")}else throw new Error("Bad segment: "+t)}else throw new Error("Path data ended short")}return s}function ze(a){let s=0,n=0,t=0,e=0;const m=[];for(const{key:l,data:p}of a)switch(l){case"M":m.push({key:"M",data:[...p]}),[s,n]=p,[t,e]=p;break;case"m":s+=p[0],n+=p[1],m.push({key:"M",data:[s,n]}),t=s,e=n;break;case"L":m.push({key:"L",data:[...p]}),[s,n]=p;break;case"l":s+=p[0],n+=p[1],m.push({key:"L",data:[s,n]});break;case"C":m.push({key:"C",data:[...p]}),s=p[4],n=p[5];break;case"c":{const r=p.map((o,c)=>c%2?o+n:o+s);m.push({key:"C",data:r}),s=r[4],n=r[5];break}case"Q":m.push({key:"Q",data:[...p]}),s=p[2],n=p[3];break;case"q":{const r=p.map((o,c)=>c%2?o+n:o+s);m.push({key:"Q",data:r}),s=r[2],n=r[3];break}case"A":m.push({key:"A",data:[...p]}),s=p[5],n=p[6];break;case"a":s+=p[5],n+=p[6],m.push({key:"A",data:[p[0],p[1],p[2],p[3],p[4],s,n]});break;case"H":m.push({key:"H",data:[...p]}),s=p[0];break;case"h":s+=p[0],m.push({key:"H",data:[s]});break;case"V":m.push({key:"V",data:[...p]}),n=p[0];break;case"v":n+=p[0],m.push({key:"V",data:[n]});break;case"S":m.push({key:"S",data:[...p]}),s=p[2],n=p[3];break;case"s":{const r=p.map((o,c)=>c%2?o+n:o+s);m.push({key:"S",data:r}),s=r[2],n=r[3];break}case"T":m.push({key:"T",data:[...p]}),s=p[0],n=p[1];break;case"t":s+=p[0],n+=p[1],m.push({key:"T",data:[s,n]});break;case"Z":case"z":m.push({key:"Z",data:[]}),s=t,n=e;break}return m}function He(a){const s=[];let n="",t=0,e=0,m=0,l=0,p=0,r=0;for(const{key:o,data:c}of a){switch(o){case"M":s.push({key:"M",data:[...c]}),[t,e]=c,[m,l]=c;break;case"C":s.push({key:"C",data:[...c]}),t=c[4],e=c[5],p=c[2],r=c[3];break;case"L":s.push({key:"L",data:[...c]}),[t,e]=c;break;case"H":t=c[0],s.push({key:"L",data:[t,e]});break;case"V":e=c[0],s.push({key:"L",data:[t,e]});break;case"S":{let g=0,h=0;n==="C"||n==="S"?(g=t+(t-p),h=e+(e-r)):(g=t,h=e),s.push({key:"C",data:[g,h,...c]}),p=c[0],r=c[1],t=c[2],e=c[3];break}case"T":{const[g,h]=c;let i=0,d=0;n==="Q"||n==="T"?(i=t+(t-p),d=e+(e-r)):(i=t,d=e);const u=t+2*(i-t)/3,f=e+2*(d-e)/3,y=g+2*(i-g)/3,w=h+2*(d-h)/3;s.push({key:"C",data:[u,f,y,w,g,h]}),p=i,r=d,t=g,e=h;break}case"Q":{const[g,h,i,d]=c,u=t+2*(g-t)/3,f=e+2*(h-e)/3,y=i+2*(g-i)/3,w=d+2*(h-d)/3;s.push({key:"C",data:[u,f,y,w,i,d]}),p=g,r=h,t=i,e=d;break}case"A":{const g=Math.abs(c[0]),h=Math.abs(c[1]),i=c[2],d=c[3],u=c[4],f=c[5],y=c[6];g===0||h===0?(s.push({key:"C",data:[t,e,f,y,f,y]}),t=f,e=y):(t!==f||e!==y)&&(Ve(t,e,f,y,g,h,i,d,u).forEach(function(x){s.push({key:"C",data:x})}),t=f,e=y);break}case"Z":s.push({key:"Z",data:[]}),t=m,e=l;break}n=o}return s}function to(a){return Math.PI*a/180}function ha(a,s,n){const t=a*Math.cos(n)-s*Math.sin(n),e=a*Math.sin(n)+s*Math.cos(n);return[t,e]}function Ve(a,s,n,t,e,m,l,p,r,o){const c=to(l);let g=[],h=0,i=0,d=0,u=0;if(o)[h,i,d,u]=o;else{[a,s]=ha(a,s,-c),[n,t]=ha(n,t,-c);const L=(a-n)/2,P=(s-t)/2;let Q=L*L/(e*e)+P*P/(m*m);Q>1&&(Q=Math.sqrt(Q),e=Q*e,m=Q*m);const z=p===r?-1:1,N=e*e,ls=m*m,os=N*ls-N*P*P-ls*L*L,ra=N*P*P+ls*L*L,K=z*Math.sqrt(Math.abs(os/ra));d=K*e*P/m+(a+n)/2,u=K*-m*L/e+(s+t)/2,h=Math.asin(parseFloat(((s-u)/m).toFixed(9))),i=Math.asin(parseFloat(((t-u)/m).toFixed(9))),a<d&&(h=Math.PI-h),n<d&&(i=Math.PI-i),h<0&&(h=Math.PI*2+h),i<0&&(i=Math.PI*2+i),r&&h>i&&(h=h-Math.PI*2),!r&&i>h&&(i=i-Math.PI*2)}let f=i-h;if(Math.abs(f)>Math.PI*120/180){const L=i,P=n,Q=t;r&&i>h?i=h+Math.PI*120/180*1:i=h+Math.PI*120/180*-1,n=d+e*Math.cos(i),t=u+m*Math.sin(i),g=Ve(n,t,P,Q,e,m,l,0,r,[i,L,d,u])}f=i-h;const y=Math.cos(h),w=Math.sin(h),x=Math.cos(i),k=Math.sin(i),b=Math.tan(f/4),T=4/3*e*b,C=4/3*m*b,V=[a,s],W=[a+T*w,s-C*y],rs=[n+T*k,t-C*x],Y=[n,t];if(W[0]=2*V[0]-W[0],W[1]=2*V[1]-W[1],o)return[W,rs,Y].concat(g);{g=[W,rs,Y].concat(g);const L=[];for(let P=0;P<g.length;P+=3){const Q=ha(g[P][0],g[P][1],c),z=ha(g[P+1][0],g[P+1][1],c),N=ha(g[P+2][0],g[P+2][1],c);L.push([Q[0],Q[1],z[0],z[1],N[0],N[1]])}return L}}const eo={randOffset:po,randOffsetWithRange:ro,ellipse:$n,doubleLineOps:oo};function X(a,s,n,t,e){return{type:"path",ops:cs(a,s,n,t,e)}}function ya(a,s,n){const t=(a||[]).length;if(t>2){const e=[];for(let m=0;m<t-1;m++)e.push(...cs(a[m][0],a[m][1],a[m+1][0],a[m+1][1],n));return s&&e.push(...cs(a[t-1][0],a[t-1][1],a[0][0],a[0][1],n)),{type:"path",ops:e}}else if(t===2)return X(a[0][0],a[0][1],a[1][0],a[1][1],n);return{type:"path",ops:[]}}function mo(a,s){return ya(a,!0,s)}function Qe(a,s,n,t,e){const m=[[a,s],[a+n,s],[a+n,s+t],[a,s+t]];return mo(m,e)}function qt(a,s){if(a.length){const t=typeof a[0][0]=="number"?[a]:a,e=$a(t[0],1*(1+s.roughness*.2),s),m=s.disableMultiStroke?[]:$a(t[0],1.5*(1+s.roughness*.22),Jt(s));for(let l=1;l<t.length;l++){const p=t[l];if(p.length){const r=$a(p,1*(1+s.roughness*.2),s),o=s.disableMultiStroke?[]:$a(p,1.5*(1+s.roughness*.22),Jt(s));for(const c of r)c.op!=="move"&&e.push(c);for(const c of o)c.op!=="move"&&m.push(c)}}return{type:"path",ops:e.concat(m)}}return{type:"path",ops:[]}}function $n(a,s,n,t,e){const m=Fe(n,t,e);return En(a,s,e,m).opset}function Fe(a,s,n){const t=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(a/2,2)+Math.pow(s/2,2))/2)),e=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*t)),m=Math.PI*2/e;let l=Math.abs(a/2),p=Math.abs(s/2);const r=1-n.curveFitting;return l+=M(l*r,n),p+=M(p*r,n),{increment:m,rx:l,ry:p}}function En(a,s,n,t){const[e,m]=Kt(t.increment,a,s,t.rx,t.ry,1,t.increment*Ba(.1,Ba(.4,1,n),n),n);let l=qa(e,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[p]=Kt(t.increment,a,s,t.rx,t.ry,1.5,0,n),r=qa(p,null,n);l=l.concat(r)}return{estimatedPoints:m,opset:{type:"path",ops:l}}}function Wt(a,s,n,t,e,m,l,p,r){const o=a,c=s;let g=Math.abs(n/2),h=Math.abs(t/2);g+=M(g*.01,r),h+=M(h*.01,r);let i=e,d=m;for(;i<0;)i+=Math.PI*2,d+=Math.PI*2;d-i>Math.PI*2&&(i=0,d=Math.PI*2);const u=Math.PI*2/r.curveStepCount,f=Math.min(u/2,(d-i)/2),y=Gt(f,o,c,g,h,i,d,1,r);if(!r.disableMultiStroke){const w=Gt(f,o,c,g,h,i,d,1.5,r);y.push(...w)}return l&&(p?y.push(...cs(o,c,o+g*Math.cos(i),c+h*Math.sin(i),r),...cs(o,c,o+g*Math.cos(d),c+h*Math.sin(d),r)):y.push({op:"lineTo",data:[o,c]},{op:"lineTo",data:[o+g*Math.cos(i),c+h*Math.sin(i)]})),{type:"path",ops:y}}function Ut(a,s){const n=He(ze(Un(a))),t=[];let e=[0,0],m=[0,0];for(const{key:l,data:p}of n)switch(l){case"M":{m=[p[0],p[1]],e=[p[0],p[1]];break}case"L":t.push(...cs(m[0],m[1],p[0],p[1],s)),m=[p[0],p[1]];break;case"C":{const[r,o,c,g,h,i]=p;t.push(...io(r,o,c,g,h,i,m,s)),m=[h,i];break}case"Z":t.push(...cs(m[0],m[1],e[0],e[1],s)),m=[e[0],e[1]];break}return{type:"path",ops:t}}function un(a,s){const n=[];for(const t of a)if(t.length){const e=s.maxRandomnessOffset||0,m=t.length;if(m>2){n.push({op:"move",data:[t[0][0]+M(e,s),t[0][1]+M(e,s)]});for(let l=1;l<m;l++)n.push({op:"lineTo",data:[t[l][0]+M(e,s),t[l][1]+M(e,s)]})}}return{type:"fillPath",ops:n}}function sa(a,s){return so(s,eo).fillPolygons(a,s)}function lo(a,s,n,t,e,m,l){const p=a,r=s;let o=Math.abs(n/2),c=Math.abs(t/2);o+=M(o*.01,l),c+=M(c*.01,l);let g=e,h=m;for(;g<0;)g+=Math.PI*2,h+=Math.PI*2;h-g>Math.PI*2&&(g=0,h=Math.PI*2);const i=(h-g)/l.curveStepCount,d=[];for(let u=g;u<=h;u=u+i)d.push([p+o*Math.cos(u),r+c*Math.sin(u)]);return d.push([p+o*Math.cos(h),r+c*Math.sin(h)]),d.push([p,r]),sa([d],l)}function po(a,s){return M(a,s)}function ro(a,s,n){return Ba(a,s,n)}function oo(a,s,n,t,e){return cs(a,s,n,t,e,!0)}function Jt(a){const s=Object.assign({},a);return s.randomizer=void 0,a.seed&&(s.seed=a.seed+1),s}function Be(a){return a.randomizer||(a.randomizer=new Br(a.seed||0)),a.randomizer.next()}function Ba(a,s,n,t=1){return n.roughness*t*(Be(n)*(s-a)+a)}function M(a,s,n=1){return Ba(-a,a,s,n)}function cs(a,s,n,t,e,m=!1){const l=m?e.disableMultiStrokeFill:e.disableMultiStroke,p=Dn(a,s,n,t,e,!0,!1);if(l)return p;const r=Dn(a,s,n,t,e,!0,!0);return p.concat(r)}function Dn(a,s,n,t,e,m,l){const p=Math.pow(a-n,2)+Math.pow(s-t,2),r=Math.sqrt(p);let o=1;r<200?o=1:r>500?o=.4:o=-.0016668*r+1.233334;let c=e.maxRandomnessOffset||0;c*c*100>p&&(c=r/10);const g=c/2,h=.2+Be(e)*.2;let i=e.bowing*e.maxRandomnessOffset*(t-s)/200,d=e.bowing*e.maxRandomnessOffset*(a-n)/200;i=M(i,e,o),d=M(d,e,o);const u=[],f=()=>M(g,e,o),y=()=>M(c,e,o),w=e.preserveVertices;return l?u.push({op:"move",data:[a+(w?0:f()),s+(w?0:f())]}):u.push({op:"move",data:[a+(w?0:M(c,e,o)),s+(w?0:M(c,e,o))]}),l?u.push({op:"bcurveTo",data:[i+a+(n-a)*h+f(),d+s+(t-s)*h+f(),i+a+2*(n-a)*h+f(),d+s+2*(t-s)*h+f(),n+(w?0:f()),t+(w?0:f())]}):u.push({op:"bcurveTo",data:[i+a+(n-a)*h+y(),d+s+(t-s)*h+y(),i+a+2*(n-a)*h+y(),d+s+2*(t-s)*h+y(),n+(w?0:y()),t+(w?0:y())]}),u}function $a(a,s,n){if(!a.length)return[];const t=[];t.push([a[0][0]+M(s,n),a[0][1]+M(s,n)]),t.push([a[0][0]+M(s,n),a[0][1]+M(s,n)]);for(let e=1;e<a.length;e++)t.push([a[e][0]+M(s,n),a[e][1]+M(s,n)]),e===a.length-1&&t.push([a[e][0]+M(s,n),a[e][1]+M(s,n)]);return qa(t,null,n)}function qa(a,s,n){const t=a.length,e=[];if(t>3){const m=[],l=1-n.curveTightness;e.push({op:"move",data:[a[1][0],a[1][1]]});for(let p=1;p+2<t;p++){const r=a[p];m[0]=[r[0],r[1]],m[1]=[r[0]+(l*a[p+1][0]-l*a[p-1][0])/6,r[1]+(l*a[p+1][1]-l*a[p-1][1])/6],m[2]=[a[p+1][0]+(l*a[p][0]-l*a[p+2][0])/6,a[p+1][1]+(l*a[p][1]-l*a[p+2][1])/6],m[3]=[a[p+1][0],a[p+1][1]],e.push({op:"bcurveTo",data:[m[1][0],m[1][1],m[2][0],m[2][1],m[3][0],m[3][1]]})}}else t===3?(e.push({op:"move",data:[a[1][0],a[1][1]]}),e.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[2][0],a[2][1]]})):t===2&&e.push(...Dn(a[0][0],a[0][1],a[1][0],a[1][1],n,!0,!0));return e}function Kt(a,s,n,t,e,m,l,p){const r=p.roughness===0,o=[],c=[];if(r){a=a/4,c.push([s+t*Math.cos(-a),n+e*Math.sin(-a)]);for(let g=0;g<=Math.PI*2;g=g+a){const h=[s+t*Math.cos(g),n+e*Math.sin(g)];o.push(h),c.push(h)}c.push([s+t*Math.cos(0),n+e*Math.sin(0)]),c.push([s+t*Math.cos(a),n+e*Math.sin(a)])}else{const g=M(.5,p)-Math.PI/2;c.push([M(m,p)+s+.9*t*Math.cos(g-a),M(m,p)+n+.9*e*Math.sin(g-a)]);const h=Math.PI*2+g-.01;for(let i=g;i<h;i=i+a){const d=[M(m,p)+s+t*Math.cos(i),M(m,p)+n+e*Math.sin(i)];o.push(d),c.push(d)}c.push([M(m,p)+s+t*Math.cos(g+Math.PI*2+l*.5),M(m,p)+n+e*Math.sin(g+Math.PI*2+l*.5)]),c.push([M(m,p)+s+.98*t*Math.cos(g+l),M(m,p)+n+.98*e*Math.sin(g+l)]),c.push([M(m,p)+s+.9*t*Math.cos(g+l*.5),M(m,p)+n+.9*e*Math.sin(g+l*.5)])}return[c,o]}function Gt(a,s,n,t,e,m,l,p,r){const o=m+M(.1,r),c=[];c.push([M(p,r)+s+.9*t*Math.cos(o-a),M(p,r)+n+.9*e*Math.sin(o-a)]);for(let g=o;g<=l;g=g+a)c.push([M(p,r)+s+t*Math.cos(g),M(p,r)+n+e*Math.sin(g)]);return c.push([s+t*Math.cos(l),n+e*Math.sin(l)]),c.push([s+t*Math.cos(l),n+e*Math.sin(l)]),qa(c,null,r)}function io(a,s,n,t,e,m,l,p){const r=[],o=[p.maxRandomnessOffset||1,(p.maxRandomnessOffset||1)+.3];let c=[0,0];const g=p.disableMultiStroke?1:2,h=p.preserveVertices;for(let i=0;i<g;i++)i===0?r.push({op:"move",data:[l[0],l[1]]}):r.push({op:"move",data:[l[0]+(h?0:M(o[0],p)),l[1]+(h?0:M(o[0],p))]}),c=h?[e,m]:[e+M(o[i],p),m+M(o[i],p)],r.push({op:"bcurveTo",data:[a+M(o[i],p),s+M(o[i],p),n+M(o[i],p),t+M(o[i],p),c[0],c[1]]});return r}function ga(a){return[...a]}function Zt(a,s=0){const n=a.length;if(n<3)throw new Error("A curve must have at least three points.");const t=[];if(n===3)t.push(ga(a[0]),ga(a[1]),ga(a[2]),ga(a[2]));else{const e=[];e.push(a[0],a[0]);for(let p=1;p<a.length;p++)e.push(a[p]),p===a.length-1&&e.push(a[p]);const m=[],l=1-s;t.push(ga(e[0]));for(let p=1;p+2<e.length;p++){const r=e[p];m[0]=[r[0],r[1]],m[1]=[r[0]+(l*e[p+1][0]-l*e[p-1][0])/6,r[1]+(l*e[p+1][1]-l*e[p-1][1])/6],m[2]=[e[p+1][0]+(l*e[p][0]-l*e[p+2][0])/6,e[p+1][1]+(l*e[p][1]-l*e[p+2][1])/6],m[3]=[e[p+1][0],e[p+1][1]],t.push(m[1],m[2],m[3])}}return t}function co(a,s){return Math.sqrt(Ra(a,s))}function Ra(a,s){return Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2)}function ho(a,s,n){const t=Ra(s,n);if(t===0)return Ra(a,s);let e=((a[0]-s[0])*(n[0]-s[0])+(a[1]-s[1])*(n[1]-s[1]))/t;return e=Math.max(0,Math.min(1,e)),Ra(a,Us(s,n,e))}function Us(a,s,n){return[a[0]+(s[0]-a[0])*n,a[1]+(s[1]-a[1])*n]}function go(a,s){const n=a[s+0],t=a[s+1],e=a[s+2],m=a[s+3];let l=3*t[0]-2*n[0]-m[0];l*=l;let p=3*t[1]-2*n[1]-m[1];p*=p;let r=3*e[0]-2*m[0]-n[0];r*=r;let o=3*e[1]-2*m[1]-n[1];return o*=o,l<r&&(l=r),p<o&&(p=o),l+p}function Tn(a,s,n,t){const e=t||[];if(go(a,s)<n){const m=a[s+0];e.length?co(e[e.length-1],m)>1&&e.push(m):e.push(m),e.push(a[s+3])}else{const l=a[s+0],p=a[s+1],r=a[s+2],o=a[s+3],c=Us(l,p,.5),g=Us(p,r,.5),h=Us(r,o,.5),i=Us(c,g,.5),d=Us(g,h,.5),u=Us(i,d,.5);Tn([l,c,i,u],0,n,e),Tn([u,d,h,o],0,n,e)}return e}function uo(a,s){return Wa(a,0,a.length,s)}function Wa(a,s,n,t,e){const m=e||[],l=a[s],p=a[n-1];let r=0,o=1;for(let c=s+1;c<n-1;++c){const g=ho(a[c],l,p);g>r&&(r=g,o=c)}return Math.sqrt(r)>t?(Wa(a,s,o+1,t,m),Wa(a,o,n,t,m)):(m.length||m.push(l),m.push(p)),m}function Pn(a,s=.15,n){const t=[],e=(a.length-1)/3;for(let m=0;m<e;m++){const l=m*3;Tn(a,l,s,t)}return n&&n>0?Wa(t,0,t.length,n):t}function fo(a,s,n){const t=Un(a),e=He(ze(t)),m=[];let l=[],p=[0,0],r=[];const o=()=>{r.length>=4&&l.push(...Pn(r,s)),r=[]},c=()=>{o(),l.length&&(m.push(l),l=[])};for(const{key:h,data:i}of e)switch(h){case"M":c(),p=[i[0],i[1]],l.push(p);break;case"L":o(),l.push([i[0],i[1]]);break;case"C":if(!r.length){const d=l.length?l[l.length-1]:p;r.push([d[0],d[1]])}r.push([i[0],i[1]]),r.push([i[2],i[3]]),r.push([i[4],i[5]]);break;case"Z":o(),l.push([p[0],p[1]]);break}if(c(),!n)return m;const g=[];for(const h of m){const i=uo(h,n);i.length&&g.push(i)}return g}const G="none";class yo{constructor(s){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=s||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Ie()}_o(s){return s?Object.assign({},this.defaultOptions,s):this.defaultOptions}_d(s,n,t){return{shape:s,sets:n||[],options:t||this.defaultOptions}}line(s,n,t,e,m){const l=this._o(m);return this._d("line",[X(s,n,t,e,l)],l)}rectangle(s,n,t,e,m){const l=this._o(m),p=[],r=Qe(s,n,t,e,l);if(l.fill){const o=[[s,n],[s+t,n],[s+t,n+e],[s,n+e]];l.fillStyle==="solid"?p.push(un([o],l)):p.push(sa([o],l))}return l.stroke!==G&&p.push(r),this._d("rectangle",p,l)}ellipse(s,n,t,e,m){const l=this._o(m),p=[],r=Fe(t,e,l),o=En(s,n,l,r);if(l.fill)if(l.fillStyle==="solid"){const c=En(s,n,l,r).opset;c.type="fillPath",p.push(c)}else p.push(sa([o.estimatedPoints],l));return l.stroke!==G&&p.push(o.opset),this._d("ellipse",p,l)}circle(s,n,t,e){const m=this.ellipse(s,n,t,t,e);return m.shape="circle",m}linearPath(s,n){const t=this._o(n);return this._d("linearPath",[ya(s,!1,t)],t)}arc(s,n,t,e,m,l,p=!1,r){const o=this._o(r),c=[],g=Wt(s,n,t,e,m,l,p,!0,o);if(p&&o.fill)if(o.fillStyle==="solid"){const h=Object.assign({},o);h.disableMultiStroke=!0;const i=Wt(s,n,t,e,m,l,!0,!1,h);i.type="fillPath",c.push(i)}else c.push(lo(s,n,t,e,m,l,o));return o.stroke!==G&&c.push(g),this._d("arc",c,o)}curve(s,n){const t=this._o(n),e=[],m=qt(s,t);if(t.fill&&t.fill!==G)if(t.fillStyle==="solid"){const l=qt(s,Object.assign(Object.assign({},t),{disableMultiStroke:!0,roughness:t.roughness?t.roughness+t.fillShapeRoughnessGain:0}));e.push({type:"fillPath",ops:this._mergedShape(l.ops)})}else{const l=[],p=s;if(p.length){const o=typeof p[0][0]=="number"?[p]:p;for(const c of o)c.length<3?l.push(...c):c.length===3?l.push(...Pn(Zt([c[0],c[0],c[1],c[2]]),10,(1+t.roughness)/2)):l.push(...Pn(Zt(c),10,(1+t.roughness)/2))}l.length&&e.push(sa([l],t))}return t.stroke!==G&&e.push(m),this._d("curve",e,t)}polygon(s,n){const t=this._o(n),e=[],m=ya(s,!0,t);return t.fill&&(t.fillStyle==="solid"?e.push(un([s],t)):e.push(sa([s],t))),t.stroke!==G&&e.push(m),this._d("polygon",e,t)}path(s,n){const t=this._o(n),e=[];if(!s)return this._d("path",e,t);s=(s||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const m=t.fill&&t.fill!=="transparent"&&t.fill!==G,l=t.stroke!==G,p=!!(t.simplification&&t.simplification<1),r=p?4-4*(t.simplification||1):(1+t.roughness)/2,o=fo(s,1,r),c=Ut(s,t);if(m)if(t.fillStyle==="solid")if(o.length===1){const g=Ut(s,Object.assign(Object.assign({},t),{disableMultiStroke:!0,roughness:t.roughness?t.roughness+t.fillShapeRoughnessGain:0}));e.push({type:"fillPath",ops:this._mergedShape(g.ops)})}else e.push(un(o,t));else e.push(sa(o,t));return l&&(p?o.forEach(g=>{e.push(ya(g,!1,t))}):e.push(c)),this._d("path",e,t)}opsToPath(s,n){let t="";for(const e of s.ops){const m=typeof n=="number"&&n>=0?e.data.map(l=>+l.toFixed(n)):e.data;switch(e.op){case"move":t+=`M${m[0]} ${m[1]} `;break;case"bcurveTo":t+=`C${m[0]} ${m[1]}, ${m[2]} ${m[3]}, ${m[4]} ${m[5]} `;break;case"lineTo":t+=`L${m[0]} ${m[1]} `;break}}return t.trim()}toPaths(s){const n=s.sets||[],t=s.options||this.defaultOptions,e=[];for(const m of n){let l=null;switch(m.type){case"path":l={d:this.opsToPath(m),stroke:t.stroke,strokeWidth:t.strokeWidth,fill:G};break;case"fillPath":l={d:this.opsToPath(m),stroke:G,strokeWidth:0,fill:t.fill||G};break;case"fillSketch":l=this.fillSketch(m,t);break}l&&e.push(l)}return e}fillSketch(s,n){let t=n.fillWeight;return t<0&&(t=n.strokeWidth/2),{d:this.opsToPath(s),stroke:n.fill||G,strokeWidth:t,fill:G}}_mergedShape(s){return s.filter((n,t)=>t===0?!0:n.op!=="move")}}const qe="http://www.w3.org/2000/svg",wo=800;let dn=null;function xo(){return dn||(dn=new yo().defaultOptions),dn}function fn(a,s,n){return{...xo(),maxRandomnessOffset:2,roughness:a==="highlight"?3:1.5,bowing:1,stroke:"#000",strokeWidth:1.5,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,disableMultiStroke:a!=="double",disableMultiStrokeFill:!1,seed:s,...n}}function ko(a){const s=a.padding;if(s||s===0){if(typeof s=="number")return[s,s,s,s];if(Array.isArray(s)){const n=s;if(n.length)switch(n.length){case 4:return[...n];case 1:return[n[0],n[0],n[0],n[0]];case 2:return[...n,...n];case 3:return[...n,n[1]];default:return[n[0],n[1],n[2],n[3]]}}}return[5,5,5,5]}function vo(a,s,n,t,e,m){const l=[];let p=n.strokeWidth||2;const r=ko(n),o=n.animate===void 0?!0:!!n.animate,c=n.iterations||2,g=n.rtl?1:0,h=fn("single",m,n);switch(n.type){case"underline":{const i=s.y+s.h+r[2];for(let d=g;d<c+g;d++)d%2?l.push(X(s.x+s.w,i,s.x,i,h)):l.push(X(s.x,i,s.x+s.w,i,h));break}case"strike-through":{const i=s.y+s.h/2;for(let d=g;d<c+g;d++)d%2?l.push(X(s.x+s.w,i,s.x,i,h)):l.push(X(s.x,i,s.x+s.w,i,h));break}case"box":{const i=s.x-r[3],d=s.y-r[0],u=s.w+(r[1]+r[3]),f=s.h+(r[0]+r[2]);for(let y=0;y<c;y++)l.push(Qe(i,d,u,f,h));break}case"bracket":{const i=Array.isArray(n.brackets)?n.brackets:n.brackets?[n.brackets]:["right"],d=s.x-r[3]*2,u=s.x+s.w+r[1]*2,f=s.y-r[0]*2,y=s.y+s.h+r[2]*2;for(const w of i){let x;switch(w){case"bottom":x=[[d,s.y+s.h],[d,y],[u,y],[u,s.y+s.h]];break;case"top":x=[[d,s.y],[d,f],[u,f],[u,s.y]];break;case"left":x=[[s.x,f],[d,f],[d,y],[s.x,y]];break;case"right":x=[[s.x+s.w,f],[u,f],[u,y],[s.x+s.w,y]];break}x&&l.push(ya(x,!1,h))}break}case"crossed-off":{const i=s.x,d=s.y,u=i+s.w,f=d+s.h;for(let y=g;y<c+g;y++)y%2?l.push(X(u,f,i,d,h)):l.push(X(i,d,u,f,h));for(let y=g;y<c+g;y++)y%2?l.push(X(i,f,u,d,h)):l.push(X(u,d,i,f,h));break}case"circle":{const i=fn("double",m,n),d=s.w+(r[1]+r[3]),u=s.h+(r[0]+r[2]),f=s.x-r[3]+d/2,y=s.y-r[0]+u/2,w=Math.floor(c/2),x=c-w*2;for(let k=0;k<w;k++)l.push($n(f,y,d,u,i));for(let k=0;k<x;k++)l.push($n(f,y,d,u,h));break}case"highlight":{const i=fn("highlight",m,n);p=s.h*.95;const d=s.y+s.h/2;for(let u=g;u<c+g;u++)u%2?l.push(X(s.x+s.w,d,s.x,d,i)):l.push(X(s.x,d,s.x+s.w,d,i));break}}if(l.length){const i=bo(l),d=[],u=[];let f=0;const y=(w,x,k)=>w.setAttribute(x,k);for(const w of i){const x=document.createElementNS(qe,"path");if(y(x,"d",w),y(x,"fill","none"),y(x,"stroke",n.color||"currentColor"),y(x,"stroke-width",`${p}`),n.opacity!==void 0&&y(x,"style",`opacity:${n.opacity}`),o){const k=x.getTotalLength();d.push(k),f+=k}a.appendChild(x),u.push(x)}if(o){let w=0;for(let x=0;x<u.length;x++){const k=u[x],b=d[x],T=f?e*(b/f):0,C=t+w,V=k.style;V.strokeDashoffset=`${b}`,V.strokeDasharray=`${b}`,V.animation=`rough-notation-dash ${T}ms ease-out ${C}ms forwards`,w+=T}return Yt(e+t)}}return Yt(0)}function Yt(a){return new Promise(s=>setTimeout(s,a))}function bo(a){const s=[];for(const n of a){let t="";for(const e of n.ops){const m=e.data;switch(e.op){case"move":t.trim()&&s.push(t.trim()),t=`M${m[0]} ${m[1]} `;break;case"bcurveTo":t+=`C${m[0]} ${m[1]}, ${m[2]} ${m[3]}, ${m[4]} ${m[5]} `;break;case"lineTo":t+=`L${m[0]} ${m[1]} `;break}}t.trim()&&s.push(t.trim())}return s}function Mo(){if(!window.__rno_kf_s){const a=window.__rno_kf_s=document.createElement("style");a.textContent="@keyframes rough-notation-dash { to { stroke-dashoffset: 0; } }",document.head.appendChild(a)}}var So=Object.defineProperty,_o=(a,s,n)=>s in a?So(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,ns=(a,s,n)=>(_o(a,typeof s!="symbol"?s+"":s,n),n);class Lo{constructor(s,n){ns(this,"_state","unattached"),ns(this,"_config"),ns(this,"_resizing",!1),ns(this,"_ro"),ns(this,"_seed",Ie()),ns(this,"_e"),ns(this,"_svg"),ns(this,"_lastSizes",[]),ns(this,"_animationDelay",0),ns(this,"_resizeListener",()=>{this._resizing||(this._resizing=!0,setTimeout(()=>{this._resizing=!1,this._state==="showing"&&this.haveRectsChanged()&&this.show()},400))}),ns(this,"pendingRefresh"),this._e=s,this._config=JSON.parse(JSON.stringify(n)),this.attach()}getConfig(s){return this._config[s]}setConfig(s,n){this._config[s]!==n&&(this._config[s]=n,this.refresh())}get animate(){return this._config.animate}set animate(s){this._config.animate=s}get animationDuration(){return this._config.animationDuration}set animationDuration(s){this._config.animationDuration=s}get iterations(){return this._config.iterations}set iterations(s){this._config.iterations=s}get color(){return this._config.color}set color(s){this._config.color!==s&&(this._config.color=s,this.refresh())}get class(){return this._config.class}set class(s){this._config.class!==s&&(this._config.class=s,this._svg&&this._svg.setAttribute("class",["rough-annotation",this._config.class||""].filter(Boolean).join(" ")))}get strokeWidth(){return this._config.strokeWidth}set strokeWidth(s){this._config.strokeWidth!==s&&(this._config.strokeWidth=s,this.refresh())}get padding(){return this._config.padding}set padding(s){this._config.padding!==s&&(this._config.padding=s,this.refresh())}attach(){if(this._state==="unattached"&&this._e.parentElement){Mo();const s=this._svg=document.createElementNS(qe,"svg");s.setAttribute("class",["rough-annotation",this._config.class||""].filter(Boolean).join(" "));const n=s.style;n.position="absolute",n.top="0",n.left="0",n.overflow="visible",n.pointerEvents="none",n.width="100px",n.height="100px";const t=this._config.type==="highlight";if(this._e.insertAdjacentElement(t?"beforebegin":"afterend",s),this._state="not-showing",t){const e=window.getComputedStyle(this._e).position;(!e||e==="static")&&(this._e.style.position="relative")}this.attachListeners()}}detachListeners(){window.removeEventListener("resize",this._resizeListener),this._ro&&this._ro.unobserve(this._e)}attachListeners(){this.detachListeners(),window.addEventListener("resize",this._resizeListener,{passive:!0}),!this._ro&&"ResizeObserver"in window&&(this._ro=new window.ResizeObserver(s=>{for(const n of s)n.contentRect&&this._resizeListener()})),this._ro&&this._ro.observe(this._e)}haveRectsChanged(){if(this._lastSizes.length){const s=this.rects();if(s.length===this._lastSizes.length){for(let n=0;n<s.length;n++)if(!this.isSameRect(s[n],this._lastSizes[n]))return!0}else return!0}return!1}isSameRect(s,n){const t=(e,m)=>Math.round(e)===Math.round(m);return t(s.x,n.x)&&t(s.y,n.y)&&t(s.w,n.w)&&t(s.h,n.h)}isShowing(){return this._state!=="not-showing"}refresh(){this.isShowing()&&!this.pendingRefresh&&(this.pendingRefresh=Promise.resolve().then(()=>{this.isShowing()&&this.show(),delete this.pendingRefresh}))}async show(){switch(this._state){case"unattached":break;case"showing":this.hide(),this._svg&&await this.render(this._svg,!0);break;case"not-showing":this.attach(),this._svg&&await this.render(this._svg,!1);break}}hide(){if(this._svg)for(;this._svg.lastChild;)this._svg.removeChild(this._svg.lastChild);this._state="not-showing"}remove(){this._svg&&this._svg.parentElement&&this._svg.parentElement.removeChild(this._svg),this._svg=void 0,this._state="unattached",this.detachListeners()}async render(s,n){let t=this._config;n&&(t=JSON.parse(JSON.stringify(this._config)),t.animate=!1);const e=this.rects();let m=0;e.forEach(o=>m+=o.w);const l=t.animationDuration||wo;let p=0;const r=[];for(let o=0;o<e.length;o++){const c=e[o],g=l*(c.w/m);r.push(vo(s,e[o],t,p+this._animationDelay+(this._config.delay||0),g,this._seed)),p+=g}return this._lastSizes=e,this._state="showing",await Promise.all(r)}rects(){const s=[];if(this._svg)if(this._config.multiline){const n=this._e.getClientRects();for(let t=0;t<n.length;t++)s.push(this.svgRect(this._svg,n[t]))}else s.push(this.svgRect(this._svg,this._e.getBoundingClientRect()));return s}svgRect(s,n){const t=s.getBoundingClientRect(),e=n;return{x:(e.x||e.left)-(t.x||t.left),y:(e.y||e.top)-(t.y||t.top),w:e.width,h:e.height}}}function Ao(a,s){return new Lo(a,s)}function J(a,s){return a.class=[a.class,s].filter(Boolean).join(" "),a}const Xt={box:a=>Object.assign(a,{type:"box"}),circle:a=>Object.assign(a,{type:"circle"}),underline:a=>Object.assign(a,{type:"underline"}),highlight:a=>Object.assign(a,{type:"highlight"}),"strike-through":a=>Object.assign(a,{type:"strike-through"}),"crossed-off":a=>Object.assign(a,{type:"crossed-off"}),bracket:a=>Object.assign(a,{type:"bracket"}),strike:a=>Object.assign(a,{type:"strike-through"}),cross:a=>Object.assign(a,{type:"crossed-off"}),crossed:a=>Object.assign(a,{type:"crossed-off"}),linethrough:a=>Object.assign(a,{type:"strike-through"}),"line-through":a=>Object.assign(a,{type:"strike-through"}),black:a=>J(a,"text-black"),blue:a=>J(a,"text-blue"),cyan:a=>J(a,"text-cyan"),gray:a=>J(a,"text-gray"),green:a=>J(a,"text-green"),indigo:a=>J(a,"text-indigo"),lime:a=>J(a,"text-lime"),orange:a=>J(a,"text-orange"),pink:a=>J(a,"text-pink"),purple:a=>J(a,"text-purple"),red:a=>J(a,"text-red"),teal:a=>J(a,"text-teal"),white:a=>J(a,"text-white"),yellow:a=>J(a,"text-yellow")},Oo=[[/^delay-?(\d+)?$/,(a,s,n)=>{const t=(a[1]?Number.parseInt(a[1]):n)||300;return s.delay=t,s}],[/^(?:op|opacity)-?(\d+)?$/,(a,s,n)=>{const t=(a[1]?Number.parseInt(a[1]):n)||100;return s.opacity=t/100,s}]];function $o(){return{install(a){a.directive("mark",{name:"v-mark",mounted:(s,n)=>{const{isPrintMode:t}=pa(),e=v(()=>{const p=typeof n.value=="object"&&!Array.isArray(n.value)?{...n.value}:{at:n.value};let r={at:p.at};const o=Object.entries(n.modifiers).filter(([g,h])=>{if(Xt[g])return r=Xt[g](r,h),!1;for(const[i,d]of Oo){const u=g.match(i);if(u)return r=d(u,r,h),!1}return!0});o.length&&console.warn("[Slidev] Invalid modifiers for v-mark:",o);const c={...r,...p};return c.type||="underline",t.value&&(c.animationDuration=1),c}),m=Ao(s,e.value),l=Na(s,n,e.value.at);if(!l){m.show();return}s.watchStopHandle=ma(()=>{let p;e.value.class&&(m.class=e.value.class),e.value.color&&(m.color=e.value.color);const r=e.value.at;r===!0?p=!0:r===!1?p=!1:p=l.isActive.value,p!=null&&(p?m.show():m.hide())})},unmounted:s=>{s.watchStopHandle?.()}})}}}function Eo(){return{install(a){const s=km();a.directive("motion",{name:"v-motion",mounted(n,t,e,m){const l=la(t,Ka),p=la(t,Nn),r=la(t,Rn),{currentPage:o,clicks:c,isPrintMode:g}=pa(),h=e.props={...e.props},i={...h.initial,...h.variants?.["slidev-initial"]},d={...h.enter,...h.variants?.["slidev-enter"]},u={...h.leave,...h.variants?.["slidev-leave"]};delete h.initial,delete h.enter,delete h.leave;const f=`${qn()}-`,y=[];for(const x of Object.keys(h))if(x.startsWith("click-")){const k=x.slice(6),b=k.includes("-")?k.split("-").map(Number):+k,T=f+k;y.push({id:T,at:b,variant:{...h[x]},info:l?.value.calculate(b)}),delete h[x]}y.sort((x,k)=>(Array.isArray(x.at)?x.at[0]:x.at)-(Array.isArray(k.at)?k.at[0]:k.at)),s.created(n,t,e,m),s.mounted(n,t,e,m);const w=n.motionInstance;w.clickIds=y.map(x=>x.id),w.set(i),w.watchStopHandle=ss([p,o,c].filter(Boolean),()=>{const x=Re.get(n)?.visibilityState.value??"shown";if(!l?.value||!["slide","presenter"].includes(r?.value??"")){const k={...i,...d};for(const{variant:b}of y)Object.assign(k,b);w.set(k)}else if(g.value||p?.value===o.value)if(x==="shown"){const k={...i,...d};for(const{variant:b,info:T}of y)(!T||T.isActive.value)&&Object.assign(k,b);g.value?w.set(k):w.apply(k)}else w.apply(x==="before"?i:u);else w.apply((p?.value??-1)>o.value?i:u)},{immediate:!0})},unmounted(n){n.motionInstance.watchStopHandle()}})}}}const Do=[Object.values([])[0],Object.values([])[0]].filter(Boolean);function To(){const a=[];function s(n){if(!I.remote||I.remote===n.query.password)return!0;if(I.remote&&n.query.password===void 0){const t=prompt("Enter password");if(I.remote===t)return!0}return n.params.no?{path:`/${n.params.no}`}:{path:""}}return a.push({name:"entry",path:"/entry",component:()=>S(()=>import("./slidev/entry-BKQaNEki.js"),__vite__mapDeps([44,1,3,4,45]),import.meta.url),beforeEnter:s},{name:"overview",path:"/overview",component:()=>S(()=>import("./slidev/overview-MEIn969o.js"),__vite__mapDeps([46,20,1,47,48,49,2,50,51,52,3,4]),import.meta.url),beforeEnter:s},{name:"notes",path:"/notes",component:()=>S(()=>import("./slidev/notes-BERTpUL5.js"),__vite__mapDeps([53,1,47,48,54,51,55,3,4]),import.meta.url),beforeEnter:s},{name:"notes-edit",path:"/notes-edit",component:()=>S(()=>import("./slidev/notes-edit-Cf2d1RoB.js"),__vite__mapDeps([56,1,52,51,55,3,4]),import.meta.url),beforeEnter:s},{name:"presenter",path:"/presenter/:no",component:()=>S(()=>import("./slidev/presenter-BOprgTAJ.js"),__vite__mapDeps([57,1,49,2,50,58,20,51,3,4,59,47,48,54,52,60]),import.meta.url),beforeEnter:s},{path:"/presenter",redirect:{path:"/presenter/1"}}),a.push({name:"play",path:"/:no",component:()=>S(()=>import("./slidev/play-B2Too_UO.js"),__vite__mapDeps([61,1,49,2,50,58,20,51,3,4,59,55,62]),import.meta.url)},{path:"",redirect:{path:"/1"}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>S(()=>import("./slidev/404-_Ykg9Ru9.js"),__vite__mapDeps([63,1,3,4,64]),import.meta.url)}),Do.reduce((n,t)=>t(n),a)}async function Po(a){function s(){document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`)}s(),window.addEventListener("resize",s);const n=vm({history:bm("./"),routes:To()});a.use(n),a.use(jr()),a.use(zr()),a.use($o()),a.use(Fr()),a.use(Eo()),a.use(Sm,{container:"#twoslash-container"});const t={app:a,router:n};for(const e of Nr)await e(t)}async function Co(){const a=Mm(Dr);await Po(a),a.mount("#app")}Co();export{ba as $,Bp as A,Go as B,Da as C,Up as D,Mn as E,si as F,pi as G,Io as H,za as I,Bo as J,ye as K,Qp as L,Sa as M,Jo as N,di as O,ei as P,ti as Q,ts as R,Hp as S,Hr as T,re as U,Dm as V,Ko as W,Ep as X,In as Y,qo as Z,ol as _,pa as a,Wo as a0,Uo as a1,Xo as a2,Yo as a3,hi as a4,ci as a5,ii as a6,as as a7,Pe as a8,Ce as a9,fe as aa,pe as ab,Ho as ac,Tp as ad,Nn as ae,Rn as af,Ka as ag,Pp as ah,ui as ai,qn as aj,ia as ak,oi as al,Dp as am,Vo as an,Np as ao,ve as b,ll as c,gi as d,ue as e,Zo as f,aa as g,Ma as h,Vt as i,Fp as j,Ha as k,mi as l,li as m,ni as n,I as o,jo as p,zo as q,xn as r,tn as s,ri as t,tl as u,Yn as v,Ga as w,ai as x,Qo as y,Fo as z};
