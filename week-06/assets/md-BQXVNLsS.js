import{f as V,r as _,o as f,e as m,g as l,F as A,aj as F,n as x,k as N,t as v,z as d,b as T,w as D,d as E,v as L,x as R,T as w}from"./modules/vue-CmL-H8BW.js";import{u as z,f as q}from"./slidev/context-CmtLiP9g.js";import{_ as G}from"./index-PdnlF-Q_.js";import{_ as H}from"./interactive-ChNxhkpB.js";import"./modules/shiki-DELDah8J.js";const J={class:"ic"},K={class:"ic-bars"},O={class:"ic-bar-label"},Q={class:"ic-idx"},U={class:"ic-info"},W={class:"ic-stat"},X={class:"ic-stat"},Y={class:"ic-stat-value"},Z={key:1,class:"ic-message"},ee={class:"ic-controls"},se=["disabled"],ae=V({__name:"InversionCounter",setup(P){z();const c=_([5,3,8,1,4]),u=_([...c.value]),o=_(0),i=_(null),y=_(new Set);function I(){const a=[],e=[...c.value];for(let s=e.length-1;s>=0;s--)for(let n=0;n<s;n++){let p=0;for(let h=0;h<e.length;h++)for(let b=h+1;b<e.length;b++)e[h]>e[b]&&p++;e[n]>e[n+1]?(a.push({array:[...e],comparing:[n,n+1],isInversion:!0,inversions:p,message:`${e[n]} > ${e[n+1]}: 転倒あり → 交換（転倒数 ${p} → ${p-1}）`}),[e[n],e[n+1]]=[e[n+1],e[n]]):a.push({array:[...e],comparing:[n,n+1],isInversion:!1,inversions:p,message:`${e[n]} ≤ ${e[n+1]}: 転倒なし（転倒数 ${p}）`})}let t=0;for(let s=0;s<e.length;s++)for(let n=s+1;n<e.length;n++)e[s]>e[n]&&t++;return a.push({array:[...e],comparing:[-1,-1],isInversion:!1,inversions:t,message:"ソート完了！ 転倒数 = 0"}),a}const r=_(I()),C=d(()=>o.value>=r.value.length),g=d(()=>o.value===0?null:r.value[o.value-1]);function j(){if(C.value)return;const a=r.value[o.value];if(u.value=[...a.array],a.isInversion&&o.value<r.value.length-1){const e=[...a.array];[e[a.comparing[0]],e[a.comparing[1]]]=[e[a.comparing[1]],e[a.comparing[0]]],u.value=e}else o.value===r.value.length-1&&(u.value=[...a.array]);i.value=a.comparing[0]>=0?a.comparing:null,o.value++}function $(){u.value=[...c.value],o.value=0,i.value=null,y.value=new Set,r.value=I()}function B(){const a=c.value.length,e=Array.from({length:a},(t,s)=>s+1);for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}c.value=e,$()}const k=d(()=>{const a=[],e=c.value;for(let t=0;t<e.length;t++)for(let s=t+1;s<e.length;s++)e[t]>e[s]&&a.push([t,s]);return a}),M=d(()=>Math.max(...u.value,1)),S=d(()=>o.value===0?k.value.length:r.value[Math.min(o.value,r.value.length)-1].inversions);return(a,e)=>(f(),m("div",J,[l("div",K,[(f(!0),m(A,null,F(u.value,(t,s)=>(f(),m("div",{key:s,class:x(["ic-bar-col",{"is-comparing":i.value&&(i.value[0]===s||i.value[1]===s),"is-inversion":g.value?.isInversion&&i.value&&(i.value[0]===s||i.value[1]===s)}])},[l("div",{class:"ic-bar",style:N({height:`${t/M.value*140}px`})},[l("span",O,v(t),1)],4),l("span",Q,v(s),1)],2))),128))]),l("div",U,[l("div",W,[e[0]||(e[0]=l("span",{class:"ic-stat-label"},"転倒数",-1)),l("span",{class:x(["ic-stat-value",{"ic-zero":S.value===0}])},v(S.value),3)]),l("div",X,[e[1]||(e[1]=l("span",{class:"ic-stat-label"},"ステップ",-1)),l("span",Y,v(o.value)+" / "+v(r.value.length),1)])]),g.value?(f(),m("div",{key:0,class:x(["ic-message",{"ic-swap":g.value.isInversion}])},v(g.value.message),3)):(f(),m("div",Z," 初期配列の転倒数: "+v(k.value.length)+"（バブルソートの交換回数と一致） ",1)),l("div",ee,[l("button",{class:"ic-btn",onClick:j,disabled:C.value},"次のステップ",8,se),l("button",{class:"ic-btn ic-reset",onClick:$},"リセット"),l("button",{class:"ic-btn ic-shuffle",onClick:B},"シャッフル")])]))}}),ne=G(ae,[["__scopeId","data-v-e06147c7"]]),ue={__name:"slides.md__slidev_11",setup(P){const{$clicksContext:c,$frontmatter:u}=z();return c.setup(),(o,i)=>{const y=ne;return f(),T(H,L(R(w(q)(w(u),10))),{default:D(()=>[i[0]||(i[0]=l("h2",null,"転倒数を数えてみよう",-1)),E(y)]),_:1},16)}}};export{ue as default};
