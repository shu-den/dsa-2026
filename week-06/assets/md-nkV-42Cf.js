import{f as V,o as _,e as m,g as a,F,aj as M,n as x,k as N,t as v,T as I,r as h,z as d,b as T,w as A,d as D,v as E,x as L}from"./modules/vue-CmL-H8BW.js";import{u as S,f as R}from"./slidev/context-D8_vnREc.js";import{_ as q}from"./index-Bw2gjDD0.js";import{_ as G}from"./interactive-5se1TxmS.js";import"./modules/shiki-DELDah8J.js";const H={class:"ic"},J={class:"ic-bars"},K={class:"ic-bar-label"},O={class:"ic-idx"},Q={class:"ic-info"},U={class:"ic-stat"},W={class:"ic-stat"},X={class:"ic-stat-value"},Y={key:1,class:"ic-message"},Z={class:"ic-controls"},ss=["disabled"],es=V({__name:"InversionCounter",setup(w){S();const r=[5,3,8,1,4],c=h([...r]),i=h(0),l=h(null),y=h(new Set);function z(){const n=[],s=[...r];for(let t=s.length-1;t>=0;t--)for(let e=0;e<t;e++){let p=0;for(let g=0;g<s.length;g++)for(let b=g+1;b<s.length;b++)s[g]>s[b]&&p++;s[e]>s[e+1]?(n.push({array:[...s],comparing:[e,e+1],isInversion:!0,inversions:p,message:`${s[e]} > ${s[e+1]}: 転倒あり → 交換（転倒数 ${p} → ${p-1}）`}),[s[e],s[e+1]]=[s[e+1],s[e]]):n.push({array:[...s],comparing:[e,e+1],isInversion:!1,inversions:p,message:`${s[e]} ≤ ${s[e+1]}: 転倒なし（転倒数 ${p}）`})}let o=0;for(let t=0;t<s.length;t++)for(let e=t+1;e<s.length;e++)s[t]>s[e]&&o++;return n.push({array:[...s],comparing:[-1,-1],isInversion:!1,inversions:o,message:"ソート完了！ 転倒数 = 0"}),n}const u=z(),$=d(()=>i.value>=u.length),f=d(()=>i.value===0?null:u[i.value-1]);function P(){if($.value)return;const n=u[i.value];if(c.value=[...n.array],n.isInversion&&i.value<u.length-1){const s=[...n.array];[s[n.comparing[0]],s[n.comparing[1]]]=[s[n.comparing[1]],s[n.comparing[0]]],c.value=s}else i.value===u.length-1&&(c.value=[...n.array]);l.value=n.comparing[0]>=0?n.comparing:null,i.value++}function B(){c.value=[...r],i.value=0,l.value=null,y.value=new Set}const C=d(()=>{const n=[];for(let s=0;s<r.length;s++)for(let o=s+1;o<r.length;o++)r[s]>r[o]&&n.push([s,o]);return n}),j=d(()=>Math.max(...c.value,1)),k=d(()=>i.value===0?C.value.length:u[Math.min(i.value,u.length)-1].inversions);return(n,s)=>(_(),m("div",H,[a("div",J,[(_(!0),m(F,null,M(c.value,(o,t)=>(_(),m("div",{key:t,class:x(["ic-bar-col",{"is-comparing":l.value&&(l.value[0]===t||l.value[1]===t),"is-inversion":f.value?.isInversion&&l.value&&(l.value[0]===t||l.value[1]===t)}])},[a("div",{class:"ic-bar",style:N({height:`${o/j.value*140}px`})},[a("span",K,v(o),1)],4),a("span",O,v(t),1)],2))),128))]),a("div",Q,[a("div",U,[s[0]||(s[0]=a("span",{class:"ic-stat-label"},"転倒数",-1)),a("span",{class:x(["ic-stat-value",{"ic-zero":k.value===0}])},v(k.value),3)]),a("div",W,[s[1]||(s[1]=a("span",{class:"ic-stat-label"},"ステップ",-1)),a("span",X,v(i.value)+" / "+v(I(u).length),1)])]),f.value?(_(),m("div",{key:0,class:x(["ic-message",{"ic-swap":f.value.isInversion}])},v(f.value.message),3)):(_(),m("div",Y," 初期配列の転倒数: "+v(C.value.length)+"（バブルソートの交換回数と一致） ",1)),a("div",Z,[a("button",{class:"ic-btn",onClick:P,disabled:$.value},"次のステップ",8,ss),a("button",{class:"ic-btn ic-reset",onClick:B},"リセット")])]))}}),ns=q(es,[["__scopeId","data-v-d118cfbe"]]),cs={__name:"slides.md__slidev_11",setup(w){const{$clicksContext:r,$frontmatter:c}=S();return r.setup(),(i,l)=>{const y=ns;return _(),T(G,E(L(I(R)(I(c),10))),{default:A(()=>[l[0]||(l[0]=a("h2",null,"転倒数を数えてみよう",-1)),D(y)]),_:1},16)}}};export{cs as default};
