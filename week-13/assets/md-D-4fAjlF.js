import{f as T,o as l,e as o,g as a,t as v,j,F as _,aj as p,n as k,r as m,Q as G,z as Q,i as q,b as H,w as J,d as K,v as O,x as U,T as F}from"./modules/vue-CCeyAUKo.js";import{u as N,f as W}from"./slidev/context-D5S7-01q.js";import{_ as X}from"./index-p_cRD-N0.js";import"./modules/shiki-0ujfn9a0.js";const Y={class:"dijkstra-sim"},Z={class:"dj-controls"},ee=["disabled"],te={class:"dj-step"},se={viewBox:"0 0 400 280",class:"dj-svg"},ne=["x1","y1","x2","y2"],le=["x","y"],oe=["cx","cy"],ae=["x","y"],re=["x","y","fill"],ie={class:"dj-table"},de={class:"dj-log"},ue=T({__name:"DijkstraSimulator",props:{nodes:{default:()=>[{id:0,label:"S",x:40,y:140},{id:1,label:"A",x:140,y:50},{id:2,label:"B",x:140,y:230},{id:3,label:"C",x:260,y:50},{id:4,label:"D",x:260,y:230},{id:5,label:"G",x:360,y:140}]},edges:{default:()=>[{from:0,to:1,weight:4},{from:0,to:2,weight:2},{from:1,to:2,weight:1},{from:1,to:3,weight:5},{from:2,to:4,weight:8},{from:3,to:5,weight:2},{from:4,to:5,weight:3},{from:2,to:3,weight:10}]},startNode:{default:0}},setup(i){N();const n=i,f=m([]),$=m([]),c=m(new Set),g=m(-1),h=m(null),x=m(0),w=m(!1),S=m([]),P=Q(()=>{const t=new Map;for(const s of n.nodes)t.set(s.id,[]);for(const s of n.edges)t.get(s.from).push({to:s.to,w:s.weight}),t.get(s.to).push({to:s.from,w:s.weight});return t});function V(){const t=[],s=n.nodes.length,e=Array(s).fill(1/0),u=Array(s).fill(null),y=new Set;e[n.startNode]=0,t.push({dist:[...e],prev:[...u],confirmed:new Set(y),current:-1,message:`初期化: dist[${n.nodes[n.startNode].label}] = 0, 他 = ∞`});for(let B=0;B<s;B++){let d=-1,A=1/0;for(let r=0;r<s;r++)!y.has(r)&&e[r]<A&&(A=e[r],d=r);if(d===-1)break;y.add(d),t.push({dist:[...e],prev:[...u],confirmed:new Set(y),current:d,message:`確定: ${n.nodes[d].label} (dist = ${e[d]})`});for(const{to:r,w:E}of P.value.get(d)||[]){if(y.has(r))continue;const C=e[d]+E;C<e[r]&&(e[r]=C,u[r]=d,t.push({dist:[...e],prev:[...u],confirmed:new Set(y),current:d,relaxing:{from:d,to:r},message:`緩和: dist[${n.nodes[r].label}] = ${e[d]} + ${E} = ${C}`}))}}return t}const b=G([]);function D(){f.value=Array(n.nodes.length).fill(1/0),f.value[n.startNode]=0,$.value=Array(n.nodes.length).fill(null),c.value=new Set,g.value=-1,h.value=null,x.value=0,w.value=!1,S.value=[],b.value=V()}D();function L(){if(w.value||x.value>=b.value.length){w.value=!0;return}const t=b.value[x.value];f.value=t.dist,$.value=t.prev,c.value=t.confirmed,g.value=t.current,h.value=t.relaxing||null,S.value.push(t.message),x.value++,x.value>=b.value.length&&(w.value=!0)}function M(t){return t===g.value?"dj-node current":c.value.has(t)?"dj-node confirmed":"dj-node"}function R(t,s){return h.value?.from===t&&h.value?.to===s||h.value?.from===s&&h.value?.to===t?"dj-edge relaxing":c.value.has(t)&&c.value.has(s)?"dj-edge confirmed":"dj-edge"}function I(t){const s=f.value[t];return s===1/0?"INF":String(s)}function z(t){const s=n.nodes[t.from],e=n.nodes[t.to];return{x:(s.x+e.x)/2,y:(s.y+e.y)/2}}return(t,s)=>(l(),o("div",Y,[a("div",Z,[a("button",{class:"dj-btn",onClick:L,disabled:w.value},"次のステップ",8,ee),a("button",{class:"dj-btn dj-reset",onClick:D},"リセット"),a("span",te,"ステップ "+v(x.value)+" / "+v(b.value.length),1)]),(l(),o("svg",se,[j(" Edges "),(l(!0),o(_,null,p(i.edges,(e,u)=>(l(),o("line",{key:`e-${u}`,x1:i.nodes[e.from].x,y1:i.nodes[e.from].y,x2:i.nodes[e.to].x,y2:i.nodes[e.to].y,class:k(R(e.from,e.to))},null,10,ne))),128)),j(" Edge weights "),(l(!0),o(_,null,p(i.edges,(e,u)=>(l(),o("text",{key:`w-${u}`,x:z(e).x,y:z(e).y-6,"text-anchor":"middle","font-size":"13",fill:"var(--dsa-brown)","font-weight":"700"},v(e.weight),9,le))),128)),j(" Nodes "),(l(!0),o(_,null,p(i.nodes,e=>(l(),o("g",{key:e.id,class:k(M(e.id))},[a("circle",{cx:e.x,cy:e.y,r:"22"},null,8,oe),a("text",{x:e.x,y:e.y+1,"text-anchor":"middle","font-size":"15","font-weight":"700","dominant-baseline":"middle"},v(e.label),9,ae),j(" Distance label "),a("text",{x:e.x,y:e.y+38,"text-anchor":"middle","font-size":"12",fill:f.value[e.id]===1/0?"var(--dsa-border)":"var(--dsa-blue)","font-weight":"600"}," d="+v(I(e.id)),9,re)],2))),128))])),j(" Distance table "),a("table",ie,[a("tr",null,[s[0]||(s[0]=a("th",null,"頂点",-1)),(l(!0),o(_,null,p(i.nodes,e=>(l(),o("th",{key:e.id,class:k({"confirmed-th":c.value.has(e.id)})},v(e.label),3))),128))]),a("tr",null,[s[1]||(s[1]=a("td",null,"dist",-1)),(l(!0),o(_,null,p(i.nodes,e=>(l(),o("td",{key:e.id,class:k({confirmed:c.value.has(e.id),current:e.id===g.value})},v(I(e.id)),3))),128))])]),a("div",de,[(l(!0),o(_,null,p(S.value.slice(-3),(e,u)=>(l(),o("div",{key:u,class:k(["dj-log-entry",{latest:u===S.value.slice(-3).length-1}])},v(e),3))),128))])]))}}),ce=X(ue,[["__scopeId","data-v-7ee4fa70"]]),fe={class:"slidev-layout layout-interactive"},ve={__name:"interactive",setup(i){return N(),(n,f)=>(l(),o("div",fe,[q(n.$slots,"default")]))}},ye={__name:"slides.md__slidev_12",setup(i){const{$clicksContext:n,$frontmatter:f}=N();return n.setup(),($,c)=>{const g=ce;return l(),H(ve,O(U(F(W)(F(f),11))),{default:J(()=>[c[0]||(c[0]=a("h2",null,"ダイクストラ法をステップ実行",-1)),K(g)]),_:1},16)}}};export{ye as default};
