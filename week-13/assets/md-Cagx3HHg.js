import{f as R,o,e as a,g as l,t as v,T as N,j,F as _,aj as p,n as $,r as m,z as q,i as P,b as H,w as J,d as K,v as O,x as Q}from"./modules/vue-CCeyAUKo.js";import{u as D,f as U}from"./slidev/context-ZY5ieQU8.js";import{_ as W}from"./index-D9WLVIc7.js";import"./modules/shiki-0ujfn9a0.js";const X={class:"dijkstra-sim"},Y={class:"dj-controls"},Z=["disabled"],ee={class:"dj-step"},te={viewBox:"0 0 400 280",class:"dj-svg"},se=["x1","y1","x2","y2"],ne=["x","y"],oe=["cx","cy"],le=["x","y"],ae=["x","y","fill"],re={class:"dj-table"},ie={class:"dj-log"},de=R({__name:"DijkstraSimulator",props:{nodes:{default:()=>[{id:0,label:"S",x:40,y:140},{id:1,label:"A",x:140,y:50},{id:2,label:"B",x:140,y:230},{id:3,label:"C",x:260,y:50},{id:4,label:"D",x:260,y:230},{id:5,label:"G",x:360,y:140}]},edges:{default:()=>[{from:0,to:1,weight:4},{from:0,to:2,weight:2},{from:1,to:2,weight:1},{from:1,to:3,weight:5},{from:2,to:4,weight:8},{from:3,to:5,weight:2},{from:4,to:5,weight:3},{from:2,to:3,weight:10}]},startNode:{default:0}},setup(i){D();const n=i,f=m([]),S=m([]),c=m(new Set),g=m(-1),h=m(null),x=m(0),w=m(!1),k=m([]),V=q(()=>{const t=new Map;for(const s of n.nodes)t.set(s.id,[]);for(const s of n.edges)t.get(s.from).push({to:s.to,w:s.weight}),t.get(s.to).push({to:s.from,w:s.weight});return t});function L(){const t=[],s=n.nodes.length,e=Array(s).fill(1/0),u=Array(s).fill(null),y=new Set;e[n.startNode]=0,t.push({dist:[...e],prev:[...u],confirmed:new Set(y),current:-1,message:`初期化: dist[${n.nodes[n.startNode].label}] = 0, 他 = ∞`});for(let B=0;B<s;B++){let d=-1,F=1/0;for(let r=0;r<s;r++)!y.has(r)&&e[r]<F&&(F=e[r],d=r);if(d===-1)break;y.add(d),t.push({dist:[...e],prev:[...u],confirmed:new Set(y),current:d,message:`確定: ${n.nodes[d].label} (dist = ${e[d]})`});for(const{to:r,w:E}of V.value.get(d)||[]){if(y.has(r))continue;const C=e[d]+E;C<e[r]&&(e[r]=C,u[r]=d,t.push({dist:[...e],prev:[...u],confirmed:new Set(y),current:d,relaxing:{from:d,to:r},message:`緩和: dist[${n.nodes[r].label}] = ${e[d]} + ${E} = ${C}`}))}}return t}let b=[];function I(){f.value=Array(n.nodes.length).fill(1/0),f.value[n.startNode]=0,S.value=Array(n.nodes.length).fill(null),c.value=new Set,g.value=-1,h.value=null,x.value=0,w.value=!1,k.value=[],b=L()}I();function M(){if(w.value||x.value>=b.length){w.value=!0;return}const t=b[x.value];f.value=t.dist,S.value=t.prev,c.value=t.confirmed,g.value=t.current,h.value=t.relaxing||null,k.value.push(t.message),x.value++,x.value>=b.length&&(w.value=!0)}function T(t){return t===g.value?"dj-node current":c.value.has(t)?"dj-node confirmed":"dj-node"}function G(t,s){return h.value?.from===t&&h.value?.to===s||h.value?.from===s&&h.value?.to===t?"dj-edge relaxing":c.value.has(t)&&c.value.has(s)?"dj-edge confirmed":"dj-edge"}function z(t){const s=f.value[t];return s===1/0?"INF":String(s)}function A(t){const s=n.nodes[t.from],e=n.nodes[t.to];return{x:(s.x+e.x)/2,y:(s.y+e.y)/2}}return(t,s)=>(o(),a("div",X,[l("div",Y,[l("button",{class:"dj-btn",onClick:M,disabled:w.value},"次のステップ",8,Z),l("button",{class:"dj-btn dj-reset",onClick:I},"リセット"),l("span",ee,"ステップ "+v(x.value)+" / "+v(N(b).length),1)]),(o(),a("svg",te,[j(" Edges "),(o(!0),a(_,null,p(i.edges,(e,u)=>(o(),a("line",{key:`e-${u}`,x1:i.nodes[e.from].x,y1:i.nodes[e.from].y,x2:i.nodes[e.to].x,y2:i.nodes[e.to].y,class:$(G(e.from,e.to))},null,10,se))),128)),j(" Edge weights "),(o(!0),a(_,null,p(i.edges,(e,u)=>(o(),a("text",{key:`w-${u}`,x:A(e).x,y:A(e).y-6,"text-anchor":"middle","font-size":"13",fill:"#804000","font-weight":"700"},v(e.weight),9,ne))),128)),j(" Nodes "),(o(!0),a(_,null,p(i.nodes,e=>(o(),a("g",{key:e.id,class:$(T(e.id))},[l("circle",{cx:e.x,cy:e.y,r:"22"},null,8,oe),l("text",{x:e.x,y:e.y+1,"text-anchor":"middle","font-size":"15","font-weight":"700","dominant-baseline":"middle"},v(e.label),9,le),j(" Distance label "),l("text",{x:e.x,y:e.y+38,"text-anchor":"middle","font-size":"12",fill:f.value[e.id]===1/0?"#ccc":"#005AFF","font-weight":"600"}," d="+v(z(e.id)),9,ae)],2))),128))])),j(" Distance table "),l("table",re,[l("tr",null,[s[0]||(s[0]=l("th",null,"頂点",-1)),(o(!0),a(_,null,p(i.nodes,e=>(o(),a("th",{key:e.id,class:$({"confirmed-th":c.value.has(e.id)})},v(e.label),3))),128))]),l("tr",null,[s[1]||(s[1]=l("td",null,"dist",-1)),(o(!0),a(_,null,p(i.nodes,e=>(o(),a("td",{key:e.id,class:$({confirmed:c.value.has(e.id),current:e.id===g.value})},v(z(e.id)),3))),128))])]),l("div",ie,[(o(!0),a(_,null,p(k.value.slice(-3),(e,u)=>(o(),a("div",{key:u,class:$(["dj-log-entry",{latest:u===k.value.slice(-3).length-1}])},v(e),3))),128))])]))}}),ue=W(de,[["__scopeId","data-v-3a19b53f"]]),ce={class:"slidev-layout layout-interactive"},fe={class:"interactive-container"},ve={__name:"interactive",setup(i){return D(),(n,f)=>(o(),a("div",ce,[l("h2",null,[P(n.$slots,"title")]),l("div",fe,[P(n.$slots,"default")])]))}},ye={__name:"slides.md__slidev_9",setup(i){const{$clicksContext:n,$frontmatter:f}=D();return n.setup(),(S,c)=>{const g=ue;return o(),H(ve,O(Q(N(U)(N(f),8))),{default:J(()=>[c[0]||(c[0]=l("h2",null,"ダイクストラ法をステップ実行",-1)),K(g)]),_:1},16)}}};export{ye as default};
