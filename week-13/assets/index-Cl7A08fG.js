const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./md-DTrS8ePL.js","./modules/vue-CCeyAUKo.js","./slidev/context-C0iQpp7S.js","./modules/shiki-0ujfn9a0.js","./modules/shiki-UqVAgQbi.css","./md-CGQltsdt.js","./md-B5VQTZeM.js","./default-Dn08XcWF.js","./md-Bh5p3dWF.js","./section-divider-CRgPBZHH.js","./md-kIu1YZ50.js","./md-C6w-wdhh.js","./md-D-VfIilY.js","./md-BQBB2PGa.js","./md-uYYyS8Xb.js","./slidev/md-BJb-VGP-.js","./modules/unplugin-icons-DMFwnmaC.js","./md-pIb3ICfv.js","./md-D-Wa5qxl.js","./md-DgyvIXBQ.css","./md-DG9iJm2H.js","./md-Cq3banLZ.js","./md-CXl4t-oK.js","./md-BBFivnLX.js","./md-CfWSyCZa.js","./md-bihMRq3d.js","./md-BrQ9nzGS.js","./md-Cio1nbtT.js","./md-CAmDZmel.js","./md-B58lJmpI.js","./md-DRD6QFNB.js","./question-ClCyM25T.js","./md-U2GsgVde.js","./md-C7wgIPm6.js","./md-B3nz39uG.js","./slidev/entry-BNL1IaeT.js","./entry-CyMt_iSL.css","./slidev/overview-4QDB9-dr.js","./slidev/NoteDisplay.vue_vue_type_style_index_0_lang-DWZcpBUN.js","./NoteDisplay-DggBAdha.css","./slidev/SlideWrapper-D4Oo8e8Z.js","./SlideWrapper-4Jte_8x4.css","./slidev/IconButton.vue_vue_type_script_setup_true_lang-DsmzI6NF.js","./slidev/useSlideInfo-B4F8QOkG.js","./slidev/notes-DHJxC5Sg.js","./slidev/TimerBar.vue_vue_type_script_setup_true_lang-DdamKNRR.js","./slidev/Modal.vue_vue_type_script_setup_true_lang-D8lmX8rK.js","./slidev/notes-edit-DRnTAfMe.js","./slidev/presenter-BmkaaQ54.js","./slidev/shortcuts-DEj9cpPn.js","./shortcuts-B4GtsM5T.css","./presenter-Bs6wyjjy.css","./slidev/play-B5igPiz9.js","./play-D_7yfuao.css","./slidev/404-B832hs3p.js","./404-poZcRPAh.css"])))=>i.map(i=>d[i]);
import{z as b,A as Ea,B as le,C as $a,D as In,E as Yt,G as Ta,H as Pa,I as Da,r as A,J as Vn,K as tt,L as Bn,M as C,N as Ra,O as Na,o as Cs,e as ce,t as ja,f as Hn,F as Ia,g as Fe,j as Va,P as L,Q as Se,R as Ba,S as Vs,p as Ha,T as Fa,U as za,V as qa,W as q,X as Ga,Y as Fn,Z as Wa,_ as Ua,$ as Bs,a0 as Ja,a1 as zn,a2 as Ka,a3 as Qa,a4 as Ya,a5 as qn,b as Za,a as Xa,a6 as tr,a7 as sr,a8 as er,a9 as nr,aa as ar,ab as rr,ac as or,c as ir}from"./modules/vue-CCeyAUKo.js";import{T as lr}from"./modules/shiki-0ujfn9a0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=e(a);fetch(a.href,r)}})();const j={theme:"../theme",title:"DSA 第13回: 最短経路問題",titleTemplate:"%s - Slidev",addons:[],remoteAssets:!1,monaco:!0,monacoTypesSource:"local",monacoTypesAdditionalPackages:[],monacoTypesIgnorePackages:[],monacoRunAdditionalDeps:[],monacoRunUseStrict:!0,download:!1,export:{},info:`<p>データ構造とアルゴリズム 2026年度 第13回
関西大学 ビジネスデータサイエンス学部 / 伝住 周平</p>
`,highlighter:"shiki",twoslash:!0,lineNumbers:!1,colorSchema:"light",routerMode:"hash",aspectRatio:1.7777777777777777,canvasWidth:980,exportFilename:"",selectable:!1,themeConfig:{},fonts:{sans:['"Noto Sans JP"','"sans-serif"',"ui-sans-serif","system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"',"sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:['"JetBrains Mono"','"monospace"',"ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"],webfonts:["Noto Sans JP","sans-serif","JetBrains Mono","monospace"],provider:"google",local:[],italic:!1,weights:["200","400","600"]},favicon:"https://cdn.jsdelivr.net/gh/slidevjs/slidev/assets/favicon.png",drawings:{enabled:!1,persist:!1,presenterOnly:!1,syncAll:!0},plantUmlServer:"https://www.plantuml.com/plantuml",codeCopy:!0,magicMoveCopy:!0,author:"",record:"dev",css:"unocss",presenter:!0,browserExporter:"dev",htmlAttrs:{},transition:"slide-left",editor:!0,contextMenu:null,wakeLock:!0,mdc:!1,seoMeta:{},notesAutoRuby:{},duration:"30min",timer:"stopwatch",magicMoveDuration:800,preloadImages:!0,layout:"title",slidesTitle:"DSA 第13回: 最短経路問題 - Slidev"};function pe(s,t,e){return Math.min(e,Math.max(t,s))}function cr(...s){return mr(s).reduce((t,e)=>t+e,0)}function pr(s){return s=s??[],Array.isArray(s)?s:[s]}function mr(s){return pr(s).flat(1)}function hr(s){return Array.from(new Set(s))}function ze(...s){let t,e,n;s.length===1?(t=0,n=1,[e]=s):[t,e,n=1]=s;const a=[];let r=t;for(;r<e;)a.push(r),r+=n||1;return a}function ur(s){return s!=null}function dr(s,t){return Object.fromEntries(Object.entries(s).map(([e,n])=>t(e,n)).filter(ur))}const rc="build",Gn=b(()=>j.aspectRatio),Wn=b(()=>j.canvasWidth),fr=b(()=>Math.ceil(Wn.value/Gn.value)),gr=b(()=>dr(j.themeConfig||{},(s,t)=>[`--slidev-theme-${s}`,t])),Ks=j.slidesTitle,oc="./#/",yr=[Object.values([])[0],Object.values([])[0]].filter(Boolean),wr=new Set(["link","style","script","noscript"]),vr=new Set(["title","titleTemplate","script","style","noscript"]),qe=new Set(["base","meta","link","style","script","noscript"]),kr=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),br=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),xr=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),Mr=new Set(["templateParams","htmlAttrs","bodyAttrs"]),_r=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function me(s,t={},e){for(const n in s){const a=s[n],r=e?`${e}:${n}`:n;typeof a=="object"&&a!==null?me(a,t,r):typeof a=="function"&&(t[r]=a)}return t}const Un=(()=>{if(console.createTask)return console.createTask;const s={run:t=>t()};return()=>s})();function Jn(s,t,e,n){for(let a=e;a<s.length;a+=1)try{const r=n?n.run(()=>s[a](...t)):s[a](...t);if(r instanceof Promise)return r.then(()=>Jn(s,t,a+1,n))}catch(r){return Promise.reject(r)}}function Sr(s,t,e){if(s.length>0)return Jn(s,t,0,Un(e))}function Lr(s,t,e){if(s.length>0){const n=Un(e);return Promise.all(s.map(a=>n.run(()=>a(...t))))}}function Qs(s,t){for(const e of[...s])e(t)}var Ar=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(s,t,e={}){if(!s||typeof t!="function")return()=>{};const n=s;let a;for(;this._deprecatedHooks[s];)a=this._deprecatedHooks[s],s=a.to;if(a&&!e.allowDeprecated){let r=a.message;r||(r=`${n} hook has been deprecated`+(a.to?`, please use ${a.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(r)||(console.warn(r),this._deprecatedMessages.add(r))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+s.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[s]=this._hooks[s]||[],this._hooks[s].push(t),()=>{t&&(this.removeHook(s,t),t=void 0)}}hookOnce(s,t){let e,n=(...a)=>(typeof e=="function"&&e(),e=void 0,n=void 0,t(...a));return e=this.hook(s,n),e}removeHook(s,t){const e=this._hooks[s];if(e){const n=e.indexOf(t);n!==-1&&e.splice(n,1),e.length===0&&(this._hooks[s]=void 0)}}deprecateHook(s,t){this._deprecatedHooks[s]=typeof t=="string"?{to:t}:t;const e=this._hooks[s]||[];this._hooks[s]=void 0;for(const n of e)this.hook(s,n)}deprecateHooks(s){for(const t in s)this.deprecateHook(t,s[t])}addHooks(s){const t=me(s),e=Object.keys(t).map(n=>this.hook(n,t[n]));return()=>{for(const n of e)n();e.length=0}}removeHooks(s){const t=me(s);for(const e in t)this.removeHook(e,t[e])}removeAllHooks(){this._hooks={}}callHook(s,...t){return this.callHookWith(Sr,s,t)}callHookParallel(s,...t){return this.callHookWith(Lr,s,t)}callHookWith(s,t,e){const n=this._before||this._after?{name:t,args:e,context:{}}:void 0;this._before&&Qs(this._before,n);const a=s(this._hooks[t]?[...this._hooks[t]]:[],e,t);return a instanceof Promise?a.finally(()=>{this._after&&n&&Qs(this._after,n)}):(this._after&&n&&Qs(this._after,n),a)}beforeEach(s){return this._before=this._before||[],this._before.push(s),()=>{if(this._before!==void 0){const t=this._before.indexOf(s);t!==-1&&this._before.splice(t,1)}}}afterEach(s){return this._after=this._after||[],this._after.push(s),()=>{if(this._after!==void 0){const t=this._after.indexOf(s);t!==-1&&this._after.splice(t,1)}}}};function Or(){return new Ar}const Cr=["name","property","http-equiv"],Er=new Set(["viewport","description","keywords","robots"]);function Kn(s){const t=s.split(":");return t.length?_r.has(t[1]):!1}function he(s){const{props:t,tag:e}=s;if(br.has(e))return e;if(e==="link"&&t.rel==="canonical")return"canonical";const n=t.hreflang||t.type;if(e==="link"&&t.rel==="alternate"&&n)return`alternate:${n}`;if(t.charset)return"charset";if(s.tag==="meta"){for(const a of Cr)if(t[a]!==void 0){const r=t[a],o=r&&typeof r=="string"&&r.includes(":"),i=r&&Er.has(r),c=!(o||i)&&s.key?`:key:${s.key}`:"";return`${e}:${r}${c}`}}if(s.key)return`${e}:key:${s.key}`;if(t.id)return`${e}:id:${t.id}`;if(vr.has(e)){const a=s.textContent||s.innerHTML;if(a)return`${e}:content:${a}`}}function Ge(s){const t=s._h||s._d;if(t)return t;const e=s.textContent||s.innerHTML;return e||`${s.tag}:${Object.entries(s.props).map(([n,a])=>`${n}:${String(a)}`).join(",")}`}function Es(s,t,e){typeof s==="function"&&(!e||e!=="titleTemplate"&&!(e[0]==="o"&&e[1]==="n"))&&(s=s());const a=t?t(e,s):s;if(Array.isArray(a))return a.map(r=>Es(r,t));if(a?.constructor===Object){const r={};for(const o of Object.keys(a))r[o]=Es(a[o],t,o);return r}return a}function $r(s,t){const e=s==="style"?new Map:new Set;function n(a){if(a==null||a===void 0)return;const r=String(a).trim();if(r)if(s==="style"){const[o,...i]=r.split(":").map(l=>l?l.trim():"");o&&i.length&&e.set(o,i.join(":"))}else r.split(" ").filter(Boolean).forEach(o=>e.add(o))}return typeof t=="string"?s==="style"?t.split(";").forEach(n):n(t):Array.isArray(t)?t.forEach(a=>n(a)):t&&typeof t=="object"&&Object.entries(t).forEach(([a,r])=>{r&&r!=="false"&&(s==="style"?e.set(String(a).trim(),String(r)):n(a))}),e}function Qn(s,t){return s.props=s.props||{},t?s.tag==="templateParams"?(s.props=t,s):(Object.entries(t).forEach(([e,n])=>{if(n===null){s.props[e]=null;return}if(e==="class"||e==="style"){s.props[e]=$r(e,n);return}if(xr.has(e)){if(["textContent","innerHTML"].includes(e)&&typeof n=="object"){let i=t.type;if(t.type||(i="application/json"),!i?.endsWith("json")&&i!=="speculationrules")return;t.type=i,s.props.type=i,s[e]=JSON.stringify(n)}else s[e]=n;return}const a=String(n),r=e.startsWith("data-"),o=s.tag==="meta"&&e==="content";a==="true"||a===""?s.props[e]=r||o?a:!0:!n&&r&&a==="false"?s.props[e]="false":n!==void 0&&(s.props[e]=n)}),s):s}function Tr(s,t){const e=typeof t=="object"&&typeof t!="function"?t:{[s==="script"||s==="noscript"||s==="style"?"innerHTML":"textContent"]:t},n=Qn({tag:s,props:{}},e);return n.key&&wr.has(n.tag)&&(n.props["data-hid"]=n._h=n.key),n.tag==="script"&&typeof n.innerHTML=="object"&&(n.innerHTML=JSON.stringify(n.innerHTML),n.props.type=n.props.type||"application/json"),Array.isArray(n.props.content)?n.props.content.map(a=>({...n,props:{...n.props,content:a}})):n}function Pr(s,t){if(!s)return[];typeof s=="function"&&(s=s());const e=(a,r)=>{for(let o=0;o<t.length;o++)r=t[o](a,r);return r};s=e(void 0,s);const n=[];return s=Es(s,e),Object.entries(s||{}).forEach(([a,r])=>{if(r!==void 0)for(const o of Array.isArray(r)?r:[r])n.push(Tr(a,o))}),n.flat()}const We=(s,t)=>s._w===t._w?s._p-t._p:s._w-t._w,Ue={base:-10,title:10},Dr={critical:-8,high:-1,low:2},Je={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},Rr=/@import/,ss=s=>s===""||s===!0;function Nr(s,t){if(typeof t.tagPriority=="number")return t.tagPriority;let e=100;const n=Dr[t.tagPriority]||0,a=s.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:Je;if(t.tag in Ue)e=Ue[t.tag];else if(t.tag==="meta"){const r=t.props["http-equiv"]==="content-security-policy"?"content-security-policy":t.props.charset?"charset":t.props.name==="viewport"?"viewport":null;r&&(e=Je.meta[r])}else if(t.tag==="link"&&t.props.rel)e=a.link[t.props.rel];else if(t.tag==="script"){const r=String(t.props.type);ss(t.props.async)?e=a.script.async:t.props.src&&!ss(t.props.defer)&&!ss(t.props.async)&&r!=="module"&&!r.endsWith("json")||t.innerHTML&&!r.endsWith("json")?e=a.script.sync:(ss(t.props.defer)&&t.props.src&&!ss(t.props.async)||r==="module")&&(e=a.script.defer)}else t.tag==="style"&&(e=t.innerHTML&&Rr.test(t.innerHTML)?a.style.imported:a.style.sync);return(e||100)+n}function Ke(s,t){const e=typeof t=="function"?t(s):t,n=e.key||String(s.plugins.size+1);s.plugins.get(n)||(s.plugins.set(n,e),s.hooks.addHooks(e.hooks||{}))}function jr(s={}){const t=Or();t.addHooks(s.hooks||{});const e=!s.document,n=new Map,a=new Map,r=new Set,o={_entryCount:1,plugins:a,dirty:!1,resolvedOptions:s,hooks:t,ssr:e,entries:n,headEntries(){return[...n.values()]},use:i=>Ke(o,i),push(i,l){const c={...l||{}};delete c.head;const m=c._index??o._entryCount++,u={_i:m,input:i,options:c},h={_poll(p=!1){o.dirty=!0,!p&&r.add(m),t.callHook("entries:updated",o)},dispose(){n.delete(m)&&o.invalidate()},patch(p){(!c.mode||c.mode==="server"&&e||c.mode==="client"&&!e)&&(u.input=p,n.set(m,u),h._poll())}};return h.patch(i),h},async resolveTags(){const i={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await t.callHook("entries:resolve",i);r.size;){const h=r.values().next().value;r.delete(h);const p=n.get(h);if(p){const f={tags:Pr(p.input,s.propResolvers||[]).map(d=>Object.assign(d,p.options)),entry:p};await t.callHook("entries:normalize",f),p._tags=f.tags.map((d,g)=>(d._w=Nr(o,d),d._p=(p._i<<10)+g,d._d=he(d),d))}}let l=!1;i.entries.flatMap(h=>(h._tags||[]).map(p=>({...p,props:{...p.props}}))).sort(We).reduce((h,p)=>{const f=String(p._d||p._p);if(!h.has(f))return h.set(f,p);const d=h.get(f);if((p?.tagDuplicateStrategy||(Mr.has(p.tag)?"merge":null)||(p.key&&p.key===d.key?"merge":null))==="merge"){const y={...d.props};Object.entries(p.props).forEach(([w,v])=>y[w]=w==="style"?new Map([...d.props.style||new Map,...v]):w==="class"?new Set([...d.props.class||new Set,...v]):v),h.set(f,{...p,props:y})}else p._p>>10===d._p>>10&&p.tag==="meta"&&Kn(f)?(h.set(f,Object.assign([...Array.isArray(d)?d:[d],p],p)),l=!0):(p._w===d._w?p._p>d._p:p?._w<d?._w)&&h.set(f,p);return h},i.tagMap);const c=i.tagMap.get("title"),m=i.tagMap.get("titleTemplate");if(o._title=c?.textContent,m){const h=m?.textContent;if(o._titleTemplate=h,h){let p=typeof h=="function"?h(c?.textContent):h;typeof p=="string"&&!o.plugins.has("template-params")&&(p=p.replace("%s",c?.textContent||"")),c?p===null?i.tagMap.delete("title"):i.tagMap.set("title",{...c,textContent:p}):(m.tag="title",m.textContent=p)}}i.tags=Array.from(i.tagMap.values()),l&&(i.tags=i.tags.flat().sort(We)),await t.callHook("tags:beforeResolve",i),await t.callHook("tags:resolve",i),await t.callHook("tags:afterResolve",i);const u=[];for(const h of i.tags){const{innerHTML:p,tag:f,props:d}=h;if(kr.has(f)&&!(Object.keys(d).length===0&&!h.innerHTML&&!h.textContent)&&!(f==="meta"&&!d.content&&!d["http-equiv"]&&!d.charset)){if(f==="script"&&p){if(String(d.type).endsWith("json")){const g=typeof p=="string"?p:JSON.stringify(p);h.innerHTML=g.replace(/</g,"\\u003C")}else typeof p=="string"&&(h.innerHTML=p.replace(new RegExp(`</${f}`,"g"),`<\\/${f}`));h._d=he(h)}u.push(h)}}return u},invalidate(){for(const i of n.values())r.add(i._i);o.dirty=!0,t.callHook("entries:updated",o)}};return(s?.plugins||[]).forEach(i=>Ke(o,i)),o.hooks.callHook("init",o),s.init?.forEach(i=>i&&o.push(i)),o}const Ir=(s,t)=>Ea(t)?le(t):t,Yn="usehead";function Vr(s){return{install(e){e.config.globalProperties.$unhead=s,e.config.globalProperties.$head=s,e.provide(Yn,s)}}.install}function Br(){if($a()){const s=In(Yn);if(s)return s}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function Hr(s,t={}){const e=t.head||Br();return e.ssr?e.push(s||{},t):Fr(e,s,t)}function Fr(s,t,e={}){const n=A(!1);let a;return Yt(()=>{const o=n.value?{}:Es(t,Ir);a?a.patch(o):a=s.push(o,e)}),Vn()&&(Ta(()=>{a.dispose()}),Pa(()=>{n.value=!0}),Da(()=>{n.value=!1})),a}function ue(s){if(s===!1||s==="false")return null;if(s==null||s===!0||s==="true")return"+1";if(typeof s=="string"&&"+-".includes(s[0]))return s;const t=+s;return Number.isNaN(t)?(console.error(`Invalid "at" prop value: ${s}`),null):t<=0?(console.warn(`[Slidev] "at" prop value must be greater than 0, but got ${s}, has been set to 1`),1):t}function zr(s){return Array.isArray(s)?[ue(s[0]),ue(s[1])]:null}function Zn(s,t=0,e){const n=A(!1);let a=new Map,r=new Map;const o={get current(){return pe(+s.value,t,o.total)},set current(i){s.value=n.value?pe(i,t,o.total):i},clicksStart:t,get relativeSizeMap(){return a},get maxMap(){return r},get isMounted(){return n.value},setup(){Bn(()=>{n.value=!0,r=C(r),Ra(s)||(o.current=s.value)}),Na(()=>{n.value=!1,a=new Map,r=new Map})},calculateSince(i,l=1){const c=ue(i);if(c==null)return null;let m,u,h;if(typeof c=="string"){const p=o.currentOffset,f=+c;m=p+f,u=p+f+l-1,h=f+l-1}else m=c,u=c+l-1,h=0;return{start:m,end:+Number.POSITIVE_INFINITY,max:u,delta:h,currentOffset:b(()=>o.current-m),isCurrent:b(()=>o.current===m),isActive:b(()=>o.current>=m)}},calculateRange(i){const l=zr(i);if(l==null)return null;const[c,m]=l;let u,h,p;return typeof c=="string"?(u=o.currentOffset+ +c,p=+c):(u=c,p=0),typeof m=="string"?(h=u+ +m,p+=+m):h=m,{start:u,end:h,max:h,delta:p,currentOffset:b(()=>o.current-u),isCurrent:b(()=>o.current===u),isActive:b(()=>u<=o.current&&o.current<h)}},calculate(i){return Array.isArray(i)?o.calculateRange(i):o.calculateSince(i)},register(i,l){if(!l)return;const{delta:c,max:m}=l;a.set(i,c),r.set(i,m)},unregister(i){a.delete(i),r.delete(i)},get currentOffset(){return cr(...a.values())},get total(){return e??(n.value?Math.max(0,...r.values()):0)}};return o}function qr(s,t=0){const e=s?.meta.slide?.frontmatter.clicksStart??0,n=A(Math.max(le(t),e));return tt(()=>le(t),a=>{n.value=Math.max(a,e)}),Zn(n,e,s?.meta?.clicks)}const Gr="modulepreload",Wr=function(s,t){return new URL(s,t).href},Qe={},S=function(t,e,n){let a=Promise.resolve();if(e&&e.length>0){let c=function(m){return Promise.all(m.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");a=c(e.map(m=>{if(m=Wr(m,n),m in Qe)return;Qe[m]=!0;const u=m.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(n)for(let f=o.length-1;f>=0;f--){const d=o[f];if(d.href===m&&(!u||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Gr,u||(p.as="script"),p.crossOrigin="",p.href=m,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((f,d)=>{p.addEventListener("load",f),p.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${m}`)))})}))}function r(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return a.then(o=>{for(const i of o||[])i.status==="rejected"&&r(i.reason);return t().catch(r)})},Ur=(s,t)=>{const e=s.__vccOpts||s;for(const[n,a]of t)e[n]=a;return e},Jr={},Kr={class:"px-4 py-10 text-center text-red-700 dark:text-red-500 font-bold font-mono"};function Qr(s,t){return Cs(),ce("div",Kr,ja("Failed to fetch this slide. Please check your network connection."))}const E=Ur(Jr,[["render",Qr]]),Yr={class:"h-full w-full flex items-center justify-center gap-2 slidev-slide-loading"},Zr=Hn({__name:"SlideLoading",setup(s){const t=A(!1);return Bn(()=>{setTimeout(()=>{t.value=!0},200)}),(e,n)=>(Cs(),ce("div",Yr,[t.value?(Cs(),ce(Ia,{key:0},[n[0]||(n[0]=Fe("div",{class:"i-svg-spinners-90-ring-with-bg text-xl"},null,-1)),n[1]||(n[1]=Fe("div",null,"Loading slide...",-1))],64)):Va("v-if",!0)]))}}),Xr={theme:"../theme",title:"DSA 第13回: 最短経路問題",info:`データ構造とアルゴリズム 2026年度 第13回
関西大学 ビジネスデータサイエンス学部 / 伝住 周平
`,drawings:{enabled:!1},transition:"slide-left",routerMode:"hash",layout:"title"},ht=L(Xr),to=C({get layout(){return ht.layout},get transition(){return ht.transition},get class(){return ht.class},get clicks(){return ht.clicks},get name(){return ht.name},get preload(){return ht.preload},slide:{content:"",revision:"-uo7d4u",frontmatterRaw:`theme: ../theme
title: 'DSA 第13回: 最短経路問題'
info: |
  データ構造とアルゴリズム 2026年度 第13回
  関西大学 ビジネスデータサイエンス学部 / 伝住 周平
drawings:
  enabled: false
transition: slide-left
routerMode: hash
layout: title
`,note:"",title:"DSA 第13回: 最短経路問題",index:0,noteHTML:`<p>「1956年のある朝，オランダの若き数学者エドガー・ダイクストラが
婚約者とアムステルダムのカフェでコーヒーを飲んでいました．</p>
<p>そこでふと考えたのです．
『ロッテルダムからフローニンゲンまでの最短経路を求めるには？』</p>
<p>彼はカフェのテーブルの上で，紙とペンだけで解法を考え始めました．
そして<strong>20分後</strong> ― アルゴリズムが完成していた．</p>
<p>このアルゴリズムが今日のGoogleマップ，Yahoo!路線情報，
カーナビの経路計算の基盤になっています．
コンピュータを使わず，カフェで20分で発明された．
しかも発明者本人は当時まだ論文を一本も書いたことがなかった．
発表は3年後の1959年．たった3ページの論文でした．</p>
<p>今日はこの<strong>ダイクストラ法</strong>を学びます．」</p>
`,raw:"",frontmatter:ht,filepath:"",start:0,id:0,no:1},__clicksContext:null,__preloaded:!1}),so={layout:"objectives"},ut=L(so),eo=C({get layout(){return ut.layout},get transition(){return ut.transition},get class(){return ut.class},get clicks(){return ut.clicks},get name(){return ut.name},get preload(){return ut.preload},slide:{content:"",revision:"yz1pt2",frontmatterRaw:`layout: objectives
`,note:"",title:"本日の学習目標",level:2,index:1,noteHTML:`<p>「今日の目標です．</p>
<p>まず，BFSでは重み付きグラフの最短経路を求められない理由を理解すること．
次に，ダイクストラ法の各ステップを手で追跡できるようになること．
そして，緩和（relaxation）の仕組みを説明できること．
ダイクストラ法が使える条件 ― 非負の辺 ― を理解すること．
最後に，最短経路の復元方法を説明できること．</p>
<p>私の研究対象であるBDDやZDDでも，
グラフ上のパス探索や最適化が核心的な操作です．
ダイクストラ法の考え方はその基盤の一つなので，
今日はしっかりと身につけましょう．」</p>
`,raw:"",frontmatter:ut,filepath:"",start:40,id:1,no:2},__clicksContext:null,__preloaded:!1}),no={},dt=L(no),ao=C({get layout(){return dt.layout},get transition(){return dt.transition},get class(){return dt.class},get clicks(){return dt.clicks},get name(){return dt.name},get preload(){return dt.preload},slide:{content:"",revision:"sni5pq",note:"",title:"前回の復習",level:2,index:2,noteHTML:`<p>「前回の復習です．</p>
<p>第12回ではグラフ理論入門として，
グラフ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><mi>V</mi><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G = (V, E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span> ― 頂点と辺で世界のつながりを表現する方法を学びました．
隣接行列は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> のメモリ，隣接リストは <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N+E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span> のメモリ．
疎なグラフには隣接リストが有利でしたね．
DFSはスタックで深く掘り，BFSはキューで近い順に探索する．
BFSが重みなしグラフの最短経路を保証するところまで学びました．</p>
<p>今日のキーポイントとして，
第12回の<strong>BFS</strong>は重みなしグラフでしか最短経路を求められません ―
今日はこれを重み付きグラフに拡張します．
第10回の<strong>貪欲法</strong>の考え方がダイクストラ法の基盤になります．
そして第9回の<strong>DPの緩和</strong>と同じ発想が登場します．</p>
<p>前回の予告で，BFSは重みなしグラフでしか最短経路を求められないと言いました．
重み付きグラフには<strong>ダイクストラ法</strong>が必要です．
今日はそのダイクストラ法を学びます．」</p>
`,raw:"",frontmatter:dt,filepath:"",start:68,id:2,no:3},__clicksContext:null,__preloaded:!1}),ro={layout:"section-divider"},ft=L(ro),oo=C({get layout(){return ft.layout},get transition(){return ft.transition},get class(){return ft.class},get clicks(){return ft.clicks},get name(){return ft.name},get preload(){return ft.preload},slide:{content:"",revision:"19vg9e",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 1",level:1,index:3,noteHTML:`<p>「まず，なぜBFSでは不十分なのか，具体例で確認しましょう．」</p>
`,raw:"",frontmatter:ft,filepath:"",start:120,id:3,no:4},__clicksContext:null,__preloaded:!1}),io={},gt=L(io),lo=C({get layout(){return gt.layout},get transition(){return gt.transition},get class(){return gt.class},get clicks(){return gt.clicks},get name(){return gt.name},get preload(){return gt.preload},slide:{content:"",revision:"-levmwn",note:"",title:"BFSの限界",level:2,index:4,noteHTML:`<p>「前回学んだBFSは辺の<strong>本数</strong>が最小のルートを見つけます．
でも辺の<strong>重みの合計</strong>が最小のルートは見つけられない．</p>
<p>具体例を見てみましょう．</p>
<p>A→B は距離1，A→C は距離100，B→C は距離1．</p>
<p>BFS で A→C の最短経路を求めると？
A→C が辺1本で距離100．
A→B→C は辺2本で距離2．</p>
<p>BFS は辺の本数だけを見るので，A→C（辺1本）を最短と判断します．
距離は<strong>100</strong>です．</p>
<p>でも実際の最短距離は A→B→C（辺2本）で距離<strong>2</strong>．
BFSは50倍も遠いルートを『最短だ』と答えてしまうわけです．</p>
<p>ここで最短経路問題を定義します．</p>
<p>重み付きグラフにおいて，始点から各頂点への<strong>重みの合計が最小</strong>の経路を求める問題．</p>
<p>これがBFSでは解けない ― ダイクストラ法が必要な理由です．」</p>
`,raw:"",frontmatter:gt,filepath:"",start:133,id:4,no:5},__clicksContext:null,__preloaded:!1}),co={},yt=L(co),po=C({get layout(){return yt.layout},get transition(){return yt.transition},get class(){return yt.class},get clicks(){return yt.clicks},get name(){return yt.name},get preload(){return yt.preload},slide:{content:"",revision:"83z760",note:"",title:"最短経路問題の応用",level:2,index:5,noteHTML:`<p>「最短経路問題は身の回りのあらゆる場面で使われています．</p>
<p>カーナビでは交差点が頂点，道路が辺，距離が重み．最短距離を求めたい．
路線検索では駅が頂点，路線が辺，所要時間が重み．最短時間を求めたい．
ネットワークのルーティングではルータが頂点，回線が辺，遅延が重み．最速伝送を求めたい．
ゲームAIではマスが頂点，移動可能方向が辺，コストが重み．最小コストの経路を求めたい．</p>
<p>Googleマップ，Yahoo!路線情報，ネットワークの経路制御 ―
すべてダイクストラ法かその改良版が基盤になっています．</p>
<p>スマホで地図アプリを開いて経路検索するたびに，
裏側ではダイクストラ法が動いている．
カフェで20分で発明されたアルゴリズムが，
70年経った今も世界中のインフラを支えているのです．」</p>
`,raw:"",frontmatter:yt,filepath:"",start:188,id:5,no:6},__clicksContext:null,__preloaded:!1}),mo={layout:"section-divider"},wt=L(mo),ho=C({get layout(){return wt.layout},get transition(){return wt.transition},get class(){return wt.class},get clicks(){return wt.clicks},get name(){return wt.name},get preload(){return wt.preload},slide:{content:"",revision:"brwskj",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 2",level:1,index:6,noteHTML:`<p>「BFSの限界がわかりました．
では，ダイクストラ法はどうやってこの問題を解くのか？
アルゴリズムの中身を見ていきましょう．」</p>
`,raw:"",frontmatter:wt,filepath:"",start:225,id:6,no:7},__clicksContext:null,__preloaded:!1}),uo={},vt=L(uo),fo=C({get layout(){return vt.layout},get transition(){return vt.transition},get class(){return vt.class},get clicks(){return vt.clicks},get name(){return vt.name},get preload(){return vt.preload},slide:{content:"",revision:"-dj9c4f",note:"",title:"ダイクストラ法の3ステップ",level:2,index:7,noteHTML:`<p>「ダイクストラ法を日常の感覚で説明します．</p>
<p>新しい街に引っ越してきたと想像してください．
自宅（始点）から一番近い場所を順に探検していく．</p>
<p>ステップ1: <strong>選択</strong> ― まだ確定していない頂点の中から，暫定距離が<strong>最小</strong>の頂点を選ぶ．
ステップ2: <strong>確定</strong> ― その頂点の距離を確定する．
ステップ3: <strong>緩和</strong> ― 確定した頂点から隣接頂点の距離を更新する．</p>
<p>すべての頂点が確定するまでこれを繰り返します．</p>
<p>ここで重要なのは，これが<strong>貪欲法の一種</strong>だということです．
第10回で貪欲法を学びましたね．
『今わかっている最短の頂点を確定する』― この貪欲な判断が<strong>常に正しい</strong>．
ただし辺の重みが非負である場合に限ります．</p>
<p>第10回でナップザック問題では貪欲法が失敗することを見ました．
でもダイクストラ法では貪欲法が成功する ―
なぜ成功するのか，次のスライドで説明します．」</p>
`,raw:"",frontmatter:vt,filepath:"",start:240,id:7,no:8},__clicksContext:null,__preloaded:!1}),go={},kt=L(go),yo=C({get layout(){return kt.layout},get transition(){return kt.transition},get class(){return kt.class},get clicks(){return kt.clicks},get name(){return kt.name},get preload(){return kt.preload},slide:{content:"",revision:"-w46qc0",note:"",title:"なぜ「暫定距離最小」を確定してよいか",level:2,index:8,noteHTML:`<p>「なぜ暫定距離最小の頂点を確定してよいのか，直感的に説明します．</p>
<p>暫定距離最小の頂点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> を確定しようとしている．
もし別のルートの方が短いとしたら？</p>
<p>そのルートは<strong>未確定の頂点</strong>を経由するはずです．
でも未確定の頂点の暫定距離は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> より<strong>大きい</strong>（か同じ）．
そこからさらに<strong>非負の辺</strong>を通る ―
距離は増えることはあっても<strong>減ることはない</strong>．</p>
<p>だから，暫定距離最小の頂点の距離は本当に最短距離なのです．</p>
<p>『非負の辺を足したら距離は増える一方だから，
今一番短い頂点はこれ以上短くならない．』</p>
<p>これがダイクストラ法の正しさの核心です．
負の辺があるとこの前提が崩れます ― Part 4で反例を見ましょう．」</p>
`,raw:"",frontmatter:kt,filepath:"",start:285,id:8,no:9},__clicksContext:null,__preloaded:!1}),wo={},bt=L(wo),vo=C({get layout(){return bt.layout},get transition(){return bt.transition},get class(){return bt.class},get clicks(){return bt.clicks},get name(){return bt.name},get preload(){return bt.preload},slide:{content:"",revision:"-vqj8wm",note:"",title:"ダイクストラ法の擬似コード",level:2,index:9,noteHTML:`<p>「擬似コードを確認しましょう．</p>
<pre><code>dijkstra(graph, start):
    dist[v] = ∞ for all v
    dist[start] = 0
    confirmed = {}

    repeat V times:
        u = argmin dist[v] for v not in confirmed
        confirmed.add(u)
        for each neighbor v of u:
            if dist[u] + weight(u,v) &lt; dist[v]:
                dist[v] = dist[u] + weight(u,v)

    return dist
</code></pre>
<p>各行を確認します．</p>
<p>最初にすべての距離を <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span> に初期化し，始点だけ0にする．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> 回繰り返す ―
未確定の中で距離最小の頂点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> を選ぶ（選択）．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> を確定集合に追加する（確定）．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> の隣接頂点について，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> を経由した方が短ければ距離を更新する（緩和）．</p>
<p>計算量ですが，実装方法によって変わります．
素朴に線形探索で最小値を探すと，1回の探索が <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span> で，
全体で <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mi>V</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(V^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> です．</p>
<p>優先度キュー（ヒープ）を使うと，最小値の取り出しが <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(\\log V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span> に改善され，
全体で <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>V</mi><mo>+</mo><mi>E</mi><mo stretchy="false">)</mo><mi>log</mi><mo>⁡</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}((V+E) \\log V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">((</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span> になります．
Googleマップのような巨大なグラフではヒープ版が不可欠です．」</p>
`,raw:"",frontmatter:bt,filepath:"",start:332,id:9,no:10},__clicksContext:null,__preloaded:!1}),ko={layout:"section-divider"},xt=L(ko),bo=C({get layout(){return xt.layout},get transition(){return xt.transition},get class(){return xt.class},get clicks(){return xt.clicks},get name(){return xt.name},get preload(){return xt.preload},slide:{content:"",revision:"-akqcqx",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 3",level:1,index:10,noteHTML:`<p>「アルゴリズムの理論がわかりました．
次は実際に手を動かして，ステップバイステップで追跡してみましょう．
ここが今日の山場です．」</p>
`,raw:"",frontmatter:xt,filepath:"",start:398,id:10,no:11},__clicksContext:null,__preloaded:!1}),xo={layout:"interactive"},Mt=L(xo),Mo=C({get layout(){return Mt.layout},get transition(){return Mt.transition},get class(){return Mt.class},get clicks(){return Mt.clicks},get name(){return Mt.name},get preload(){return Mt.preload},slide:{content:"",revision:"-9re76k",frontmatterRaw:`layout: interactive
`,note:"",title:"ダイクストラ法をステップ実行",level:2,index:11,noteHTML:`<p>「画面の DijkstraSimulator で，ダイクストラ法を実際に動かしてみましょう．</p>
<p>『次のステップ』ボタンを押すたびに，
どの頂点が確定され，どの辺が緩和されるかがアニメーションで表示されます．</p>
<p>注目してほしいポイントが3つあります．</p>
<p>1つ目．確定される頂点の色が変わるところ ―
暫定距離が最小の頂点が選ばれて確定される様子．</p>
<p>2つ目．緩和のとき距離が更新されるところ ―
より短い経路が見つかって数値が小さくなる．</p>
<p>3つ目．確定済みの頂点は二度と更新されないところ ―
これがダイクストラ法の正しさの根拠です．</p>
<p>各ステップで何が起きているか，声に出しながら追いかけてみてください．」</p>
`,raw:"",frontmatter:Mt,filepath:"",start:412,id:11,no:12},__clicksContext:null,__preloaded:!1}),_o={},_t=L(_o),So=C({get layout(){return _t.layout},get transition(){return _t.transition},get class(){return _t.class},get clicks(){return _t.clicks},get name(){return _t.name},get preload(){return _t.preload},slide:{content:"",revision:"-9zec04",note:"",title:"トレース: 前半（Step 1〜3）",level:2,index:12,noteHTML:`<p>「ここからは手でトレースしていきます．</p>
<p>グラフは S→A(4), S→B(2), A→B(1), A→C(5), B→C(10), B→D(8), C→G(2), D→G(3) です．</p>
<p>初期状態: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，他はすべて <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span>．確定集合は空．</p>
<p><strong>Step 1: S を確定</strong>
未確定の中で最小は S（距離0）．S を確定します．
S の隣接頂点を緩和:
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>+</mo><mn>4</mn><mo>=</mo><mn>4</mn><mo>&lt;</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">0 + 4 = 4 &lt; \\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[A] = 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>2</mn><mo>&lt;</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">0 + 2 = 2 &lt; \\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[B] = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></p>
<p><strong>Step 2: B を確定</strong>
未確定の中で最小は B（距離2）．B を確定します．
B の隣接頂点を緩和:
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>3</mn><mo>&lt;</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">2 + 1 = 3 &lt; 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[A] = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> に更新！</p>
<p>ここが大事です．
S→A（距離4）より S→B→A（距離2+1=3）の方が短い．
より良いルートが見つかったら距離を更新する ― これが**緩和（relaxation）**です．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>+</mo><mn>10</mn><mo>=</mo><mn>12</mn><mo>&lt;</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">2 + 10 = 12 &lt; \\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">12</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>C</mi><mo stretchy="false">]</mo><mo>=</mo><mn>12</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[C] = 12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">12</span></span></span></span>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>+</mo><mn>8</mn><mo>=</mo><mn>10</mn><mo>&lt;</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">2 + 8 = 10 &lt; \\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>D</mi><mo stretchy="false">]</mo><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[D] = 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span></p>
<p><strong>Step 3: A を確定</strong>
未確定の中で最小は A（距離3）．A を確定します．
A の隣接頂点を緩和:
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>+</mo><mn>5</mn><mo>=</mo><mn>8</mn><mo>&lt;</mo><mn>12</mn></mrow><annotation encoding="application/x-tex">3 + 5 = 8 &lt; 12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">12</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>C</mi><mo stretchy="false">]</mo><mo>=</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[C] = 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span> に更新！</p>
<p>ここでも緩和が起きました．
S→B→C（距離12）より S→B→A→C（距離8）の方が短い．</p>
<p>Step 2の注目ポイントとして，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\\text{dist}[A]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span></span></span></span> が <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>→</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">4 \\to 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> に更新されたこと．
これは緩和の本質を示す好例です．」</p>
`,raw:"",frontmatter:_t,filepath:"",start:441,id:12,no:13},__clicksContext:null,__preloaded:!1}),Lo={},St=L(Lo),Ao=C({get layout(){return St.layout},get transition(){return St.transition},get class(){return St.class},get clicks(){return St.clicks},get name(){return St.name},get preload(){return St.preload},slide:{content:"",revision:"-68zwi7",note:"",title:"トレース: 後半（Step 4〜6）",level:2,index:13,noteHTML:`<p>「後半をみなさんに考えてもらいます．</p>
<p>現在の状態: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">A=3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">B=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> は確定済み．
未確定は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">C=8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">D=10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">G=\\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span>．</p>
<p><strong>Step 4: C を確定</strong>
未確定の中で最小は C（距離8）．C を確定します．
C の隣接頂点を緩和:
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>10</mn><mo>&lt;</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">8 + 2 = 10 &lt; \\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>G</mi><mo stretchy="false">]</mo><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[G] = 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal">G</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span></p>
<p><strong>Step 5: D を確定</strong>
未確定の中で最小は D（距離10）と G（距離10）で同点です．
D を選んで確定します．
D の隣接頂点を緩和:
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mo>+</mo><mn>3</mn><mo>=</mo><mn>13</mn><mo>&gt;</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">10 + 3 = 13 &gt; 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">13</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span> → 更新なし．
D経由の方が遠いので <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span> の距離はそのままです．</p>
<p><strong>Step 6: G を確定</strong>
残りは G（距離10）のみ．G を確定して終了．</p>
<p>最終結果: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>→</mo><mi>G</mi></mrow><annotation encoding="application/x-tex">S \\to G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span> の最短距離は<strong>10</strong>です．</p>
<p>パターンを振り返ると，
『未確定の中で最小を選ぶ → その隣を緩和する』の繰り返し．
同じ操作の反復です．</p>
<p>このトレース表を<strong>自分で書ける</strong>ことが期末試験で求められます．
ぜひ練習しておいてください．」</p>
`,raw:"",frontmatter:St,filepath:"",start:502,id:13,no:14},__clicksContext:null,__preloaded:!1}),Oo={},Lt=L(Oo),Co=C({get layout(){return Lt.layout},get transition(){return Lt.transition},get class(){return Lt.class},get clicks(){return Lt.clicks},get name(){return Lt.name},get preload(){return Lt.preload},slide:{content:"",revision:"hrhp7",note:"",title:"最短経路の復元",level:2,index:14,noteHTML:`<p>「最短距離はわかりました．でも，最短<strong>経路</strong>そのものは？
『どの道を通ればいいか』を知りたい場面は多いですよね．</p>
<p>各頂点に『どの頂点から来たか（前のノード）』を記録しておきます．
緩和で距離が更新されたとき，更新元の頂点を記録するのです．</p>
<p>先ほどのトレースの結果:</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> の前のノード: なし（始点）
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> の前のノード: B（Step 2 で S→B→A として更新された）
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> の前のノード: S（Step 1 で S→B として設定された）
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> の前のノード: A（Step 3 で S→B→A→C として更新された）
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span> の前のノード: B（Step 2 で S→B→D として設定された）
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span> の前のノード: C（Step 4 で S→B→A→C→G として設定された）</p>
<p>G から逆にたどります:
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>←</mo><mi>C</mi><mo>←</mo><mi>A</mi><mo>←</mo><mi>B</mi><mo>←</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">G \\leftarrow C \\leftarrow A \\leftarrow B \\leftarrow S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></p>
<p>逆順にすると最短経路: S → B → A → C → G（距離 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>5</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">2+1+5+2 = 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span>）．</p>
<p>この手法は第12回のBFSでの最短経路復元と同じテクニックです．
ゴールから前のノードを順にたどれば，最短経路が復元できる．」</p>
`,raw:"",frontmatter:Lt,filepath:"",start:558,id:14,no:15},__clicksContext:null,__preloaded:!1}),Eo={layout:"section-divider"},At=L(Eo),$o=C({get layout(){return At.layout},get transition(){return At.transition},get class(){return At.class},get clicks(){return At.clicks},get name(){return At.name},get preload(){return At.preload},slide:{content:"",revision:"pxlu96",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 4",level:1,index:15,noteHTML:`<p>「ダイクストラ法の動作を理解しました．
ところで，辺の重みが負だったらどうなるのでしょう？」</p>
`,raw:"",frontmatter:At,filepath:"",start:608,id:15,no:16},__clicksContext:null,__preloaded:!1}),To={layout:"assertion-evidence"},Ot=L(To),Po=C({get layout(){return Ot.layout},get transition(){return Ot.transition},get class(){return Ot.class},get clicks(){return Ot.clicks},get name(){return Ot.name},get preload(){return Ot.preload},slide:{content:"",revision:"7ib4pc",frontmatterRaw:`layout: assertion-evidence
`,note:"",title:"反例",level:3,index:16,noteHTML:`<p>「辺の重みが負の場合，ダイクストラ法は正しい答えを出しません．</p>
<p>反例を見ましょう．</p>
<p>S→A: 重み 1，S→B: 重み 3．
A→C: 重み 5，B→A: 重み <strong>-4</strong>，B→C: 重み 1．</p>
<p>ダイクストラ法を動かすと:</p>
<p>Step 1: S を確定．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[A] = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[B] = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>．
Step 2: A を確定（距離1が最小）．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>C</mi><mo stretchy="false">]</mo><mo>=</mo><mn>1</mn><mo>+</mo><mn>5</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[C] = 1+5 = 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span>．
Step 3: B を確定（距離3）．
ここで B→A の辺（重み -4）を緩和すると，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mo>=</mo><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>3</mn><mo>+</mo><mo stretchy="false">(</mo><mo>−</mo><mn>4</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[A] = \\min(1, 3+(-4)) = \\min(1, -1) = -1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">4</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>．
でも<strong>A はもう確定済みなので更新できない</strong>．</p>
<p>結果: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[A] = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>（誤り．正しくは -1）．</p>
<p>確定したノードの距離は最短だという前提が，
負の辺によって崩れてしまったのです．」</p>
`,raw:"",frontmatter:Ot,filepath:"",start:621,id:16,no:17},__clicksContext:null,__preloaded:!1}),Do={},Ct=L(Do),Ro=C({get layout(){return Ct.layout},get transition(){return Ct.transition},get class(){return Ct.class},get clicks(){return Ct.clicks},get name(){return Ct.name},get preload(){return Ct.preload},slide:{content:"",revision:"wgs80w",note:"",title:"なぜダイクストラ法は失敗するのか",level:2,index:17,noteHTML:`<p>「もう少し掘り下げましょう．</p>
<p>ダイクストラ法は『暫定距離最小 = 最短距離』と確定します．
これが成り立つのは，未確定の頂点を経由しても距離が増える一方だから．</p>
<p>でも負の辺があると，<strong>確定後にもっと短い経路が見つかる</strong>可能性がある．
先ほどの例では，B→A の辺（重み -4）を通ることで，
A に距離 -1 で到達できたのに，A はすでに距離1で確定してしまっていた．
一度確定した距離が覆される ― アルゴリズムの根幹が崩れるわけです．</p>
<p>ダイクストラ法の前提条件は明確です:
<strong>すべての辺の重みが非負</strong> ― <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">w(u,v) \\geq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> ―
この条件が満たされないと，正しい答えは保証されません．</p>
<p>現実のグラフで考えると，
道路の距離は常に非負なのでダイクストラ法が使えます．
通信ネットワークの遅延も非負です．
でも金融ネットワーク ― 為替差益は正にも負にもなる ―
こういう場合にはダイクストラ法は使えません．」</p>
`,raw:"",frontmatter:Ct,filepath:"",start:677,id:17,no:18},__clicksContext:null,__preloaded:!1}),No={},Et=L(No),jo=C({get layout(){return Et.layout},get transition(){return Et.transition},get class(){return Et.class},get clicks(){return Et.clicks},get name(){return Et.name},get preload(){return Et.preload},slide:{content:"",revision:"-dreodk",note:"",title:"ベルマン-フォード法（概念のみ）",level:2,index:18,noteHTML:`<p>「では負の辺がある場合はどうすればいいのか？</p>
<p><strong>ベルマン-フォード法</strong>というアルゴリズムがあります．
すべての辺を <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">V-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 回繰り返し緩和する．
最短経路の辺数は最大 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">V-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 本なので，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">V-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 回の反復で十分です．</p>
<p>ダイクストラ法との比較を見てみましょう．</p>
<p>計算量は，ダイクストラ法が <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>V</mi><mo>+</mo><mi>E</mi><mo stretchy="false">)</mo><mi>log</mi><mo>⁡</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}((V+E) \\log V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">((</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span>，
ベルマン-フォード法が <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>V</mi><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(VE)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span>．
ベルマン-フォードの方が遅い．</p>
<p>負の辺への対応は，ダイクストラ法は不可，ベルマン-フォード法は可能．
さらにベルマン-フォード法は<strong>負の閉路</strong> ― 回れば回るほど距離が減る閉路 ―
の検出も可能です．</p>
<p>使い分けは明確です．
辺がすべて非負 → <strong>ダイクストラ法</strong>（高速）．
負の辺がある → <strong>ベルマン-フォード法</strong>（対応可能）．</p>
<p>この授業ではベルマン-フォード法の詳細には踏み込みませんが，
『ダイクストラ法が使えない場面の代替手段がある』ことを知っておいてください．」</p>
`,raw:"",frontmatter:Et,filepath:"",start:723,id:18,no:19},__clicksContext:null,__preloaded:!1}),Io={},$t=L(Io),Vo=C({get layout(){return $t.layout},get transition(){return $t.transition},get class(){return $t.class},get clicks(){return $t.clicks},get name(){return $t.name},get preload(){return $t.preload},slide:{content:"",revision:"rxb6hg",note:"",title:"ダイクストラ法の応用: インターネットの経路制御",level:2,index:19,noteHTML:`<p>「ダイクストラ法がどこで使われているか，もう1つ具体的な例を紹介します．</p>
<p>みなさんがWebサイトにアクセスするとき，
データはルーターを何台も経由してサーバーまで届きます．
このルーター同士が通信経路を決めるプロトコルの1つが<strong>OSPF</strong> ―
Open Shortest Path First です．</p>
<p>OSPFの内部では<strong>ダイクストラ法が動いています</strong>．
各ルーターはネットワーク全体の地図 ― リンクステートデータベースと呼びます ―
を持っていて，ダイクストラ法で最短経路ツリーを計算します．
その結果をもとにパケットの転送先を決定するのです．</p>
<p>つまり，みなさんがYouTubeを見たり，LINEでメッセージを送ったりするたびに，
裏側ではダイクストラ法が働いている．</p>
<p>1956年にアムステルダムのカフェで20分で発明されたアルゴリズムが，
2026年のインターネットを支えている ― すごいことだと思いませんか？</p>
<p>先ほどの応用例の表で『ルーティング ― ルータ ― 回線 ― 遅延 ― 最速伝送』
という行がありましたが，その正体がOSPFだったわけです．」</p>
`,raw:"",frontmatter:$t,filepath:"",start:778,id:19,no:20},__clicksContext:null,__preloaded:!1}),Bo={layout:"section-divider"},Tt=L(Bo),Ho=C({get layout(){return Tt.layout},get transition(){return Tt.transition},get class(){return Tt.class},get clicks(){return Tt.clicks},get name(){return Tt.name},get preload(){return Tt.preload},slide:{content:"",revision:"-p5h6uq",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 5",level:1,index:20,noteHTML:`<p>「最後にまとめと確認問題です．」</p>
`,raw:"",frontmatter:Tt,filepath:"",start:828,id:20,no:21},__clicksContext:null,__preloaded:!1}),Fo={layout:"summary"},Pt=L(Fo),zo=C({get layout(){return Pt.layout},get transition(){return Pt.transition},get class(){return Pt.class},get clicks(){return Pt.clicks},get name(){return Pt.name},get preload(){return Pt.preload},slide:{content:"",revision:"-8khm73",frontmatterRaw:`layout: summary
`,note:"",title:"本日のまとめ",level:2,index:21,noteHTML:`<p>「今日のポイントを6つにまとめます．</p>
<p>1つ目．<strong>BFSの限界:</strong> 重みなしグラフの最短経路しか求められない．</p>
<p>2つ目．<strong>ダイクストラ法:</strong> 暫定距離最小のノードを確定 → 隣接ノードを緩和 → 繰り返す．</p>
<p>3つ目．<strong>緩和:</strong> より短い経路が見つかったら距離を更新する操作．</p>
<p>4つ目．<strong>前提条件:</strong> 辺の重みがすべて非負でなければ正しく動作しない．</p>
<p>5つ目．<strong>経路復元:</strong> 各頂点に『前のノード』を記録し，ゴールから逆にたどる．</p>
<p>6つ目．<strong>負の辺:</strong> ベルマン-フォード法で対応（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>V</mi><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(VE)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span>）．</p>
<p>教科書の対応箇所は第9章の9.5から9.6です．」</p>
`,raw:"",frontmatter:Pt,filepath:"",start:840,id:21,no:22},__clicksContext:null,__preloaded:!1}),qo={layout:"question"},Dt=L(qo),Go=C({get layout(){return Dt.layout},get transition(){return Dt.transition},get class(){return Dt.class},get clicks(){return Dt.clicks},get name(){return Dt.name},get preload(){return Dt.preload},slide:{content:"",revision:"9o0reb",frontmatterRaw:`layout: question
`,note:"",title:"確認問題 ①",level:2,index:22,noteHTML:`<p>「確認問題です．</p>
<p>ダイクストラ法が正しく動作<strong>しない</strong>条件はどれか？
有向グラフのとき，辺の重みが0のとき，辺の重みが負のとき，グラフに閉路があるとき．</p>
<p>隣の人と相談してみてください．</p>
<p>……答えは3番の<strong>辺の重みが負のとき</strong>です．</p>
<p>有向・無向は関係ありません．重みが0でも非負なので問題ない．
閉路があっても辺が非負なら正しく動きます．
辺の重みが負の場合だけ，確定したノードの距離が覆される可能性がある．」</p>
`,raw:"",frontmatter:Dt,filepath:"",start:877,id:22,no:23},__clicksContext:null,__preloaded:!1}),Wo={layout:"question"},Rt=L(Wo),Uo=C({get layout(){return Rt.layout},get transition(){return Rt.transition},get class(){return Rt.class},get clicks(){return Rt.clicks},get name(){return Rt.name},get preload(){return Rt.preload},slide:{content:"",revision:"-fcyyb8",frontmatterRaw:`layout: question
`,note:"",title:"確認問題 ②",level:2,index:23,noteHTML:`<p>「2問目です．</p>
<p>ダイクストラ法の各ステップで行う操作の正しい順序は？
緩和→確定→選択，選択→緩和→確定，確定→選択→緩和，選択→確定→緩和．</p>
<p>……答えは4番の<strong>選択→確定→緩和</strong>です．</p>
<p>暫定距離最小の頂点を<strong>選択</strong>し，
その距離を<strong>確定</strong>し，
隣接頂点の距離を<strong>緩和</strong>する．</p>
<p>この3ステップの順序はそのまま覚えてください．
先に緩和してしまうと，まだ最短かどうかわからない距離で計算してしまいます．」</p>
`,raw:"",frontmatter:Rt,filepath:"",start:921,id:23,no:24},__clicksContext:null,__preloaded:!1}),Jo={layout:"question"},Nt=L(Jo),Ko=C({get layout(){return Nt.layout},get transition(){return Nt.transition},get class(){return Nt.class},get clicks(){return Nt.clicks},get name(){return Nt.name},get preload(){return Nt.preload},slide:{content:"",revision:"61yagj",frontmatterRaw:`layout: question
`,note:"",title:"確認問題 ③",level:2,index:24,noteHTML:`<p>「最後の確認問題です．</p>
<p>ダイクストラ法のトレースで，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[A]=4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> のときに <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">\\text{dist}[A]=3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> に更新された．
この操作を何というか？</p>
<p>確定，緩和（relaxation），探索，初期化．</p>
<p>……答えは2番の**緩和（relaxation）**です．</p>
<p>別の経路を経由した方が短いと判明したとき，距離を更新する操作を<strong>緩和</strong>といいます．
先ほどのトレースの Step 2 で，S→A（距離4）より S→B→A（距離3）の方が短いとわかり，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dist</mtext><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\\text{dist}[A]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span></span></span></span> が4から3に更新されました ― これが緩和です．</p>
<p>第9回のDPでも同じように『より良い値で更新する』操作がありましたね．
あの発想と同根です．」</p>
`,raw:"",frontmatter:Nt,filepath:"",start:966,id:24,no:25},__clicksContext:null,__preloaded:!1}),Qo={},jt=L(Qo),Yo=C({get layout(){return jt.layout},get transition(){return jt.transition},get class(){return jt.class},get clicks(){return jt.clicks},get name(){return jt.name},get preload(){return jt.preload},slide:{content:"",revision:"-z3n54h",note:"",title:"次回予告",level:2,index:25,noteHTML:`<p>「来週は<strong>数学的推論とパズル</strong>です．</p>
<p>包除原理 ― 『引いて引いて足す』を一般化した計数の技法．
偶奇性と不変量 ― たった3行で不可能を証明する方法．
貪欲法の正当性 ― いつ使えて，いつ使えないか．</p>
<p>来週のクイズです．
8×8のチェスボードから対角の2マスを取り除く．
残りの62マスを31個のドミノで敷き詰められるか？</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>62</mn><mo>÷</mo><mn>2</mn><mo>=</mo><mn>31</mn></mrow><annotation encoding="application/x-tex">62 \\div 2 = 31</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">62</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">31</span></span></span></span> で数はぴったり合います ― でも答えは<strong>不可能</strong>．
しかもその証明はたった3行 ― 来週，この衝撃を体験してもらいます．</p>
<p>教科書の第10章に目を通しておいてください．</p>
<p>小テストは授業後にMicrosoft Formsで配信します．
ダイクストラ法のトレース表を手で書く練習をしておいてください．
それでは今日はここまで．ありがとうございました．」</p>
`,raw:"",frontmatter:jt,filepath:"",start:1014,id:25,no:26},__clicksContext:null,__preloaded:!1}),T=new Array(26),$=(s,t)=>Ba({loader:t,delay:300,loadingComponent:Zr,errorComponent:E,onError:e=>console.error("Failed to load slide "+(s+1),e)}),Ye=async()=>{try{return T[0]??=await S(()=>import("./md-DTrS8ePL.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},Ze=async()=>{try{return T[1]??=await S(()=>import("./md-CGQltsdt.js"),__vite__mapDeps([5,1,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},Xe=async()=>{try{return T[2]??=await S(()=>import("./md-B5VQTZeM.js"),__vite__mapDeps([6,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},tn=async()=>{try{return T[3]??=await S(()=>import("./md-Bh5p3dWF.js"),__vite__mapDeps([8,1,9,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},sn=async()=>{try{return T[4]??=await S(()=>import("./md-kIu1YZ50.js"),__vite__mapDeps([10,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},en=async()=>{try{return T[5]??=await S(()=>import("./md-C6w-wdhh.js"),__vite__mapDeps([11,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},nn=async()=>{try{return T[6]??=await S(()=>import("./md-D-VfIilY.js"),__vite__mapDeps([12,1,9,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},an=async()=>{try{return T[7]??=await S(()=>import("./md-BQBB2PGa.js"),__vite__mapDeps([13,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},rn=async()=>{try{return T[8]??=await S(()=>import("./md-uYYyS8Xb.js"),__vite__mapDeps([14,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},on=async()=>{try{return T[9]??=await S(()=>import("./slidev/md-BJb-VGP-.js"),__vite__mapDeps([15,16,1,2,7,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},ln=async()=>{try{return T[10]??=await S(()=>import("./md-pIb3ICfv.js"),__vite__mapDeps([17,1,9,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},cn=async()=>{try{return T[11]??=await S(()=>import("./md-D-Wa5qxl.js"),__vite__mapDeps([18,1,2,3,4,19]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},pn=async()=>{try{return T[12]??=await S(()=>import("./md-DG9iJm2H.js"),__vite__mapDeps([20,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},mn=async()=>{try{return T[13]??=await S(()=>import("./md-Cq3banLZ.js"),__vite__mapDeps([21,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},hn=async()=>{try{return T[14]??=await S(()=>import("./md-CXl4t-oK.js"),__vite__mapDeps([22,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},un=async()=>{try{return T[15]??=await S(()=>import("./md-BBFivnLX.js"),__vite__mapDeps([23,1,9,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},dn=async()=>{try{return T[16]??=await S(()=>import("./md-CfWSyCZa.js"),__vite__mapDeps([24,1,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},fn=async()=>{try{return T[17]??=await S(()=>import("./md-bihMRq3d.js"),__vite__mapDeps([25,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},gn=async()=>{try{return T[18]??=await S(()=>import("./md-BrQ9nzGS.js"),__vite__mapDeps([26,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},yn=async()=>{try{return T[19]??=await S(()=>import("./md-Cio1nbtT.js"),__vite__mapDeps([27,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},wn=async()=>{try{return T[20]??=await S(()=>import("./md-CAmDZmel.js"),__vite__mapDeps([28,1,9,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},vn=async()=>{try{return T[21]??=await S(()=>import("./md-B58lJmpI.js"),__vite__mapDeps([29,1,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},kn=async()=>{try{return T[22]??=await S(()=>import("./md-DRD6QFNB.js"),__vite__mapDeps([30,1,31,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},bn=async()=>{try{return T[23]??=await S(()=>import("./md-U2GsgVde.js"),__vite__mapDeps([32,1,31,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},xn=async()=>{try{return T[24]??=await S(()=>import("./md-C7wgIPm6.js"),__vite__mapDeps([33,1,31,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},Mn=async()=>{try{return T[25]??=await S(()=>import("./md-B3nz39uG.js"),__vite__mapDeps([34,1,7,2,3,4]),import.meta.url)}catch(s){return console.error("slide failed to load",s),E}},Zo=[{no:1,meta:to,load:Ye,component:$(0,Ye)},{no:2,meta:eo,load:Ze,component:$(1,Ze)},{no:3,meta:ao,load:Xe,component:$(2,Xe)},{no:4,meta:oo,load:tn,component:$(3,tn)},{no:5,meta:lo,load:sn,component:$(4,sn)},{no:6,meta:po,load:en,component:$(5,en)},{no:7,meta:ho,load:nn,component:$(6,nn)},{no:8,meta:fo,load:an,component:$(7,an)},{no:9,meta:yo,load:rn,component:$(8,rn)},{no:10,meta:vo,load:on,component:$(9,on)},{no:11,meta:bo,load:ln,component:$(10,ln)},{no:12,meta:Mo,load:cn,component:$(11,cn)},{no:13,meta:So,load:pn,component:$(12,pn)},{no:14,meta:Ao,load:mn,component:$(13,mn)},{no:15,meta:Co,load:hn,component:$(14,hn)},{no:16,meta:$o,load:un,component:$(15,un)},{no:17,meta:Po,load:dn,component:$(16,dn)},{no:18,meta:Ro,load:fn,component:$(17,fn)},{no:19,meta:jo,load:gn,component:$(18,gn)},{no:20,meta:Vo,load:yn,component:$(19,yn)},{no:21,meta:Ho,load:wn,component:$(20,wn)},{no:22,meta:zo,load:vn,component:$(21,vn)},{no:23,meta:Go,load:kn,component:$(22,kn)},{no:24,meta:Uo,load:bn,component:$(23,bn)},{no:25,meta:Ko,load:xn,component:$(24,xn)},{no:26,meta:Yo,load:Mn,component:$(25,Mn)}],nt=Se(Zo);function ic(s){if(typeof s=="number")return{seconds:s,relative:!1};const t=s.startsWith("+");t&&(s=s.slice(1));let e=0;if(s.includes(":")){const n=s.split(":").map(Number);let a=0,r=0,o=0;if(n.length===3)a=n[0],r=n[1],o=n[2];else if(n.length===2)r=n[0],o=n[1];else if(n.length===1)o=n[0];else throw new TypeError("Invalid timestamp format");if(Number.isNaN(a)||Number.isNaN(r)||Number.isNaN(o))throw new TypeError("Invalid timestamp format");e=(a||0)*3600+(r||0)*60+(o||0)}else if(!s.match(/[a-z]/i))e=Number(s);else{const n={s:1,sec:1,secs:1,m:60,min:60,mins:60,h:3600,hr:3600,hrs:3600,hour:3600,hours:3600,day:86400,days:86400,week:604800,weeks:604800,month:2629746,months:2629746,year:31556952,years:31556952},a=/([\d.]+)([a-z]+)/gi,r=s.matchAll(a);if(r)for(const i of r){const l=Number(i[1]);if(Number.isNaN(l))throw new TypeError(`Invalid timestamp value: ${i[1]}`);const c=i[2].toLowerCase();if(!(c in n))throw new TypeError(`Invalid timestamp unit: ${c}`);e+=l*n[c]}const o=s.replace(a,"").trim();if(o)throw new TypeError(`Unknown timestamp remaining: ${o}`)}return{seconds:e,relative:t}}function Xn(s,t){if(!t||t==="all"||t==="*")return ze(1,s+1);if(t==="none")return[];const e=[];for(const n of t.split(/[,;]/g))if(!n.includes("-"))e.push(+n);else{const[a,r]=n.split("-",2);e.push(...ze(+a,r?+r+1:s+1))}return hr(e).filter(n=>n<=s).sort((n,a)=>n-a)}const Hs="$$slidev-clicks-context",Le="$$slidev-page",ta="$$slidev-slide-element",Xo="$$slidev-slide-scale",ti="$$slidev-context",lc="$$slidev-route",Ae="$$slidev-render-context",si="$$slidev-fontmatter",ei="$$slidev-slide-zoom",xs="slidev-vclick-target",es="slidev-vclick-hidden",ns="slidev-vclick-fade",Ys="slidev-vclick-hidden-explicitly",Zs="slidev-vclick-current",Xs="slidev-vclick-prior",Ms=999999,ni=["localhost","127.0.0.1"],ai=["clicks","clicksStart","disabled","hide","hideInToc","layout","level","preload","routeAlias","src","title","transition","zoom","dragPos","lang"],cc=[...ai,"theme","titleTemplate","info","author","keywords","presenter","browserExporter","download","exportFilename","export","highlighter","lineNumbers","monaco","monacoTypesSource","monacoTypesAdditionalPackages","monacoRunAdditionalDeps","monacoRunUseStrict","remoteAssets","selectable","record","colorSchema","routerMode","aspectRatio","canvasWidth","themeConfig","favicon","plantUmlServer","fonts","defaults","drawings","htmlAttrs","mdc","contextMenu","wakeLock","seoMeta","notesAutoRuby","magicMoveDuration","preloadImages"];function ri(s,t,{mode:e="replace"}={}){const n=Vs();return b({get(){const a=n.currentRoute.value.query[s];return a==null?t:Array.isArray(a)?a.filter(Boolean):a},set(a){Ha(()=>{(n.currentRoute.value.query[s]??t?.toString())!==a.toString()&&n[Fa(e)]({query:{...n.currentRoute.value.query,[s]:`${a}`===t?void 0:a}})})}})}function Fs(s){return nt.value.find(t=>t.no===+s||t.meta.slide?.frontmatter.routeAlias===s)}function Ut(s,t,e=!1){(typeof s=="number"||typeof s=="string")&&(s=Fs(s));const n=s.meta.slide?.frontmatter.routeAlias??s.no;return e?`/export/${n}`:t?`/presenter/${n}`:`/${n}`}const oi={"slide-left":"slide-left | slide-right","slide-right":"slide-right | slide-left","slide-up":"slide-up | slide-down","slide-down":"slide-down | slide-up"};function ii(s,t=!1){if(!s||(typeof s=="string"&&(s={name:s}),!s.name))return;let e=s.name.includes("|")?s.name:oi[s.name]||s.name;if(e.includes("|")){const[n,a]=e.split("|").map(r=>r.trim());e=t?a:n}if(e)return{...s,name:e}}function li(s,t,e){let n=s>0?e?.meta?.transition:t?.meta?.transition;return n||(n=j.transition||void 0),ii(n,s<0)}const pc=A(!1),mc=A(!1),hc=A(!1),ci=A(!1),Oe=A(!1),uc=A(!1),dc=A(!0),pi=L(new Set),fc=b(()=>pi.size>0),gc=Ga({xs:460,...Ua}),$s=Ja(),yc=za(),wc=b(()=>$s.height.value-$s.width.value/Gn.value>120),vc=qa(Bs?document.body:null),sa=Wa(),kc=b(()=>["INPUT","TEXTAREA"].includes(sa.value?.tagName||"")),bc=b(()=>["BUTTON","A"].includes(sa.value?.tagName||""));q("slidev-camera","default",{listenToStorageChanges:!1});q("slidev-mic","default",{listenToStorageChanges:!1});const mi=q("slidev-scale",0),xc=q("slidev-wake-lock",!0),Mc=q("slidev-hide-cursor-idle",!0);q("slidev-skip-export-pdf-tip",!1);q("slidev-export-capture-delay",400,{listenToStorageChanges:!1});const _c=q("slidev-presenter-cursor",!0,{listenToStorageChanges:!1}),hi=q("slidev-show-editor",!1,{listenToStorageChanges:!1}),ui=q("slidev-editor-vertical",!1,{listenToStorageChanges:!1}),di=q("slidev-editor-width",Bs?window.innerWidth*.4:318,{listenToStorageChanges:!1}),fi=q("slidev-editor-height",Bs?window.innerHeight*.4:300,{listenToStorageChanges:!1}),ds=Se(null),Ts=q("slidev-presenter-font-size",1,{listenToStorageChanges:!1}),fs=q("slidev-presenter-layout",1,{listenToStorageChanges:!1}),de={invert:!1,contrast:1,brightness:1,hueRotate:0,saturate:1,sepia:0},gi=q("slidev-viewer-css-filter",de,{listenToStorageChanges:!1,mergeDefaults:!0,deep:!0}),Sc=b(()=>Object.keys(de).some(s=>gi.value[s]!==de[s]));function Lc(){fs.value=fs.value+1,fs.value>3&&(fs.value=1)}function Ac(){Ts.value=Math.min(2,Ts.value+.1)}function Oc(){Ts.value=Math.max(.5,Ts.value-.1)}const Cc=Fn(ci),gs=q("slidev-sync-directions",{viewerSend:!0,viewerReceive:!0,presenterSend:!0,presenterReceive:!0},{listenToStorageChanges:!1,mergeDefaults:!0});function ea(s,t,e=1){const n=t.meta.slide.level??e;n&&n>e&&s.length>0?ea(s[s.length-1].children,t,e+1):s.push({no:t.no,children:[],level:e,titleLevel:n,path:Ut(t.meta.slide?.frontmatter?.routeAlias??t.no,!1),hideInToc:!!t.meta?.slide?.frontmatter?.hideInToc,title:t.meta?.slide?.title})}function na(s,t,e=!1,n,a){return s.map(r=>{const o={...r,active:r.no===a?.value,hasActiveParent:e};return o.children.length>0&&(o.children=na(o.children,t,o.active||o.hasActiveParent,o,a)),n&&(o.active||o.activeParent)&&(n.activeParent=!0),o})}function aa(s,t=1){return s.filter(e=>!e.hideInToc).map(e=>({...e,children:aa(e.children,t+1)}))}function yi(s,t,e){const n=b(()=>s.value.filter(r=>r.meta?.slide?.title).reduce((r,o)=>(ea(r,o),r),[])),a=b(()=>na(n.value,e.value,void 0,void 0,t));return b(()=>aa(a.value))}function wi(s,t,e=A(0),n,a,r){const o=b(()=>nt.value.length),i=A(0),l=A(0),c=b(()=>Ut(s.value,n.value)),m=b(()=>s.value.no),u=b(()=>s.value.meta?.layout||(m.value===1?"cover":"default")),h=b(()=>t.value.current),p=b(()=>t.value.clicksStart),f=b(()=>t.value.total),d=b(()=>nt.value[Math.min(nt.value.length,m.value+1)-1]),g=b(()=>nt.value[Math.max(1,m.value-1)-1]),y=b(()=>m.value<nt.value.length||h.value<f.value),w=b(()=>m.value>1||h.value>0),v=b(()=>a.value?void 0:li(i.value,s.value,g.value));tt(s,(V,R)=>{i.value=V.no-R.no});async function k(V){return!1}const x=yi(nt,m,s);async function O(){l.value=1,f.value<=e.value?await H():e.value+=1}async function D(){l.value=-1,e.value<=p.value?await W(!0):e.value-=1}async function H(V=!1){l.value=1,m.value<nt.value.length&&await _(m.value+1,V&&!a.value?Ms:void 0)}async function W(V=!1){l.value=-1,m.value>1&&await _(m.value-1,V&&!a.value?Ms:void 0)}function lt(){return _(1)}function Z(){return _(o.value)}async function _(V,R=0,ot=!1){Oe.value=!1;const ct=m.value!==V,ts=R!==e.value,K=Fs(V)?.meta,I=K?.slide?.frontmatter.clicksStart??0;R=pe(R,I,K?.__clicksContext?.total??Ms),(ot||ct||ts)&&await r?.push({path:Ut(V,n.value,r.currentRoute.value.name==="export"),query:{...r.currentRoute.value.query,clicks:R===0?void 0:R.toString(),embedded:location.search.includes("embedded")?"true":void 0}})}function P(){r?.push({path:Ut(m.value,!0),query:{...r.currentRoute.value.query}})}function F(){r?.push({path:Ut(m.value,!1),query:{...r.currentRoute.value.query}})}return{slides:nt,total:o,currentPath:c,currentSlideNo:m,currentPage:m,currentSlideRoute:s,currentLayout:u,currentTransition:v,clicksDirection:l,nextRoute:d,prevRoute:g,clicksContext:t,clicks:h,clicksStart:p,clicksTotal:f,hasNext:y,hasPrev:w,tocTree:x,navDirection:i,openInEditor:k,next:O,prev:D,go:_,goLast:Z,goFirst:lt,nextSlide:H,prevSlide:W,enterPresenter:P,exitPresenter:F}}const vi=zn(()=>{const s=Vs(),t=Ka(),e=b(()=>(s?.currentRoute?.value?.query,new URLSearchParams(location.search))),n=b(()=>e.value.has("print")||t.name==="export"),a=A(e.value.get("print")==="clicks"),r=b(()=>e.value.has("embedded")),o=b(()=>t.name==="play"),i=b(()=>t.name==="presenter"),l=b(()=>t.name==="notes"),c=b(()=>!i.value&&(!j.remote||e.value.get("password")===j.remote)),m=b(()=>!!t.params.no),u=b(()=>m.value?Fs(t.params.no)?.no??1:1),h=b(()=>nt.value[u.value-1]),p=A(Xn(nt.value.length,t?.query?.range)),f=ri("clicks","0"),d=b(()=>y(h.value)),g=b({get(){let w=+(f.value||0);return Number.isNaN(w)&&(w=0),w},set(w){Oe.value=!1,f.value=w.toString()}});function y(w){if(w?.meta?.__clicksContext)return w.meta.__clicksContext;const v=w.no,k=Zn(b({get(){return u.value===v?Math.max(+(f.value??0),k.clicksStart):u.value>v?Ms:k.clicksStart},set(x){u.value===v&&(f.value=x.toString())}}),w?.meta.slide?.frontmatter.clicksStart??0,w?.meta.clicks);return w?.meta&&(w.meta.__clicksContext=k),k}return{router:s,currentRoute:b(()=>t),isPrintMode:n,isPrintWithClicks:a,isEmbedded:r,isPlaying:o,isPresenter:i,isNotesViewer:l,isPresenterAvailable:c,hasPrimarySlide:m,currentSlideNo:u,currentSlideRoute:h,clicksContext:d,queryClicksRaw:f,queryClicks:g,printRange:p,getPrimaryClicks:y}}),Xt=zn(()=>{const s=vi(),t=Vs(),e=wi(s.currentSlideRoute,s.clicksContext,s.queryClicks,s.isPresenter,s.isPrintMode,t);return tt([e.total,s.currentRoute],async()=>{const n=s.currentRoute.value.params.no;s.hasPrimarySlide.value&&!Fs(n)&&(n&&n!=="index.html"?await e.go(e.total.value,0,!0):await e.go(1,0,!0))},{flush:"pre",immediate:!0}),{...e,...s}}),_n=Qa(),te=q("slidev-color-schema","auto"),Sn=b(()=>j.colorSchema!=="auto"),ra=b({get(){return Sn.value?j.colorSchema==="dark":te.value==="auto"?_n.value:te.value==="dark"},set(s){Sn.value||(te.value=s===_n.value?"auto":s?"dark":"light")}}),Ec=Fn(ra);if(Bs){const s="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";tt(ra,t=>{const e=window.document.createElement("style");e.appendChild(document.createTextNode(s)),window.document.head.appendChild(e);const n=document.querySelector("html");n.classList.toggle("dark",t),n.classList.toggle("light",!t),window.getComputedStyle(e).opacity,document.head.removeChild(e)},{immediate:!0})}function ki(){const{isPrintMode:s}=Xt();Ya(b(()=>s.value?`
@page {
  size: ${Wn.value}px ${fr.value}px;
  margin: 0px;
}

* {
  transition: none !important;
  transition-duration: 0s !important;
}`:""))}const Ce=Symbol.for("yaml.alias"),bi=Symbol.for("yaml.document"),Ht=Symbol.for("yaml.map"),oa=Symbol.for("yaml.pair"),Ee=Symbol.for("yaml.scalar"),ms=Symbol.for("yaml.seq"),rt=Symbol.for("yaml.node.type"),Ft=s=>!!s&&typeof s=="object"&&s[rt]===Ce,zs=s=>!!s&&typeof s=="object"&&s[rt]===bi,ia=s=>!!s&&typeof s=="object"&&s[rt]===Ht,z=s=>!!s&&typeof s=="object"&&s[rt]===oa,B=s=>!!s&&typeof s=="object"&&s[rt]===Ee,$e=s=>!!s&&typeof s=="object"&&s[rt]===ms;function Y(s){if(s&&typeof s=="object")switch(s[rt]){case Ht:case ms:return!0}return!1}function G(s){if(s&&typeof s=="object")switch(s[rt]){case Ce:case Ht:case Ee:case ms:return!0}return!1}const la=s=>(B(s)||Y(s))&&!!s.anchor,It=Symbol("break visit"),xi=Symbol("skip children"),is=Symbol("remove node");function qs(s,t){const e=Mi(t);zs(s)?Jt(null,s.contents,e,Object.freeze([s]))===is&&(s.contents=null):Jt(null,s,e,Object.freeze([]))}qs.BREAK=It;qs.SKIP=xi;qs.REMOVE=is;function Jt(s,t,e,n){const a=_i(s,t,e,n);if(G(a)||z(a))return Si(s,n,a),Jt(s,a,e,n);if(typeof a!="symbol"){if(Y(t)){n=Object.freeze(n.concat(t));for(let r=0;r<t.items.length;++r){const o=Jt(r,t.items[r],e,n);if(typeof o=="number")r=o-1;else{if(o===It)return It;o===is&&(t.items.splice(r,1),r-=1)}}}else if(z(t)){n=Object.freeze(n.concat(t));const r=Jt("key",t.key,e,n);if(r===It)return It;r===is&&(t.key=null);const o=Jt("value",t.value,e,n);if(o===It)return It;o===is&&(t.value=null)}}return a}function Mi(s){return typeof s=="object"&&(s.Collection||s.Node||s.Value)?Object.assign({Alias:s.Node,Map:s.Node,Scalar:s.Node,Seq:s.Node},s.Value&&{Map:s.Value,Scalar:s.Value,Seq:s.Value},s.Collection&&{Map:s.Collection,Seq:s.Collection},s):s}function _i(s,t,e,n){if(typeof e=="function")return e(s,t,n);if(ia(t))return e.Map?.(s,t,n);if($e(t))return e.Seq?.(s,t,n);if(z(t))return e.Pair?.(s,t,n);if(B(t))return e.Scalar?.(s,t,n);if(Ft(t))return e.Alias?.(s,t,n)}function Si(s,t,e){const n=t[t.length-1];if(Y(n))n.items[s]=e;else if(z(n))s==="key"?n.key=e:n.value=e;else if(zs(n))n.contents=e;else{const a=Ft(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${a} parent`)}}function ca(s){if(/[\x00-\x19\s,[\]{}]/.test(s)){const e=`Anchor must not contain whitespace or control characters: ${JSON.stringify(s)}`;throw new Error(e)}return!0}function os(s,t,e,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let a=0,r=n.length;a<r;++a){const o=n[a],i=os(s,n,String(a),o);i===void 0?delete n[a]:i!==o&&(n[a]=i)}else if(n instanceof Map)for(const a of Array.from(n.keys())){const r=n.get(a),o=os(s,n,a,r);o===void 0?n.delete(a):o!==r&&n.set(a,o)}else if(n instanceof Set)for(const a of Array.from(n)){const r=os(s,n,a,a);r===void 0?n.delete(a):r!==a&&(n.delete(a),n.add(r))}else for(const[a,r]of Object.entries(n)){const o=os(s,n,a,r);o===void 0?delete n[a]:o!==r&&(n[a]=o)}return s.call(t,e,n)}function at(s,t,e){if(Array.isArray(s))return s.map((n,a)=>at(n,String(a),e));if(s&&typeof s.toJSON=="function"){if(!e||!la(s))return s.toJSON(t,e);const n={aliasCount:0,count:1,res:void 0};e.anchors.set(s,n),e.onCreate=r=>{n.res=r,delete e.onCreate};const a=s.toJSON(t,e);return e.onCreate&&e.onCreate(a),a}return typeof s=="bigint"&&!e?.keep?Number(s):s}class Te{constructor(t){Object.defineProperty(this,rt,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:e,maxAliasCount:n,onAnchor:a,reviver:r}={}){if(!zs(t))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:t,keep:!0,mapAsMap:e===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},i=at(this,"",o);if(typeof a=="function")for(const{count:l,res:c}of o.anchors.values())a(c,l);return typeof r=="function"?os(r,{"":i},"",i):i}}class Li extends Te{constructor(t){super(Ce),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t,e){let n;e?.aliasResolveCache?n=e.aliasResolveCache:(n=[],qs(t,{Node:(r,o)=>{(Ft(o)||la(o))&&n.push(o)}}),e&&(e.aliasResolveCache=n));let a;for(const r of n){if(r===this)break;r.anchor===this.source&&(a=r)}return a}toJSON(t,e){if(!e)return{source:this.source};const{anchors:n,doc:a,maxAliasCount:r}=e,o=this.resolve(a,e);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let i=n.get(o);if(i||(at(o,null,e),i=n.get(o)),i?.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(r>=0&&(i.count+=1,i.aliasCount===0&&(i.aliasCount=_s(a,o,n)),i.count*i.aliasCount>r)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return i.res}toString(t,e,n){const a=`*${this.source}`;if(t){if(ca(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(r)}if(t.implicitKey)return`${a} `}return a}}function _s(s,t,e){if(Ft(t)){const n=t.resolve(s),a=e&&n&&e.get(n);return a?a.count*a.aliasCount:0}else if(Y(t)){let n=0;for(const a of t.items){const r=_s(s,a,e);r>n&&(n=r)}return n}else if(z(t)){const n=_s(s,t.key,e),a=_s(s,t.value,e);return Math.max(n,a)}return 1}const pa=s=>!s||typeof s!="function"&&typeof s!="object";class N extends Te{constructor(t){super(Ee),this.value=t}toJSON(t,e){return e?.keep?this.value:at(this.value,t,e)}toString(){return String(this.value)}}N.BLOCK_FOLDED="BLOCK_FOLDED";N.BLOCK_LITERAL="BLOCK_LITERAL";N.PLAIN="PLAIN";N.QUOTE_DOUBLE="QUOTE_DOUBLE";N.QUOTE_SINGLE="QUOTE_SINGLE";function Ai(s,t,e){return e.find(n=>n.identify?.(s)&&!n.format)}function Ps(s,t,e){if(zs(s)&&(s=s.contents),G(s))return s;if(z(s)){const u=e.schema[Ht].createNode?.(e.schema,null,e);return u.items.push(s),u}(s instanceof String||s instanceof Number||s instanceof Boolean||typeof BigInt<"u"&&s instanceof BigInt)&&(s=s.valueOf());const{aliasDuplicateObjects:n,onAnchor:a,onTagObj:r,schema:o,sourceObjects:i}=e;let l;if(n&&s&&typeof s=="object"){if(l=i.get(s),l)return l.anchor??(l.anchor=a(s)),new Li(l.anchor);l={anchor:null,node:null},i.set(s,l)}let c=Ai(s,t,o.tags);if(!c){if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),!s||typeof s!="object"){const u=new N(s);return l&&(l.node=u),u}c=s instanceof Map?o[Ht]:Symbol.iterator in Object(s)?o[ms]:o[Ht]}r&&(r(c),delete e.onTagObj);const m=c?.createNode?c.createNode(e.schema,s,e):typeof c?.nodeClass?.from=="function"?c.nodeClass.from(e.schema,s,e):new N(s);return c.default||(m.tag=c.tag),l&&(l.node=m),m}function Ln(s,t,e){let n=e;for(let a=t.length-1;a>=0;--a){const r=t[a];if(typeof r=="number"&&Number.isInteger(r)&&r>=0){const o=[];o[r]=n,n=o}else n=new Map([[r,n]])}return Ps(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:s,sourceObjects:new Map})}const Oi=s=>s==null||typeof s=="object"&&!!s[Symbol.iterator]().next().done;class ma extends Te{constructor(t,e){super(t),Object.defineProperty(this,"schema",{value:e,configurable:!0,enumerable:!1,writable:!0})}clone(t){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(e.schema=t),e.items=e.items.map(n=>G(n)||z(n)?n.clone(t):n),this.range&&(e.range=this.range.slice()),e}addIn(t,e){if(Oi(t))this.add(e);else{const[n,...a]=t,r=this.get(n,!0);if(Y(r))r.addIn(a,e);else if(r===void 0&&this.schema)this.set(n,Ln(this.schema,a,e));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${a}`)}}deleteIn(t){const[e,...n]=t;if(n.length===0)return this.delete(e);const a=this.get(e,!0);if(Y(a))return a.deleteIn(n);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${n}`)}getIn(t,e){const[n,...a]=t,r=this.get(n,!0);return a.length===0?!e&&B(r)?r.value:r:Y(r)?r.getIn(a,e):void 0}hasAllNullValues(t){return this.items.every(e=>{if(!z(e))return!1;const n=e.value;return n==null||t&&B(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(t){const[e,...n]=t;if(n.length===0)return this.has(e);const a=this.get(e,!0);return Y(a)?a.hasIn(n):!1}setIn(t,e){const[n,...a]=t;if(a.length===0)this.set(n,e);else{const r=this.get(n,!0);if(Y(r))r.setIn(a,e);else if(r===void 0&&this.schema)this.set(n,Ln(this.schema,a,e));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${a}`)}}}const Ci=s=>s.replace(/^(?!$)(?: $)?/gm,"#");function ps(s,t){return/^\n+$/.test(s)?s.substring(1):t?s.replace(/^(?! *$)/gm,t):s}const Kt=(s,t,e)=>s.endsWith(`
`)?ps(e,t):e.includes(`
`)?`
`+ps(e,t):(s.endsWith(" ")?"":" ")+e,ha="flow",fe="block",Ss="quoted";function Gs(s,t,e="flow",{indentAtStart:n,lineWidth:a=80,minContentWidth:r=20,onFold:o,onOverflow:i}={}){if(!a||a<0)return s;a<r&&(r=0);const l=Math.max(1+r,1+a-t.length);if(s.length<=l)return s;const c=[],m={};let u=a-t.length;typeof n=="number"&&(n>a-Math.max(2,r)?c.push(0):u=a-n);let h,p,f=!1,d=-1,g=-1,y=-1;e===fe&&(d=An(s,d,t.length),d!==-1&&(u=d+l));for(let v;v=s[d+=1];){if(e===Ss&&v==="\\"){switch(g=d,s[d+1]){case"x":d+=3;break;case"u":d+=5;break;case"U":d+=9;break;default:d+=1}y=d}if(v===`
`)e===fe&&(d=An(s,d,t.length)),u=d+t.length+l,h=void 0;else{if(v===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){const k=s[d+1];k&&k!==" "&&k!==`
`&&k!=="	"&&(h=d)}if(d>=u)if(h)c.push(h),u=h+l,h=void 0;else if(e===Ss){for(;p===" "||p==="	";)p=v,v=s[d+=1],f=!0;const k=d>y+1?d-2:g-1;if(m[k])return s;c.push(k),m[k]=!0,u=k+l,h=void 0}else f=!0}p=v}if(f&&i&&i(),c.length===0)return s;o&&o();let w=s.slice(0,c[0]);for(let v=0;v<c.length;++v){const k=c[v],x=c[v+1]||s.length;k===0?w=`
${t}${s.slice(0,x)}`:(e===Ss&&m[k]&&(w+=`${s[k]}\\`),w+=`
${t}${s.slice(k+1,x)}`)}return w}function An(s,t,e){let n=t,a=t+1,r=s[a];for(;r===" "||r==="	";)if(t<a+e)r=s[++t];else{do r=s[++t];while(r&&r!==`
`);n=t,a=t+1,r=s[a]}return n}const Ws=(s,t)=>({indentAtStart:t?s.indent.length:s.indentAtStart,lineWidth:s.options.lineWidth,minContentWidth:s.options.minContentWidth}),Us=s=>/^(%|---|\.\.\.)/m.test(s);function Ei(s,t,e){if(!t||t<0)return!1;const n=t-e,a=s.length;if(a<=n)return!1;for(let r=0,o=0;r<a;++r)if(s[r]===`
`){if(r-o>n)return!0;if(o=r+1,a-o<=n)return!1}return!0}function ls(s,t){const e=JSON.stringify(s);if(t.options.doubleQuotedAsJSON)return e;const{implicitKey:n}=t,a=t.options.doubleQuotedMinMultiLineLength,r=t.indent||(Us(s)?"  ":"");let o="",i=0;for(let l=0,c=e[l];c;c=e[++l])if(c===" "&&e[l+1]==="\\"&&e[l+2]==="n"&&(o+=e.slice(i,l)+"\\ ",l+=1,i=l,c="\\"),c==="\\")switch(e[l+1]){case"u":{o+=e.slice(i,l);const m=e.substr(l+2,4);switch(m){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:m.substr(0,2)==="00"?o+="\\x"+m.substr(2):o+=e.substr(l,6)}l+=5,i=l+1}break;case"n":if(n||e[l+2]==='"'||e.length<a)l+=1;else{for(o+=e.slice(i,l)+`

`;e[l+2]==="\\"&&e[l+3]==="n"&&e[l+4]!=='"';)o+=`
`,l+=2;o+=r,e[l+2]===" "&&(o+="\\"),l+=1,i=l+1}break;default:l+=1}return o=i?o+e.slice(i):e,n?o:Gs(o,r,Ss,Ws(t,!1))}function ge(s,t){if(t.options.singleQuote===!1||t.implicitKey&&s.includes(`
`)||/[ \t]\n|\n[ \t]/.test(s))return ls(s,t);const e=t.indent||(Us(s)?"  ":""),n="'"+s.replace(/'/g,"''").replace(/\n+/g,`$&
${e}`)+"'";return t.implicitKey?n:Gs(n,e,ha,Ws(t,!1))}function Qt(s,t){const{singleQuote:e}=t.options;let n;if(e===!1)n=ls;else{const a=s.includes('"'),r=s.includes("'");a&&!r?n=ge:r&&!a?n=ls:n=e?ge:ls}return n(s,t)}let ye;try{ye=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{ye=/\n+(?!\n|$)/g}function Ls({comment:s,type:t,value:e},n,a,r){const{blockQuote:o,commentString:i,lineWidth:l}=n.options;if(!o||/\n[\t ]+$/.test(e))return Qt(e,n);const c=n.indent||(n.forceBlockIndent||Us(e)?"  ":""),m=o==="literal"?!0:o==="folded"||t===N.BLOCK_FOLDED?!1:t===N.BLOCK_LITERAL?!0:!Ei(e,l,c.length);if(!e)return m?`|
`:`>
`;let u,h;for(h=e.length;h>0;--h){const x=e[h-1];if(x!==`
`&&x!=="	"&&x!==" ")break}let p=e.substring(h);const f=p.indexOf(`
`);f===-1?u="-":e===p||f!==p.length-1?(u="+",r&&r()):u="",p&&(e=e.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(ye,`$&${c}`));let d=!1,g,y=-1;for(g=0;g<e.length;++g){const x=e[g];if(x===" ")d=!0;else if(x===`
`)y=g;else break}let w=e.substring(0,y<g?y+1:g);w&&(e=e.substring(w.length),w=w.replace(/\n+/g,`$&${c}`));let k=(d?c?"2":"1":"")+u;if(s&&(k+=" "+i(s.replace(/ ?[\r\n]+/g," ")),a&&a()),!m){const x=e.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let O=!1;const D=Ws(n,!0);o!=="folded"&&t!==N.BLOCK_FOLDED&&(D.onOverflow=()=>{O=!0});const H=Gs(`${w}${x}${p}`,c,fe,D);if(!O)return`>${k}
${c}${H}`}return e=e.replace(/\n+/g,`$&${c}`),`|${k}
${c}${w}${e}${p}`}function $i(s,t,e,n){const{type:a,value:r}=s,{actualString:o,implicitKey:i,indent:l,indentStep:c,inFlow:m}=t;if(i&&r.includes(`
`)||m&&/[[\]{},]/.test(r))return Qt(r,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(r))return i||m||!r.includes(`
`)?Qt(r,t):Ls(s,t,e,n);if(!i&&!m&&a!==N.PLAIN&&r.includes(`
`))return Ls(s,t,e,n);if(Us(r)){if(l==="")return t.forceBlockIndent=!0,Ls(s,t,e,n);if(i&&l===c)return Qt(r,t)}const u=r.replace(/\n+/g,`$&
${l}`);if(o){const h=d=>d.default&&d.tag!=="tag:yaml.org,2002:str"&&d.test?.test(u),{compat:p,tags:f}=t.doc.schema;if(f.some(h)||p?.some(h))return Qt(r,t)}return i?u:Gs(u,l,ha,Ws(t,!1))}function Ti(s,t,e,n){const{implicitKey:a,inFlow:r}=t,o=typeof s.value=="string"?s:Object.assign({},s,{value:String(s.value)});let{type:i}=s;i!==N.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(i=N.QUOTE_DOUBLE);const l=m=>{switch(m){case N.BLOCK_FOLDED:case N.BLOCK_LITERAL:return a||r?Qt(o.value,t):Ls(o,t,e,n);case N.QUOTE_DOUBLE:return ls(o.value,t);case N.QUOTE_SINGLE:return ge(o.value,t);case N.PLAIN:return $i(o,t,e,n);default:return null}};let c=l(i);if(c===null){const{defaultKeyType:m,defaultStringType:u}=t.options,h=a&&m||u;if(c=l(h),c===null)throw new Error(`Unsupported default string type ${h}`)}return c}function Pi(s,t){const e=Object.assign({blockQuote:!0,commentString:Ci,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},s.schema.toStringOptions,t);let n;switch(e.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:s,flowCollectionPadding:e.flowCollectionPadding?" ":"",indent:"",indentStep:typeof e.indent=="number"?" ".repeat(e.indent):"  ",inFlow:n,options:e}}function Di(s,t){if(t.tag){const a=s.filter(r=>r.tag===t.tag);if(a.length>0)return a.find(r=>r.format===t.format)??a[0]}let e,n;if(B(t)){n=t.value;let a=s.filter(r=>r.identify?.(n));if(a.length>1){const r=a.filter(o=>o.test);r.length>0&&(a=r)}e=a.find(r=>r.format===t.format)??a.find(r=>!r.format)}else n=t,e=s.find(a=>a.nodeClass&&n instanceof a.nodeClass);if(!e){const a=n?.constructor?.name??(n===null?"null":typeof n);throw new Error(`Tag not resolved for ${a} value`)}return e}function Ri(s,t,{anchors:e,doc:n}){if(!n.directives)return"";const a=[],r=(B(s)||Y(s))&&s.anchor;r&&ca(r)&&(e.add(r),a.push(`&${r}`));const o=s.tag??(t.default?null:t.tag);return o&&a.push(n.directives.tagString(o)),a.join(" ")}function Ds(s,t,e,n){if(z(s))return s.toString(t,e,n);if(Ft(s)){if(t.doc.directives)return s.toString(t);if(t.resolvedAliases?.has(s))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(s):t.resolvedAliases=new Set([s]),s=s.resolve(t.doc)}let a;const r=G(s)?s:t.doc.createNode(s,{onTagObj:l=>a=l});a??(a=Di(t.doc.schema.tags,r));const o=Ri(r,a,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);const i=typeof a.stringify=="function"?a.stringify(r,t,e,n):B(r)?Ti(r,t,e,n):r.toString(t,e,n);return o?B(r)||i[0]==="{"||i[0]==="["?`${o} ${i}`:`${o}
${t.indent}${i}`:i}function Ni({key:s,value:t},e,n,a){const{allNullValues:r,doc:o,indent:i,indentStep:l,options:{commentString:c,indentSeq:m,simpleKeys:u}}=e;let h=G(s)&&s.comment||null;if(u){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(Y(s)||!G(s)&&typeof s=="object"){const D="With simple keys, collection cannot be used as a key value";throw new Error(D)}}let p=!u&&(!s||h&&t==null&&!e.inFlow||Y(s)||(B(s)?s.type===N.BLOCK_FOLDED||s.type===N.BLOCK_LITERAL:typeof s=="object"));e=Object.assign({},e,{allNullValues:!1,implicitKey:!p&&(u||!r),indent:i+l});let f=!1,d=!1,g=Ds(s,e,()=>f=!0,()=>d=!0);if(!p&&!e.inFlow&&g.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(e.inFlow){if(r||t==null)return f&&n&&n(),g===""?"?":p?`? ${g}`:g}else if(r&&!u||t==null&&p)return g=`? ${g}`,h&&!f?g+=Kt(g,e.indent,c(h)):d&&a&&a(),g;f&&(h=null),p?(h&&(g+=Kt(g,e.indent,c(h))),g=`? ${g}
${i}:`):(g=`${g}:`,h&&(g+=Kt(g,e.indent,c(h))));let y,w,v;G(t)?(y=!!t.spaceBefore,w=t.commentBefore,v=t.comment):(y=!1,w=null,v=null,t&&typeof t=="object"&&(t=o.createNode(t))),e.implicitKey=!1,!p&&!h&&B(t)&&(e.indentAtStart=g.length+1),d=!1,!m&&l.length>=2&&!e.inFlow&&!p&&$e(t)&&!t.flow&&!t.tag&&!t.anchor&&(e.indent=e.indent.substring(2));let k=!1;const x=Ds(t,e,()=>k=!0,()=>d=!0);let O=" ";if(h||y||w){if(O=y?`
`:"",w){const D=c(w);O+=`
${ps(D,e.indent)}`}x===""&&!e.inFlow?O===`
`&&v&&(O=`

`):O+=`
${e.indent}`}else if(!p&&Y(t)){const D=x[0],H=x.indexOf(`
`),W=H!==-1,lt=e.inFlow??t.flow??t.items.length===0;if(W||!lt){let Z=!1;if(W&&(D==="&"||D==="!")){let _=x.indexOf(" ");D==="&"&&_!==-1&&_<H&&x[_+1]==="!"&&(_=x.indexOf(" ",_+1)),(_===-1||H<_)&&(Z=!0)}Z||(O=`
${e.indent}`)}}else(x===""||x[0]===`
`)&&(O="");return g+=O+x,e.inFlow?k&&n&&n():v&&!k?g+=Kt(g,e.indent,c(v)):d&&a&&a(),g}function ji(s,t){(s==="debug"||s==="warn")&&console.warn(t)}const ys="<<",se={identify:s=>s===ys||typeof s=="symbol"&&s.description===ys,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new N(Symbol(ys)),{addToJSMap:ua}),stringify:()=>ys},Ii=(s,t)=>(se.identify(t)||B(t)&&(!t.type||t.type===N.PLAIN)&&se.identify(t.value))&&s?.doc.schema.tags.some(e=>e.tag===se.tag&&e.default);function ua(s,t,e){if(e=s&&Ft(e)?e.resolve(s.doc):e,$e(e))for(const n of e.items)ee(s,t,n);else if(Array.isArray(e))for(const n of e)ee(s,t,n);else ee(s,t,e)}function ee(s,t,e){const n=s&&Ft(e)?e.resolve(s.doc):e;if(!ia(n))throw new Error("Merge sources must be maps or map aliases");const a=n.toJSON(null,s,Map);for(const[r,o]of a)t instanceof Map?t.has(r)||t.set(r,o):t instanceof Set?t.add(r):Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{value:o,writable:!0,enumerable:!0,configurable:!0});return t}function da(s,t,{key:e,value:n}){if(G(e)&&e.addToJSMap)e.addToJSMap(s,t,n);else if(Ii(s,e))ua(s,t,n);else{const a=at(e,"",s);if(t instanceof Map)t.set(a,at(n,a,s));else if(t instanceof Set)t.add(a);else{const r=Vi(e,a,s),o=at(n,r,s);r in t?Object.defineProperty(t,r,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[r]=o}}return t}function Vi(s,t,e){if(t===null)return"";if(typeof t!="object")return String(t);if(G(s)&&e?.doc){const n=Pi(e.doc,{});n.anchors=new Set;for(const r of e.anchors.keys())n.anchors.add(r.anchor);n.inFlow=!0,n.inStringifyKey=!0;const a=s.toString(n);if(!e.mapKeyWarned){let r=JSON.stringify(a);r.length>40&&(r=r.substring(0,36)+'..."'),ji(e.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${r}. Set mapAsMap: true to use object keys.`),e.mapKeyWarned=!0}return a}return JSON.stringify(t)}function Pe(s,t,e){const n=Ps(s,void 0,e),a=Ps(t,void 0,e);return new it(n,a)}class it{constructor(t,e=null){Object.defineProperty(this,rt,{value:oa}),this.key=t,this.value=e}clone(t){let{key:e,value:n}=this;return G(e)&&(e=e.clone(t)),G(n)&&(n=n.clone(t)),new it(e,n)}toJSON(t,e){const n=e?.mapAsMap?new Map:{};return da(e,n,this)}toString(t,e,n){return t?.doc?Ni(this,t,e,n):JSON.stringify(this)}}function fa(s,t,e){return(t.inFlow??s.flow?Hi:Bi)(s,t,e)}function Bi({comment:s,items:t},e,{blockItemPrefix:n,flowChars:a,itemIndent:r,onChompKeep:o,onComment:i}){const{indent:l,options:{commentString:c}}=e,m=Object.assign({},e,{indent:r,type:null});let u=!1;const h=[];for(let f=0;f<t.length;++f){const d=t[f];let g=null;if(G(d))!u&&d.spaceBefore&&h.push(""),Rs(e,h,d.commentBefore,u),d.comment&&(g=d.comment);else if(z(d)){const w=G(d.key)?d.key:null;w&&(!u&&w.spaceBefore&&h.push(""),Rs(e,h,w.commentBefore,u))}u=!1;let y=Ds(d,m,()=>g=null,()=>u=!0);g&&(y+=Kt(y,r,c(g))),u&&g&&(u=!1),h.push(n+y)}let p;if(h.length===0)p=a.start+a.end;else{p=h[0];for(let f=1;f<h.length;++f){const d=h[f];p+=d?`
${l}${d}`:`
`}}return s?(p+=`
`+ps(c(s),l),i&&i()):u&&o&&o(),p}function Hi({items:s},t,{flowChars:e,itemIndent:n}){const{indent:a,indentStep:r,flowCollectionPadding:o,options:{commentString:i}}=t;n+=r;const l=Object.assign({},t,{indent:n,inFlow:!0,type:null});let c=!1,m=0;const u=[];for(let f=0;f<s.length;++f){const d=s[f];let g=null;if(G(d))d.spaceBefore&&u.push(""),Rs(t,u,d.commentBefore,!1),d.comment&&(g=d.comment);else if(z(d)){const w=G(d.key)?d.key:null;w&&(w.spaceBefore&&u.push(""),Rs(t,u,w.commentBefore,!1),w.comment&&(c=!0));const v=G(d.value)?d.value:null;v?(v.comment&&(g=v.comment),v.commentBefore&&(c=!0)):d.value==null&&w?.comment&&(g=w.comment)}g&&(c=!0);let y=Ds(d,l,()=>g=null);f<s.length-1&&(y+=","),g&&(y+=Kt(y,n,i(g))),!c&&(u.length>m||y.includes(`
`))&&(c=!0),u.push(y),m=u.length}const{start:h,end:p}=e;if(u.length===0)return h+p;if(!c){const f=u.reduce((d,g)=>d+g.length+2,2);c=t.options.lineWidth>0&&f>t.options.lineWidth}if(c){let f=h;for(const d of u)f+=d?`
${r}${a}${d}`:`
`;return`${f}
${a}${p}`}else return`${h}${o}${u.join(" ")}${o}${p}`}function Rs({indent:s,options:{commentString:t}},e,n,a){if(n&&a&&(n=n.replace(/^\n+/,"")),n){const r=ps(t(n),s);e.push(r.trimStart())}}function Bt(s,t){const e=B(t)?t.value:t;for(const n of s)if(z(n)&&(n.key===t||n.key===e||B(n.key)&&n.key.value===e))return n}class Gt extends ma{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(Ht,t),this.items=[]}static from(t,e,n){const{keepUndefined:a,replacer:r}=n,o=new this(t),i=(l,c)=>{if(typeof r=="function")c=r.call(e,l,c);else if(Array.isArray(r)&&!r.includes(l))return;(c!==void 0||a)&&o.items.push(Pe(l,c,n))};if(e instanceof Map)for(const[l,c]of e)i(l,c);else if(e&&typeof e=="object")for(const l of Object.keys(e))i(l,e[l]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}add(t,e){let n;z(t)?n=t:!t||typeof t!="object"||!("key"in t)?n=new it(t,t?.value):n=new it(t.key,t.value);const a=Bt(this.items,n.key),r=this.schema?.sortMapEntries;if(a){if(!e)throw new Error(`Key ${n.key} already set`);B(a.value)&&pa(n.value)?a.value.value=n.value:a.value=n.value}else if(r){const o=this.items.findIndex(i=>r(n,i)<0);o===-1?this.items.push(n):this.items.splice(o,0,n)}else this.items.push(n)}delete(t){const e=Bt(this.items,t);return e?this.items.splice(this.items.indexOf(e),1).length>0:!1}get(t,e){const a=Bt(this.items,t)?.value;return(!e&&B(a)?a.value:a)??void 0}has(t){return!!Bt(this.items,t)}set(t,e){this.add(new it(t,e),!0)}toJSON(t,e,n){const a=n?new n:e?.mapAsMap?new Map:{};e?.onCreate&&e.onCreate(a);for(const r of this.items)da(e,a,r);return a}toString(t,e,n){if(!t)return JSON.stringify(this);for(const a of this.items)if(!z(a))throw new Error(`Map items must all be pairs; found ${JSON.stringify(a)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),fa(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:n,onComment:e})}}class ga extends ma{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(ms,t),this.items=[]}add(t){this.items.push(t)}delete(t){const e=ws(t);return typeof e!="number"?!1:this.items.splice(e,1).length>0}get(t,e){const n=ws(t);if(typeof n!="number")return;const a=this.items[n];return!e&&B(a)?a.value:a}has(t){const e=ws(t);return typeof e=="number"&&e<this.items.length}set(t,e){const n=ws(t);if(typeof n!="number")throw new Error(`Expected a valid index, not ${t}.`);const a=this.items[n];B(a)&&pa(e)?a.value=e:this.items[n]=e}toJSON(t,e){const n=[];e?.onCreate&&e.onCreate(n);let a=0;for(const r of this.items)n.push(at(r,String(a++),e));return n}toString(t,e,n){return t?fa(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:n,onComment:e}):JSON.stringify(this)}static from(t,e,n){const{replacer:a}=n,r=new this(t);if(e&&Symbol.iterator in Object(e)){let o=0;for(let i of e){if(typeof a=="function"){const l=e instanceof Set?i:String(o++);i=a.call(e,l,i)}r.items.push(Ps(i,void 0,n))}}return r}}function ws(s){let t=B(s)?s.value:s;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}function Fi(s,t,e){const{replacer:n}=e,a=new ga(s);a.tag="tag:yaml.org,2002:pairs";let r=0;if(t&&Symbol.iterator in Object(t))for(let o of t){typeof n=="function"&&(o=n.call(t,String(r++),o));let i,l;if(Array.isArray(o))if(o.length===2)i=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const c=Object.keys(o);if(c.length===1)i=c[0],l=o[i];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else i=o;a.items.push(Pe(i,l,e))}return a}class De extends ga{constructor(){super(),this.add=Gt.prototype.add.bind(this),this.delete=Gt.prototype.delete.bind(this),this.get=Gt.prototype.get.bind(this),this.has=Gt.prototype.has.bind(this),this.set=Gt.prototype.set.bind(this),this.tag=De.tag}toJSON(t,e){if(!e)return super.toJSON(t);const n=new Map;e?.onCreate&&e.onCreate(n);for(const a of this.items){let r,o;if(z(a)?(r=at(a.key,"",e),o=at(a.value,r,e)):r=at(a,"",e),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,o)}return n}static from(t,e,n){const a=Fi(t,e,n),r=new this;return r.items=a.items,r}}De.tag="tag:yaml.org,2002:omap";class Re extends Gt{constructor(t){super(t),this.tag=Re.tag}add(t){let e;z(t)?e=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?e=new it(t.key,null):e=new it(t,null),Bt(this.items,e.key)||this.items.push(e)}get(t,e){const n=Bt(this.items,t);return!e&&z(n)?B(n.key)?n.key.value:n.key:n}set(t,e){if(typeof e!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof e}`);const n=Bt(this.items,t);n&&!e?this.items.splice(this.items.indexOf(n),1):!n&&e&&this.items.push(new it(t))}toJSON(t,e){return super.toJSON(t,e,Set)}toString(t,e,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),e,n);throw new Error("Set items must all have null values")}static from(t,e,n){const{replacer:a}=n,r=new this(t);if(e&&Symbol.iterator in Object(e))for(let o of e)typeof a=="function"&&(o=a.call(e,o,o)),r.items.push(Pe(o,null,n));return r}}Re.tag="tag:yaml.org,2002:set";new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);function Ne(s=5){const t=[],e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=e.length;for(let a=0;a<s;a++)t.push(e.charAt(Math.floor(Math.random()*n)));return t.join("")}function $c(s,t,e,n){const a=Xn(t+e-1,s);for(let r=0;r<t;r++){const o=n(r),i=a.includes(r+e);for(const l of o)l.classList.toggle("slidev-code-highlighted",i),l.classList.toggle("slidev-code-dishonored",!i),l.classList.toggle("highlighted",i),l.classList.toggle("dishonored",!i)}}function ya(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)}function st(s,t,e){Object.defineProperty(s,t,{value:e,writable:!0,enumerable:!1})}const pt=L({});let zi=[],qi=[];st(pt,"$syncUp",!0);st(pt,"$syncDown",!0);st(pt,"$paused",!1);st(pt,"$onSet",s=>zi.push(s));st(pt,"$onPatch",s=>qi.push(s));ya();st(pt,"$patch",async()=>!1);const Gi={channels:[],enabled:!0,init(s,t,e,n=!1){let a;if(!n)a=new BroadcastChannel(s),a.addEventListener("message",r=>t(r.data)),this.channels.push(a);else if(n){this.listener=function(o){o&&o.key===s&&o.newValue&&t(JSON.parse(o.newValue))},window.addEventListener("storage",this.listener);const r=window.localStorage.getItem(s);r&&t(JSON.parse(r))}return(r,o=!1)=>{this.enabled&&(!n&&a&&!o&&a.postMessage(qn(r)),n&&!o&&window.localStorage.setItem(s,JSON.stringify(r)))}},disable(){this.enabled=!1,this.channels.forEach(s=>s.close()),this.listener&&window.removeEventListener("storage",this.listener)}},Wi=L([Gi]),Ui=new Map,On=A({});function wa(s,t,e=!1){const n=[];let a=!1,r=!1,o,i;const l=L(t);function c(p){n.push(p)}function m(p,f){l[p]!==f&&(clearTimeout(o),a=!0,l[p]=f,o=setTimeout(()=>a=!1,0))}function u(p){a||(clearTimeout(i),r=!0,Object.entries(p).forEach(([f,d])=>{l[f]=d}),i=setTimeout(()=>r=!1,0))}function h(p){Ui.set(p,{onUpdate:u,persist:e,state:l}),On.value[p]=Wi.map(d=>d.init(p,u,l,e)).filter(d=>!!d);function f(){On.value[p].forEach(d=>d?.(qn(l),r)),a||n.forEach(d=>d(l))}tt(l,f,{deep:!0})}return{init:h,onPatch:c,onUpdate:u,patch:m,state:l}}const{init:Ji,onPatch:Tc,patch:Pc,state:Dc}=wa(pt,pt,!1),zt=L({page:0,clicks:0,timer:{status:"stopped",slides:{},startedAt:0,pausedAt:0}});let Ki=[],Qi=[];st(zt,"$syncUp",!0);st(zt,"$syncDown",!0);st(zt,"$paused",!1);st(zt,"$onSet",s=>Ki.push(s));st(zt,"$onPatch",s=>Qi.push(s));ya();st(zt,"$patch",async()=>!1);const{init:Yi,onPatch:Zi,patch:vs,state:Rc}=wa(zt,{page:1,clicks:0,clicksTotal:0,timer:{status:"stopped",slides:{},startedAt:0,pausedAt:0}});function Xi(){const s=Vn().appContext.app,t=L({nav:Xt(),configs:j,themeConfigs:b(()=>j.themeConfig)});s.provide(Ae,A("none")),s.provide(ti,t),s.provide(Le,b(()=>t.nav.currentSlideNo)),s.provide(Hs,Se(qr()));for(const h of yr)h();const{clicksContext:e,currentSlideNo:n,hasPrimarySlide:a,isNotesViewer:r,isPresenter:o,isPrintMode:i}=Xt();Hr({title:Ks,htmlAttrs:j.htmlAttrs}),ki(),Yi(`${Ks} - shared`),Ji(`${Ks} - drawings`);const l=`${location.origin}_${Ne()}`,c=b(()=>o.value?"presenter":"viewer");function m(){(o.value?gs.value.presenterSend:gs.value.viewerSend)&&(r.value||i.value||!o.value&&!ni.includes(location.host.split(":")[0])||(vs("page",+n.value),vs("clicks",e.value.current),vs("clicksTotal",e.value.total),vs("lastUpdate",{id:l,type:c.value,time:new Date().getTime()})))}const u=Vs();u.afterEach(m),tt(e,m),Zi(h=>{(o.value?gs.value.presenterReceive:gs.value.viewerReceive)&&(!a.value||i.value||h.lastUpdate?.type!==c.value&&(+h.page==+n.value&&+e.value.current==+h.clicks||(Oe.value=!1,u.replace({path:Ut(h.page,o.value),query:{...u.currentRoute.value.query,clicks:h.clicks||0}}))))})}const tl=Hn({__name:"App",setup(s){return Xi(),Yt(()=>{for(const[t,e]of Object.entries(gr.value))document.body.style.setProperty(t,e.toString())}),(t,e)=>{const n=Xa("RouterView");return Cs(),Za(n)}}});function sl(s){return s}const el=sl,nl=el(({app:s})=>{}),al=[Object.values([nl])[0],Object.values([])[0]].filter(Boolean);async function va(s,t={}){const e=t.document||s.resolvedOptions.document;if(!e||!s.dirty)return;const n={shouldRender:!0,tags:[]};if(await s.hooks.callHook("dom:beforeRender",n),!!n.shouldRender)return s._domUpdatePromise||(s._domUpdatePromise=new Promise(async a=>{const r=new Map,o=new Promise(p=>{s.resolveTags().then(f=>{p(f.map(d=>{const g=r.get(d._d)||0,y={tag:d,id:(g?`${d._d}:${g}`:d._d)||Ge(d),shouldRender:!0};return d._d&&Kn(d._d)&&r.set(d._d,g+1),y}))})});let i=s._dom;if(!i){i={title:e.title,elMap:new Map().set("htmlAttrs",e.documentElement).set("bodyAttrs",e.body)};for(const p of["body","head"]){const f=e[p]?.children;for(const d of f){const g=d.tagName.toLowerCase();if(!qe.has(g))continue;const y=Qn({tag:g,props:{}},{innerHTML:d.innerHTML,...d.getAttributeNames().reduce((w,v)=>(w[v]=d.getAttribute(v),w),{})||{}});if(y.key=d.getAttribute("data-hid")||void 0,y._d=he(y)||Ge(y),i.elMap.has(y._d)){let w=1,v=y._d;for(;i.elMap.has(v);)v=`${y._d}:${w++}`;i.elMap.set(v,d)}else i.elMap.set(y._d,d)}}}i.pendingSideEffects={...i.sideEffects},i.sideEffects={};function l(p,f,d){const g=`${p}:${f}`;i.sideEffects[g]=d,delete i.pendingSideEffects[g]}function c({id:p,$el:f,tag:d}){const g=d.tag.endsWith("Attrs");i.elMap.set(p,f),g||(d.textContent&&d.textContent!==f.textContent&&(f.textContent=d.textContent),d.innerHTML&&d.innerHTML!==f.innerHTML&&(f.innerHTML=d.innerHTML),l(p,"el",()=>{f?.remove(),i.elMap.delete(p)}));for(const y in d.props){if(!Object.prototype.hasOwnProperty.call(d.props,y))continue;const w=d.props[y];if(y.startsWith("on")&&typeof w=="function"){const k=f?.dataset;if(k&&k[`${y}fired`]){const x=y.slice(0,-5);w.call(f,new Event(x.substring(2)))}f.getAttribute(`data-${y}`)!==""&&((d.tag==="bodyAttrs"?e.defaultView:f).addEventListener(y.substring(2),w.bind(f)),f.setAttribute(`data-${y}`,""));continue}const v=`attr:${y}`;if(y==="class"){if(!w)continue;for(const k of w)g&&l(p,`${v}:${k}`,()=>f.classList.remove(k)),!f.classList.contains(k)&&f.classList.add(k)}else if(y==="style"){if(!w)continue;for(const[k,x]of w)l(p,`${v}:${k}`,()=>{f.style.removeProperty(k)}),f.style.setProperty(k,x)}else w!==!1&&w!==null&&(f.getAttribute(y)!==w&&f.setAttribute(y,w===!0?"":String(w)),g&&l(p,v,()=>f.removeAttribute(y)))}}const m=[],u={bodyClose:void 0,bodyOpen:void 0,head:void 0},h=await o;for(const p of h){const{tag:f,shouldRender:d,id:g}=p;if(d){if(f.tag==="title"){e.title=f.textContent,l("title","",()=>e.title=i.title);continue}p.$el=p.$el||i.elMap.get(g),p.$el?c(p):qe.has(f.tag)&&m.push(p)}}for(const p of m){const f=p.tag.tagPosition||"head";p.$el=e.createElement(p.tag.tag),c(p),u[f]=u[f]||e.createDocumentFragment(),u[f].appendChild(p.$el)}for(const p of h)await s.hooks.callHook("dom:renderTag",p,e,l);u.head&&e.head.appendChild(u.head),u.bodyOpen&&e.body.insertBefore(u.bodyOpen,e.body.firstChild),u.bodyClose&&e.body.appendChild(u.bodyClose);for(const p in i.pendingSideEffects)i.pendingSideEffects[p]();s._dom=i,await s.hooks.callHook("dom:rendered",{renders:h}),a()}).finally(()=>{s._domUpdatePromise=void 0,s.dirty=!1})),s._domUpdatePromise}function rl(s={}){const t=s.domOptions?.render||va;s.document=s.document||(typeof window<"u"?document:void 0);const e=s.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return jr({...s,plugins:[...s.plugins||[],{key:"client",hooks:{"entries:updated":t}}],init:[e?JSON.parse(e):!1,...s.init||[]]})}function ol(s,t){let e=0;return()=>{const n=++e;t(()=>{e===n&&s()})}}function il(s={}){const t=rl({domOptions:{render:ol(()=>va(t),e=>setTimeout(e,0))},...s});return t.install=Vr(t),t}function Nc(s,t=""){const e=["slidev-page",t],n=s?.meta?.slide?.no;return n!=null&&e.push(`slidev-page-${n}`),e.filter(Boolean).join(" ")}async function jc(){const{saveAs:s}=await S(async()=>{const{saveAs:t}=await import("./modules/file-saver-DKWcVV7Q.js").then(e=>e.F);return{saveAs:t}},[],import.meta.url);s(typeof j.download=="string"?j.download:j.exportFilename?`${j.exportFilename}.pdf`:"./slidev-exported.pdf",`${j.title}.pdf`)}function Zt(s,t,e){return(s.instance?.$).provides[t]??e}function ll(){return{install(s){s.directive("click",{name:"v-click",mounted(t,e){const n=As(t,e,e.value);n!=null&&(t.classList.toggle(xs,!0),t.dataset.slidevClicksStart=String(n.start),Number.isFinite(n.end)&&(t.dataset.slidevClicksEnd=String(n.end)),t.watchStopHandle=Yt(()=>{const a=n.isActive.value,r=n.isCurrent.value,o=a&&!r;n.flagHide?(t.classList.toggle(n.flagFade?ns:es,a),t.classList.toggle(Ys,a)):t.classList.toggle(n.flagFade?ns:es,!a),t.classList.toggle(Zs,r),t.classList.toggle(Xs,o)}))},unmounted:ne}),s.directive("after",{name:"v-after",mounted(t,e){const n=As(t,e,"+0");n!=null&&(t.classList.toggle(xs,!0),t.watchStopHandle=Yt(()=>{const a=n.isActive.value,r=n.isCurrent.value,o=a&&!r;n.flagHide?(t.classList.toggle(n.flagFade?ns:es,a),t.classList.toggle(Ys,a)):t.classList.toggle(n.flagFade?ns:es,!a),t.classList.toggle(Zs,r),t.classList.toggle(Xs,o)}))},unmounted:ne}),s.directive("click-hide",{name:"v-click-hide",mounted(t,e){const n=As(t,e,e.value,!0);n!=null&&(t.classList.toggle(xs,!0),t.watchStopHandle=Yt(()=>{const a=n.isActive.value,r=n.isCurrent.value,o=a&&!r;t.classList.toggle(n.flagFade?ns:es,a),t.classList.toggle(Ys,a),t.classList.toggle(Zs,r),t.classList.toggle(Xs,o)}))},unmounted:ne})}}}const ka=new Map;function As(s,t,e,n=!1){const a=Zt(t,Hs)?.value;if(!s||!a)return null;const r=n||t.modifiers.hide!==!1&&t.modifiers.hide!=null,o=t.modifiers.fade!==!1&&t.modifiers.fade!=null,i=a.calculate(e);if(!i)return null;a.register(s,i);const l=b(()=>r?!i.isActive.value:i.isActive.value),c=b(()=>l.value?"shown":Number.isFinite(i.end)?a.current<i.start?"before":"after":r?"after":"before"),m={...i,isShown:l,visibilityState:c,flagFade:o,flagHide:r};return ka.set(s,m),m}function ne(s,t){s.classList.toggle(xs,!1),Zt(t,Hs)?.value?.unregister(s),s.watchStopHandle?.()}function cl(s=In(ta,A())){const t=tr(s),e=tt([hi,ui,di,fi,mi,$s.width,$s.height],()=>{setTimeout(t.update,300)},{flush:"post",immediate:!0});return{...t,stop:e}}function pl(s){return()=>{}}function ml(s,t,e,n=!1){function a(I){return s?Zt(s,I):er(I)}const r=a(Ae),o=a(si)??{},i=a(Le),l=b(()=>pl(i.value)),c=a(Xo)??A(1),m=a(ei)??A(1),{left:u,top:h,stop:p}=cl(a(ta)??A()),{isPrintMode:f}=Xt(),d=["slide","presenter"].includes(r.value)&&!f.value;let g=s?"directive":"prop",y=Ne(),w;if(Array.isArray(t)?w=t:typeof t=="string"&&t.includes(",")?w=t.split(",").map(Number):t!=null&&(g="frontmatter",y=`${t}`,t=o?.dragPos?.[y],w=t?.split(",").map(Number)),g!=="frontmatter"&&!e)throw new Error("[Slidev] Can not identify the source position of the v-drag element, please provide an explicit `id` prop.");const v=[p],k=!n&&t!=null&&!Number.isFinite(w?.[3]);w??=[Number.NaN,Number.NaN,0];const x=A(w[2]),O=A(w[0]+w[2]/2),D=A(n?0:w[4]??0),H=b(()=>D.value*Math.PI/180),W=b(()=>Math.sin(H.value)),lt=b(()=>Math.cos(H.value)),Z=A(),_=A({left:0,top:0,width:0,height:0}),P=A(0);function F(){if(!Z.value)return;const I=Z.value.getBoundingClientRect();_.value={left:I.left/m.value,top:I.top/m.value,width:I.width/m.value,height:I.height/m.value},P.value=(_.value.width+_.value.height)/c.value/(Math.abs(W.value)+Math.abs(lt.value))-x.value}v.push(tt(x,F,{flush:"post"}));const V=A(w[3]??0),R=k?b({get:()=>(k?P.value:V.value)||0,set:I=>!k&&(V.value=I)}):V,ot=k?A(w[1]):A(w[1]+w[3]/2),ct=k?b({get:()=>ot.value+R.value/2,set:I=>ot.value=I-R.value/2}):ot,ts=b(()=>Number.isFinite(O.value)?{position:"absolute",zIndex:100,left:`${O.value-x.value/2}px`,top:`${ct.value-R.value/2}px`,width:`${x.value}px`,height:k?void 0:`${R.value}px`,transformOrigin:"center center",transform:`rotate(${D.value}deg)`}:{position:"absolute",zIndex:100});v.push(tt([O,ct,x,R,D],([I,us,Ve,Be,He])=>{let qt=[I-Ve/2,us-Be/2,Ve].map(Math.round).join();k?qt+=g==="directive"?",NaN":",_":qt+=`,${Math.round(Be)}`,Math.round(He)!==0&&(qt+=`,${Math.round(He)}`),g==="directive"&&(qt=`[${qt}]`),l.value(y,qt,g,e)}));const K={dragId:y,dataSource:g,markdownSource:e,isArrow:n,zoom:m,autoHeight:k,x0:O,y0:ct,width:x,height:R,rotate:D,container:Z,containerStyle:ts,watchStopHandles:v,dragging:b(()=>ds.value===K),mounted(){d&&(F(),t||setTimeout(()=>{F(),O.value=(_.value.left+_.value.width/2-u.value)/c.value,ct.value=(_.value.top-h.value)/c.value,x.value=_.value.width/c.value,R.value=_.value.height/c.value},100))},unmounted(){d&&K.stopDragging()},startDragging(){d&&(F(),ds.value=K)},stopDragging(){d&&ds.value===K&&(ds.value=null)}};return v.push(sr(Z,I=>{const us=document.querySelector("#drag-control-container");us&&I.target&&us.contains(I.target)||K.stopDragging()}),tt(nr(),I=>{I||K.stopDragging()})),K}function hl(){return{install(s){s.directive("drag",{name:"v-drag",created(t,e,n){const a=ml(e,e.value,n.props?.markdownSource);n.props&&(n.props={...n.props},delete n.props.markdownSource),a.container.value=t,t.draggingState=a,t.dataset.dragId=a.dragId,a.watchStopHandles.push(tt(a.containerStyle,r=>{for(const[o,i]of Object.entries(r))i&&(t.style[o]=i)},{immediate:!0})),t.addEventListener("dblclick",a.startDragging)},mounted(t){t.draggingState.mounted()},unmounted(t){const e=t.draggingState;e.unmounted(),t.removeEventListener("dblclick",e.startDragging),e.watchStopHandles.forEach(n=>n())}})}}}function ba(){return Math.floor(Math.random()*2**31)}class ul{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}function we(s,t,e){if(s&&s.length){const[n,a]=t,r=Math.PI/180*e,o=Math.cos(r),i=Math.sin(r);for(const l of s){const[c,m]=l;l[0]=(c-n)*o-(m-a)*i+n,l[1]=(c-n)*i+(m-a)*o+a}}}function dl(s,t,e){const n=[];s.forEach(a=>n.push(...a)),we(n,t,e)}function fl(s,t){return s[0]===t[0]&&s[1]===t[1]}function gl(s,t,e,n=1){const a=e,r=Math.max(t,.1),o=s[0]&&s[0][0]&&typeof s[0][0]=="number"?[s]:s,i=[0,0];if(a)for(const c of o)we(c,i,a);const l=yl(o,r,n);if(a){for(const c of o)we(c,i,-a);dl(l,i,-a)}return l}function yl(s,t,e){const n=[];for(const c of s){const m=[...c];fl(m[0],m[m.length-1])||m.push([m[0][0],m[0][1]]),m.length>2&&n.push(m)}const a=[];t=Math.max(t,.1);const r=[];for(const c of n)for(let m=0;m<c.length-1;m++){const u=c[m],h=c[m+1];if(u[1]!==h[1]){const p=Math.min(u[1],h[1]);r.push({ymin:p,ymax:Math.max(u[1],h[1]),x:p===u[1]?u[0]:h[0],islope:(h[0]-u[0])/(h[1]-u[1])})}}if(r.sort((c,m)=>c.ymin<m.ymin?-1:c.ymin>m.ymin?1:c.x<m.x?-1:c.x>m.x?1:c.ymax===m.ymax?0:(c.ymax-m.ymax)/Math.abs(c.ymax-m.ymax)),!r.length)return a;let o=[],i=r[0].ymin,l=0;for(;o.length||r.length;){if(r.length){let c=-1;for(let u=0;u<r.length&&!(r[u].ymin>i);u++)c=u;r.splice(0,c+1).forEach(u=>{o.push({s:i,edge:u})})}if(o=o.filter(c=>!(c.edge.ymax<=i)),o.sort((c,m)=>c.edge.x===m.edge.x?0:(c.edge.x-m.edge.x)/Math.abs(c.edge.x-m.edge.x)),(e!==1||l%t===0)&&o.length>1)for(let c=0;c<o.length;c=c+2){const m=c+1;if(m>=o.length)break;const u=o[c].edge,h=o[m].edge;a.push([[Math.round(u.x),i],[Math.round(h.x),i]])}i+=e,o.forEach(c=>{c.edge.x=c.edge.x+e*c.edge.islope}),l++}return a}function hs(s,t){var e;const n=t.hachureAngle+90;let a=t.hachureGap;a<0&&(a=t.strokeWidth*4),a=Math.round(Math.max(a,.1));let r=1;return t.roughness>=1&&(((e=t.randomizer)===null||e===void 0?void 0:e.next())||Math.random())>.7&&(r=a),gl(s,a,n,r||1)}class je{constructor(t){this.helper=t}fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){const n=hs(t,e);return{type:"fillSketch",ops:this.renderLines(n,e)}}renderLines(t,e){const n=[];for(const a of t)n.push(...this.helper.doubleLineOps(a[0][0],a[0][1],a[1][0],a[1][1],e));return n}}function Js(s){const t=s[0],e=s[1];return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}class wl extends je{fillPolygons(t,e){let n=e.hachureGap;n<0&&(n=e.strokeWidth*4),n=Math.max(n,.1);const a=Object.assign({},e,{hachureGap:n}),r=hs(t,a),o=Math.PI/180*e.hachureAngle,i=[],l=n*.5*Math.cos(o),c=n*.5*Math.sin(o);for(const[u,h]of r)Js([u,h])&&i.push([[u[0]-l,u[1]+c],[...h]],[[u[0]+l,u[1]-c],[...h]]);return{type:"fillSketch",ops:this.renderLines(i,e)}}}class vl extends je{fillPolygons(t,e){const n=this._fillPolygons(t,e),a=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),r=this._fillPolygons(t,a);return n.ops=n.ops.concat(r.ops),n}}class kl{constructor(t){this.helper=t}fillPolygons(t,e){e=Object.assign({},e,{hachureAngle:0});const n=hs(t,e);return this.dotsOnLines(n,e)}dotsOnLines(t,e){const n=[];let a=e.hachureGap;a<0&&(a=e.strokeWidth*4),a=Math.max(a,.1);let r=e.fillWeight;r<0&&(r=e.strokeWidth/2);const o=a/4;for(const i of t){const l=Js(i),c=l/a,m=Math.ceil(c)-1,u=l-m*a,h=(i[0][0]+i[1][0])/2-a/4,p=Math.min(i[0][1],i[1][1]);for(let f=0;f<m;f++){const d=p+u+f*a,g=h-o+Math.random()*2*o,y=d-o+Math.random()*2*o,w=this.helper.ellipse(g,y,r,r,e);n.push(...w.ops)}}return{type:"fillSketch",ops:n}}}class bl{constructor(t){this.helper=t}fillPolygons(t,e){const n=hs(t,e);return{type:"fillSketch",ops:this.dashedLine(n,e)}}dashedLine(t,e){const n=e.dashOffset<0?e.hachureGap<0?e.strokeWidth*4:e.hachureGap:e.dashOffset,a=e.dashGap<0?e.hachureGap<0?e.strokeWidth*4:e.hachureGap:e.dashGap,r=[];return t.forEach(o=>{const i=Js(o),l=Math.floor(i/(n+a)),c=(i+a-l*(n+a))/2;let m=o[0],u=o[1];m[0]>u[0]&&(m=o[1],u=o[0]);const h=Math.atan((u[1]-m[1])/(u[0]-m[0]));for(let p=0;p<l;p++){const f=p*(n+a),d=f+n,g=[m[0]+f*Math.cos(h)+c*Math.cos(h),m[1]+f*Math.sin(h)+c*Math.sin(h)],y=[m[0]+d*Math.cos(h)+c*Math.cos(h),m[1]+d*Math.sin(h)+c*Math.sin(h)];r.push(...this.helper.doubleLineOps(g[0],g[1],y[0],y[1],e))}}),r}}class xl{constructor(t){this.helper=t}fillPolygons(t,e){const n=e.hachureGap<0?e.strokeWidth*4:e.hachureGap,a=e.zigzagOffset<0?n:e.zigzagOffset;e=Object.assign({},e,{hachureGap:n+a});const r=hs(t,e);return{type:"fillSketch",ops:this.zigzagLines(r,a,e)}}zigzagLines(t,e,n){const a=[];return t.forEach(r=>{const o=Js(r),i=Math.round(o/(2*e));let l=r[0],c=r[1];l[0]>c[0]&&(l=r[1],c=r[0]);const m=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<i;u++){const h=u*2*e,p=(u+1)*2*e,f=Math.sqrt(2*Math.pow(e,2)),d=[l[0]+h*Math.cos(m),l[1]+h*Math.sin(m)],g=[l[0]+p*Math.cos(m),l[1]+p*Math.sin(m)],y=[d[0]+f*Math.cos(m+Math.PI/4),d[1]+f*Math.sin(m+Math.PI/4)];a.push(...this.helper.doubleLineOps(d[0],d[1],y[0],y[1],n),...this.helper.doubleLineOps(y[0],y[1],g[0],g[1],n))}}),a}}const U={};function Ml(s,t){let e=s.fillStyle||"hachure";if(!U[e])switch(e){case"zigzag":U[e]||(U[e]=new wl(t));break;case"cross-hatch":U[e]||(U[e]=new vl(t));break;case"dots":U[e]||(U[e]=new kl(t));break;case"dashed":U[e]||(U[e]=new bl(t));break;case"zigzag-line":U[e]||(U[e]=new xl(t));break;default:e="hachure",U[e]||(U[e]=new je(t));break}return U[e]}const _l=0,ve=1,xa=2,ks={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Sl(s){const t=new Array;for(;s!=="";)if(s.match(/^([ \t\r\n,]+)/))s=s.substr(RegExp.$1.length);else if(s.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:_l,text:RegExp.$1},s=s.substr(RegExp.$1.length);else if(s.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:ve,text:`${parseFloat(RegExp.$1)}`},s=s.substr(RegExp.$1.length);else return[];return t[t.length]={type:xa,text:""},t}function ae(s,t){return s.type===t}function Ie(s){const t=[],e=Sl(s);let n="BOD",a=0,r=e[a];for(;!ae(r,xa);){let o=0;const i=[];if(n==="BOD")if(r.text==="M"||r.text==="m")a++,o=ks[r.text],n=r.text;else return Ie("M0,0"+s);else ae(r,ve)?o=ks[n]:(a++,o=ks[r.text],n=r.text);if(a+o<e.length){for(let l=a;l<a+o;l++){const c=e[l];if(ae(c,ve))i[i.length]=+c.text;else throw new Error("Param not a number: "+n+","+c.text)}if(typeof ks[n]=="number"){const l={key:n,data:i};t.push(l),a+=o,r=e[a],n==="M"&&(n="L"),n==="m"&&(n="l")}else throw new Error("Bad segment: "+n)}else throw new Error("Path data ended short")}return t}function Ma(s){let t=0,e=0,n=0,a=0;const r=[];for(const{key:o,data:i}of s)switch(o){case"M":r.push({key:"M",data:[...i]}),[t,e]=i,[n,a]=i;break;case"m":t+=i[0],e+=i[1],r.push({key:"M",data:[t,e]}),n=t,a=e;break;case"L":r.push({key:"L",data:[...i]}),[t,e]=i;break;case"l":t+=i[0],e+=i[1],r.push({key:"L",data:[t,e]});break;case"C":r.push({key:"C",data:[...i]}),t=i[4],e=i[5];break;case"c":{const l=i.map((c,m)=>m%2?c+e:c+t);r.push({key:"C",data:l}),t=l[4],e=l[5];break}case"Q":r.push({key:"Q",data:[...i]}),t=i[2],e=i[3];break;case"q":{const l=i.map((c,m)=>m%2?c+e:c+t);r.push({key:"Q",data:l}),t=l[2],e=l[3];break}case"A":r.push({key:"A",data:[...i]}),t=i[5],e=i[6];break;case"a":t+=i[5],e+=i[6],r.push({key:"A",data:[i[0],i[1],i[2],i[3],i[4],t,e]});break;case"H":r.push({key:"H",data:[...i]}),t=i[0];break;case"h":t+=i[0],r.push({key:"H",data:[t]});break;case"V":r.push({key:"V",data:[...i]}),e=i[0];break;case"v":e+=i[0],r.push({key:"V",data:[e]});break;case"S":r.push({key:"S",data:[...i]}),t=i[2],e=i[3];break;case"s":{const l=i.map((c,m)=>m%2?c+e:c+t);r.push({key:"S",data:l}),t=l[2],e=l[3];break}case"T":r.push({key:"T",data:[...i]}),t=i[0],e=i[1];break;case"t":t+=i[0],e+=i[1],r.push({key:"T",data:[t,e]});break;case"Z":case"z":r.push({key:"Z",data:[]}),t=n,e=a;break}return r}function _a(s){const t=[];let e="",n=0,a=0,r=0,o=0,i=0,l=0;for(const{key:c,data:m}of s){switch(c){case"M":t.push({key:"M",data:[...m]}),[n,a]=m,[r,o]=m;break;case"C":t.push({key:"C",data:[...m]}),n=m[4],a=m[5],i=m[2],l=m[3];break;case"L":t.push({key:"L",data:[...m]}),[n,a]=m;break;case"H":n=m[0],t.push({key:"L",data:[n,a]});break;case"V":a=m[0],t.push({key:"L",data:[n,a]});break;case"S":{let u=0,h=0;e==="C"||e==="S"?(u=n+(n-i),h=a+(a-l)):(u=n,h=a),t.push({key:"C",data:[u,h,...m]}),i=m[0],l=m[1],n=m[2],a=m[3];break}case"T":{const[u,h]=m;let p=0,f=0;e==="Q"||e==="T"?(p=n+(n-i),f=a+(a-l)):(p=n,f=a);const d=n+2*(p-n)/3,g=a+2*(f-a)/3,y=u+2*(p-u)/3,w=h+2*(f-h)/3;t.push({key:"C",data:[d,g,y,w,u,h]}),i=p,l=f,n=u,a=h;break}case"Q":{const[u,h,p,f]=m,d=n+2*(u-n)/3,g=a+2*(h-a)/3,y=p+2*(u-p)/3,w=f+2*(h-f)/3;t.push({key:"C",data:[d,g,y,w,p,f]}),i=u,l=h,n=p,a=f;break}case"A":{const u=Math.abs(m[0]),h=Math.abs(m[1]),p=m[2],f=m[3],d=m[4],g=m[5],y=m[6];u===0||h===0?(t.push({key:"C",data:[n,a,g,y,g,y]}),n=g,a=y):(n!==g||a!==y)&&(Sa(n,a,g,y,u,h,p,f,d).forEach(function(v){t.push({key:"C",data:v})}),n=g,a=y);break}case"Z":t.push({key:"Z",data:[]}),n=r,a=o;break}e=c}return t}function Ll(s){return Math.PI*s/180}function as(s,t,e){const n=s*Math.cos(e)-t*Math.sin(e),a=s*Math.sin(e)+t*Math.cos(e);return[n,a]}function Sa(s,t,e,n,a,r,o,i,l,c){const m=Ll(o);let u=[],h=0,p=0,f=0,d=0;if(c)[h,p,f,d]=c;else{[s,t]=as(s,t,-m),[e,n]=as(e,n,-m);const _=(s-e)/2,P=(t-n)/2;let F=_*_/(a*a)+P*P/(r*r);F>1&&(F=Math.sqrt(F),a=F*a,r=F*r);const V=i===l?-1:1,R=a*a,ot=r*r,ct=R*ot-R*P*P-ot*_*_,ts=R*P*P+ot*_*_,K=V*Math.sqrt(Math.abs(ct/ts));f=K*a*P/r+(s+e)/2,d=K*-r*_/a+(t+n)/2,h=Math.asin(parseFloat(((t-d)/r).toFixed(9))),p=Math.asin(parseFloat(((n-d)/r).toFixed(9))),s<f&&(h=Math.PI-h),e<f&&(p=Math.PI-p),h<0&&(h=Math.PI*2+h),p<0&&(p=Math.PI*2+p),l&&h>p&&(h=h-Math.PI*2),!l&&p>h&&(p=p-Math.PI*2)}let g=p-h;if(Math.abs(g)>Math.PI*120/180){const _=p,P=e,F=n;l&&p>h?p=h+Math.PI*120/180*1:p=h+Math.PI*120/180*-1,e=f+a*Math.cos(p),n=d+r*Math.sin(p),u=Sa(e,n,P,F,a,r,o,0,l,[p,_,f,d])}g=p-h;const y=Math.cos(h),w=Math.sin(h),v=Math.cos(p),k=Math.sin(p),x=Math.tan(g/4),O=4/3*a*x,D=4/3*r*x,H=[s,t],W=[s+O*w,t-D*y],lt=[e+O*k,n-D*v],Z=[e,n];if(W[0]=2*H[0]-W[0],W[1]=2*H[1]-W[1],c)return[W,lt,Z].concat(u);{u=[W,lt,Z].concat(u);const _=[];for(let P=0;P<u.length;P+=3){const F=as(u[P][0],u[P][1],m),V=as(u[P+1][0],u[P+1][1],m),R=as(u[P+2][0],u[P+2][1],m);_.push([F[0],F[1],V[0],V[1],R[0],R[1]])}return _}}const Al={randOffset:El,randOffsetWithRange:$l,ellipse:ke,doubleLineOps:Tl};function X(s,t,e,n,a){return{type:"path",ops:mt(s,t,e,n,a)}}function cs(s,t,e){const n=(s||[]).length;if(n>2){const a=[];for(let r=0;r<n-1;r++)a.push(...mt(s[r][0],s[r][1],s[r+1][0],s[r+1][1],e));return t&&a.push(...mt(s[n-1][0],s[n-1][1],s[0][0],s[0][1],e)),{type:"path",ops:a}}else if(n===2)return X(s[0][0],s[0][1],s[1][0],s[1][1],e);return{type:"path",ops:[]}}function Ol(s,t){return cs(s,!0,t)}function La(s,t,e,n,a){const r=[[s,t],[s+e,t],[s+e,t+n],[s,t+n]];return Ol(r,a)}function Cn(s,t){if(s.length){const n=typeof s[0][0]=="number"?[s]:s,a=bs(n[0],1*(1+t.roughness*.2),t),r=t.disableMultiStroke?[]:bs(n[0],1.5*(1+t.roughness*.22),Tn(t));for(let o=1;o<n.length;o++){const i=n[o];if(i.length){const l=bs(i,1*(1+t.roughness*.2),t),c=t.disableMultiStroke?[]:bs(i,1.5*(1+t.roughness*.22),Tn(t));for(const m of l)m.op!=="move"&&a.push(m);for(const m of c)m.op!=="move"&&r.push(m)}}return{type:"path",ops:a.concat(r)}}return{type:"path",ops:[]}}function ke(s,t,e,n,a){const r=Aa(e,n,a);return be(s,t,a,r).opset}function Aa(s,t,e){const n=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(s/2,2)+Math.pow(t/2,2))/2)),a=Math.ceil(Math.max(e.curveStepCount,e.curveStepCount/Math.sqrt(200)*n)),r=Math.PI*2/a;let o=Math.abs(s/2),i=Math.abs(t/2);const l=1-e.curveFitting;return o+=M(o*l,e),i+=M(i*l,e),{increment:r,rx:o,ry:i}}function be(s,t,e,n){const[a,r]=Pn(n.increment,s,t,n.rx,n.ry,1,n.increment*Ns(.1,Ns(.4,1,e),e),e);let o=js(a,null,e);if(!e.disableMultiStroke&&e.roughness!==0){const[i]=Pn(n.increment,s,t,n.rx,n.ry,1.5,0,e),l=js(i,null,e);o=o.concat(l)}return{estimatedPoints:r,opset:{type:"path",ops:o}}}function En(s,t,e,n,a,r,o,i,l){const c=s,m=t;let u=Math.abs(e/2),h=Math.abs(n/2);u+=M(u*.01,l),h+=M(h*.01,l);let p=a,f=r;for(;p<0;)p+=Math.PI*2,f+=Math.PI*2;f-p>Math.PI*2&&(p=0,f=Math.PI*2);const d=Math.PI*2/l.curveStepCount,g=Math.min(d/2,(f-p)/2),y=Dn(g,c,m,u,h,p,f,1,l);if(!l.disableMultiStroke){const w=Dn(g,c,m,u,h,p,f,1.5,l);y.push(...w)}return o&&(i?y.push(...mt(c,m,c+u*Math.cos(p),m+h*Math.sin(p),l),...mt(c,m,c+u*Math.cos(f),m+h*Math.sin(f),l)):y.push({op:"lineTo",data:[c,m]},{op:"lineTo",data:[c+u*Math.cos(p),m+h*Math.sin(p)]})),{type:"path",ops:y}}function $n(s,t){const e=_a(Ma(Ie(s))),n=[];let a=[0,0],r=[0,0];for(const{key:o,data:i}of e)switch(o){case"M":{r=[i[0],i[1]],a=[i[0],i[1]];break}case"L":n.push(...mt(r[0],r[1],i[0],i[1],t)),r=[i[0],i[1]];break;case"C":{const[l,c,m,u,h,p]=i;n.push(...Pl(l,c,m,u,h,p,r,t)),r=[h,p];break}case"Z":n.push(...mt(r[0],r[1],a[0],a[1],t)),r=[a[0],a[1]];break}return{type:"path",ops:n}}function re(s,t){const e=[];for(const n of s)if(n.length){const a=t.maxRandomnessOffset||0,r=n.length;if(r>2){e.push({op:"move",data:[n[0][0]+M(a,t),n[0][1]+M(a,t)]});for(let o=1;o<r;o++)e.push({op:"lineTo",data:[n[o][0]+M(a,t),n[o][1]+M(a,t)]})}}return{type:"fillPath",ops:e}}function Wt(s,t){return Ml(t,Al).fillPolygons(s,t)}function Cl(s,t,e,n,a,r,o){const i=s,l=t;let c=Math.abs(e/2),m=Math.abs(n/2);c+=M(c*.01,o),m+=M(m*.01,o);let u=a,h=r;for(;u<0;)u+=Math.PI*2,h+=Math.PI*2;h-u>Math.PI*2&&(u=0,h=Math.PI*2);const p=(h-u)/o.curveStepCount,f=[];for(let d=u;d<=h;d=d+p)f.push([i+c*Math.cos(d),l+m*Math.sin(d)]);return f.push([i+c*Math.cos(h),l+m*Math.sin(h)]),f.push([i,l]),Wt([f],o)}function El(s,t){return M(s,t)}function $l(s,t,e){return Ns(s,t,e)}function Tl(s,t,e,n,a){return mt(s,t,e,n,a,!0)}function Tn(s){const t=Object.assign({},s);return t.randomizer=void 0,s.seed&&(t.seed=s.seed+1),t}function Oa(s){return s.randomizer||(s.randomizer=new ul(s.seed||0)),s.randomizer.next()}function Ns(s,t,e,n=1){return e.roughness*n*(Oa(e)*(t-s)+s)}function M(s,t,e=1){return Ns(-s,s,t,e)}function mt(s,t,e,n,a,r=!1){const o=r?a.disableMultiStrokeFill:a.disableMultiStroke,i=xe(s,t,e,n,a,!0,!1);if(o)return i;const l=xe(s,t,e,n,a,!0,!0);return i.concat(l)}function xe(s,t,e,n,a,r,o){const i=Math.pow(s-e,2)+Math.pow(t-n,2),l=Math.sqrt(i);let c=1;l<200?c=1:l>500?c=.4:c=-.0016668*l+1.233334;let m=a.maxRandomnessOffset||0;m*m*100>i&&(m=l/10);const u=m/2,h=.2+Oa(a)*.2;let p=a.bowing*a.maxRandomnessOffset*(n-t)/200,f=a.bowing*a.maxRandomnessOffset*(s-e)/200;p=M(p,a,c),f=M(f,a,c);const d=[],g=()=>M(u,a,c),y=()=>M(m,a,c),w=a.preserveVertices;return o?d.push({op:"move",data:[s+(w?0:g()),t+(w?0:g())]}):d.push({op:"move",data:[s+(w?0:M(m,a,c)),t+(w?0:M(m,a,c))]}),o?d.push({op:"bcurveTo",data:[p+s+(e-s)*h+g(),f+t+(n-t)*h+g(),p+s+2*(e-s)*h+g(),f+t+2*(n-t)*h+g(),e+(w?0:g()),n+(w?0:g())]}):d.push({op:"bcurveTo",data:[p+s+(e-s)*h+y(),f+t+(n-t)*h+y(),p+s+2*(e-s)*h+y(),f+t+2*(n-t)*h+y(),e+(w?0:y()),n+(w?0:y())]}),d}function bs(s,t,e){if(!s.length)return[];const n=[];n.push([s[0][0]+M(t,e),s[0][1]+M(t,e)]),n.push([s[0][0]+M(t,e),s[0][1]+M(t,e)]);for(let a=1;a<s.length;a++)n.push([s[a][0]+M(t,e),s[a][1]+M(t,e)]),a===s.length-1&&n.push([s[a][0]+M(t,e),s[a][1]+M(t,e)]);return js(n,null,e)}function js(s,t,e){const n=s.length,a=[];if(n>3){const r=[],o=1-e.curveTightness;a.push({op:"move",data:[s[1][0],s[1][1]]});for(let i=1;i+2<n;i++){const l=s[i];r[0]=[l[0],l[1]],r[1]=[l[0]+(o*s[i+1][0]-o*s[i-1][0])/6,l[1]+(o*s[i+1][1]-o*s[i-1][1])/6],r[2]=[s[i+1][0]+(o*s[i][0]-o*s[i+2][0])/6,s[i+1][1]+(o*s[i][1]-o*s[i+2][1])/6],r[3]=[s[i+1][0],s[i+1][1]],a.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]]})}}else n===3?(a.push({op:"move",data:[s[1][0],s[1][1]]}),a.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[2][0],s[2][1]]})):n===2&&a.push(...xe(s[0][0],s[0][1],s[1][0],s[1][1],e,!0,!0));return a}function Pn(s,t,e,n,a,r,o,i){const l=i.roughness===0,c=[],m=[];if(l){s=s/4,m.push([t+n*Math.cos(-s),e+a*Math.sin(-s)]);for(let u=0;u<=Math.PI*2;u=u+s){const h=[t+n*Math.cos(u),e+a*Math.sin(u)];c.push(h),m.push(h)}m.push([t+n*Math.cos(0),e+a*Math.sin(0)]),m.push([t+n*Math.cos(s),e+a*Math.sin(s)])}else{const u=M(.5,i)-Math.PI/2;m.push([M(r,i)+t+.9*n*Math.cos(u-s),M(r,i)+e+.9*a*Math.sin(u-s)]);const h=Math.PI*2+u-.01;for(let p=u;p<h;p=p+s){const f=[M(r,i)+t+n*Math.cos(p),M(r,i)+e+a*Math.sin(p)];c.push(f),m.push(f)}m.push([M(r,i)+t+n*Math.cos(u+Math.PI*2+o*.5),M(r,i)+e+a*Math.sin(u+Math.PI*2+o*.5)]),m.push([M(r,i)+t+.98*n*Math.cos(u+o),M(r,i)+e+.98*a*Math.sin(u+o)]),m.push([M(r,i)+t+.9*n*Math.cos(u+o*.5),M(r,i)+e+.9*a*Math.sin(u+o*.5)])}return[m,c]}function Dn(s,t,e,n,a,r,o,i,l){const c=r+M(.1,l),m=[];m.push([M(i,l)+t+.9*n*Math.cos(c-s),M(i,l)+e+.9*a*Math.sin(c-s)]);for(let u=c;u<=o;u=u+s)m.push([M(i,l)+t+n*Math.cos(u),M(i,l)+e+a*Math.sin(u)]);return m.push([t+n*Math.cos(o),e+a*Math.sin(o)]),m.push([t+n*Math.cos(o),e+a*Math.sin(o)]),js(m,null,l)}function Pl(s,t,e,n,a,r,o,i){const l=[],c=[i.maxRandomnessOffset||1,(i.maxRandomnessOffset||1)+.3];let m=[0,0];const u=i.disableMultiStroke?1:2,h=i.preserveVertices;for(let p=0;p<u;p++)p===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(h?0:M(c[0],i)),o[1]+(h?0:M(c[0],i))]}),m=h?[a,r]:[a+M(c[p],i),r+M(c[p],i)],l.push({op:"bcurveTo",data:[s+M(c[p],i),t+M(c[p],i),e+M(c[p],i),n+M(c[p],i),m[0],m[1]]});return l}function rs(s){return[...s]}function Rn(s,t=0){const e=s.length;if(e<3)throw new Error("A curve must have at least three points.");const n=[];if(e===3)n.push(rs(s[0]),rs(s[1]),rs(s[2]),rs(s[2]));else{const a=[];a.push(s[0],s[0]);for(let i=1;i<s.length;i++)a.push(s[i]),i===s.length-1&&a.push(s[i]);const r=[],o=1-t;n.push(rs(a[0]));for(let i=1;i+2<a.length;i++){const l=a[i];r[0]=[l[0],l[1]],r[1]=[l[0]+(o*a[i+1][0]-o*a[i-1][0])/6,l[1]+(o*a[i+1][1]-o*a[i-1][1])/6],r[2]=[a[i+1][0]+(o*a[i][0]-o*a[i+2][0])/6,a[i+1][1]+(o*a[i][1]-o*a[i+2][1])/6],r[3]=[a[i+1][0],a[i+1][1]],n.push(r[1],r[2],r[3])}}return n}function Dl(s,t){return Math.sqrt(Os(s,t))}function Os(s,t){return Math.pow(s[0]-t[0],2)+Math.pow(s[1]-t[1],2)}function Rl(s,t,e){const n=Os(t,e);if(n===0)return Os(s,t);let a=((s[0]-t[0])*(e[0]-t[0])+(s[1]-t[1])*(e[1]-t[1]))/n;return a=Math.max(0,Math.min(1,a)),Os(s,Vt(t,e,a))}function Vt(s,t,e){return[s[0]+(t[0]-s[0])*e,s[1]+(t[1]-s[1])*e]}function Nl(s,t){const e=s[t+0],n=s[t+1],a=s[t+2],r=s[t+3];let o=3*n[0]-2*e[0]-r[0];o*=o;let i=3*n[1]-2*e[1]-r[1];i*=i;let l=3*a[0]-2*r[0]-e[0];l*=l;let c=3*a[1]-2*r[1]-e[1];return c*=c,o<l&&(o=l),i<c&&(i=c),o+i}function Me(s,t,e,n){const a=n||[];if(Nl(s,t)<e){const r=s[t+0];a.length?Dl(a[a.length-1],r)>1&&a.push(r):a.push(r),a.push(s[t+3])}else{const o=s[t+0],i=s[t+1],l=s[t+2],c=s[t+3],m=Vt(o,i,.5),u=Vt(i,l,.5),h=Vt(l,c,.5),p=Vt(m,u,.5),f=Vt(u,h,.5),d=Vt(p,f,.5);Me([o,m,p,d],0,e,a),Me([d,f,h,c],0,e,a)}return a}function jl(s,t){return Is(s,0,s.length,t)}function Is(s,t,e,n,a){const r=a||[],o=s[t],i=s[e-1];let l=0,c=1;for(let m=t+1;m<e-1;++m){const u=Rl(s[m],o,i);u>l&&(l=u,c=m)}return Math.sqrt(l)>n?(Is(s,t,c+1,n,r),Is(s,c,e,n,r)):(r.length||r.push(o),r.push(i)),r}function _e(s,t=.15,e){const n=[],a=(s.length-1)/3;for(let r=0;r<a;r++){const o=r*3;Me(s,o,t,n)}return e&&e>0?Is(n,0,n.length,e):n}function Il(s,t,e){const n=Ie(s),a=_a(Ma(n)),r=[];let o=[],i=[0,0],l=[];const c=()=>{l.length>=4&&o.push(..._e(l,t)),l=[]},m=()=>{c(),o.length&&(r.push(o),o=[])};for(const{key:h,data:p}of a)switch(h){case"M":m(),i=[p[0],p[1]],o.push(i);break;case"L":c(),o.push([p[0],p[1]]);break;case"C":if(!l.length){const f=o.length?o[o.length-1]:i;l.push([f[0],f[1]])}l.push([p[0],p[1]]),l.push([p[2],p[3]]),l.push([p[4],p[5]]);break;case"Z":c(),o.push([i[0],i[1]]);break}if(m(),!e)return r;const u=[];for(const h of r){const p=jl(h,e);p.length&&u.push(p)}return u}const Q="none";class Vl{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return ba()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,n){return{shape:t,sets:e||[],options:n||this.defaultOptions}}line(t,e,n,a,r){const o=this._o(r);return this._d("line",[X(t,e,n,a,o)],o)}rectangle(t,e,n,a,r){const o=this._o(r),i=[],l=La(t,e,n,a,o);if(o.fill){const c=[[t,e],[t+n,e],[t+n,e+a],[t,e+a]];o.fillStyle==="solid"?i.push(re([c],o)):i.push(Wt([c],o))}return o.stroke!==Q&&i.push(l),this._d("rectangle",i,o)}ellipse(t,e,n,a,r){const o=this._o(r),i=[],l=Aa(n,a,o),c=be(t,e,o,l);if(o.fill)if(o.fillStyle==="solid"){const m=be(t,e,o,l).opset;m.type="fillPath",i.push(m)}else i.push(Wt([c.estimatedPoints],o));return o.stroke!==Q&&i.push(c.opset),this._d("ellipse",i,o)}circle(t,e,n,a){const r=this.ellipse(t,e,n,n,a);return r.shape="circle",r}linearPath(t,e){const n=this._o(e);return this._d("linearPath",[cs(t,!1,n)],n)}arc(t,e,n,a,r,o,i=!1,l){const c=this._o(l),m=[],u=En(t,e,n,a,r,o,i,!0,c);if(i&&c.fill)if(c.fillStyle==="solid"){const h=Object.assign({},c);h.disableMultiStroke=!0;const p=En(t,e,n,a,r,o,!0,!1,h);p.type="fillPath",m.push(p)}else m.push(Cl(t,e,n,a,r,o,c));return c.stroke!==Q&&m.push(u),this._d("arc",m,c)}curve(t,e){const n=this._o(e),a=[],r=Cn(t,n);if(n.fill&&n.fill!==Q)if(n.fillStyle==="solid"){const o=Cn(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],i=t;if(i.length){const c=typeof i[0][0]=="number"?[i]:i;for(const m of c)m.length<3?o.push(...m):m.length===3?o.push(..._e(Rn([m[0],m[0],m[1],m[2]]),10,(1+n.roughness)/2)):o.push(..._e(Rn(m),10,(1+n.roughness)/2))}o.length&&a.push(Wt([o],n))}return n.stroke!==Q&&a.push(r),this._d("curve",a,n)}polygon(t,e){const n=this._o(e),a=[],r=cs(t,!0,n);return n.fill&&(n.fillStyle==="solid"?a.push(re([t],n)):a.push(Wt([t],n))),n.stroke!==Q&&a.push(r),this._d("polygon",a,n)}path(t,e){const n=this._o(e),a=[];if(!t)return this._d("path",a,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const r=n.fill&&n.fill!=="transparent"&&n.fill!==Q,o=n.stroke!==Q,i=!!(n.simplification&&n.simplification<1),l=i?4-4*(n.simplification||1):(1+n.roughness)/2,c=Il(t,1,l),m=$n(t,n);if(r)if(n.fillStyle==="solid")if(c.length===1){const u=$n(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else a.push(re(c,n));else a.push(Wt(c,n));return o&&(i?c.forEach(u=>{a.push(cs(u,!1,n))}):a.push(m)),this._d("path",a,n)}opsToPath(t,e){let n="";for(const a of t.ops){const r=typeof e=="number"&&e>=0?a.data.map(o=>+o.toFixed(e)):a.data;switch(a.op){case"move":n+=`M${r[0]} ${r[1]} `;break;case"bcurveTo":n+=`C${r[0]} ${r[1]}, ${r[2]} ${r[3]}, ${r[4]} ${r[5]} `;break;case"lineTo":n+=`L${r[0]} ${r[1]} `;break}}return n.trim()}toPaths(t){const e=t.sets||[],n=t.options||this.defaultOptions,a=[];for(const r of e){let o=null;switch(r.type){case"path":o={d:this.opsToPath(r),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:Q};break;case"fillPath":o={d:this.opsToPath(r),stroke:Q,strokeWidth:0,fill:n.fill||Q};break;case"fillSketch":o=this.fillSketch(r,n);break}o&&a.push(o)}return a}fillSketch(t,e){let n=e.fillWeight;return n<0&&(n=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||Q,strokeWidth:n,fill:Q}}_mergedShape(t){return t.filter((e,n)=>n===0?!0:e.op!=="move")}}const Ca="http://www.w3.org/2000/svg",Bl=800;let oe=null;function Hl(){return oe||(oe=new Vl().defaultOptions),oe}function ie(s,t,e){return{...Hl(),maxRandomnessOffset:2,roughness:s==="highlight"?3:1.5,bowing:1,stroke:"#000",strokeWidth:1.5,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,disableMultiStroke:s!=="double",disableMultiStrokeFill:!1,seed:t,...e}}function Fl(s){const t=s.padding;if(t||t===0){if(typeof t=="number")return[t,t,t,t];if(Array.isArray(t)){const e=t;if(e.length)switch(e.length){case 4:return[...e];case 1:return[e[0],e[0],e[0],e[0]];case 2:return[...e,...e];case 3:return[...e,e[1]];default:return[e[0],e[1],e[2],e[3]]}}}return[5,5,5,5]}function zl(s,t,e,n,a,r){const o=[];let i=e.strokeWidth||2;const l=Fl(e),c=e.animate===void 0?!0:!!e.animate,m=e.iterations||2,u=e.rtl?1:0,h=ie("single",r,e);switch(e.type){case"underline":{const p=t.y+t.h+l[2];for(let f=u;f<m+u;f++)f%2?o.push(X(t.x+t.w,p,t.x,p,h)):o.push(X(t.x,p,t.x+t.w,p,h));break}case"strike-through":{const p=t.y+t.h/2;for(let f=u;f<m+u;f++)f%2?o.push(X(t.x+t.w,p,t.x,p,h)):o.push(X(t.x,p,t.x+t.w,p,h));break}case"box":{const p=t.x-l[3],f=t.y-l[0],d=t.w+(l[1]+l[3]),g=t.h+(l[0]+l[2]);for(let y=0;y<m;y++)o.push(La(p,f,d,g,h));break}case"bracket":{const p=Array.isArray(e.brackets)?e.brackets:e.brackets?[e.brackets]:["right"],f=t.x-l[3]*2,d=t.x+t.w+l[1]*2,g=t.y-l[0]*2,y=t.y+t.h+l[2]*2;for(const w of p){let v;switch(w){case"bottom":v=[[f,t.y+t.h],[f,y],[d,y],[d,t.y+t.h]];break;case"top":v=[[f,t.y],[f,g],[d,g],[d,t.y]];break;case"left":v=[[t.x,g],[f,g],[f,y],[t.x,y]];break;case"right":v=[[t.x+t.w,g],[d,g],[d,y],[t.x+t.w,y]];break}v&&o.push(cs(v,!1,h))}break}case"crossed-off":{const p=t.x,f=t.y,d=p+t.w,g=f+t.h;for(let y=u;y<m+u;y++)y%2?o.push(X(d,g,p,f,h)):o.push(X(p,f,d,g,h));for(let y=u;y<m+u;y++)y%2?o.push(X(p,g,d,f,h)):o.push(X(d,f,p,g,h));break}case"circle":{const p=ie("double",r,e),f=t.w+(l[1]+l[3]),d=t.h+(l[0]+l[2]),g=t.x-l[3]+f/2,y=t.y-l[0]+d/2,w=Math.floor(m/2),v=m-w*2;for(let k=0;k<w;k++)o.push(ke(g,y,f,d,p));for(let k=0;k<v;k++)o.push(ke(g,y,f,d,h));break}case"highlight":{const p=ie("highlight",r,e);i=t.h*.95;const f=t.y+t.h/2;for(let d=u;d<m+u;d++)d%2?o.push(X(t.x+t.w,f,t.x,f,p)):o.push(X(t.x,f,t.x+t.w,f,p));break}}if(o.length){const p=ql(o),f=[],d=[];let g=0;const y=(w,v,k)=>w.setAttribute(v,k);for(const w of p){const v=document.createElementNS(Ca,"path");if(y(v,"d",w),y(v,"fill","none"),y(v,"stroke",e.color||"currentColor"),y(v,"stroke-width",`${i}`),e.opacity!==void 0&&y(v,"style",`opacity:${e.opacity}`),c){const k=v.getTotalLength();f.push(k),g+=k}s.appendChild(v),d.push(v)}if(c){let w=0;for(let v=0;v<d.length;v++){const k=d[v],x=f[v],O=g?a*(x/g):0,D=n+w,H=k.style;H.strokeDashoffset=`${x}`,H.strokeDasharray=`${x}`,H.animation=`rough-notation-dash ${O}ms ease-out ${D}ms forwards`,w+=O}return Nn(a+n)}}return Nn(0)}function Nn(s){return new Promise(t=>setTimeout(t,s))}function ql(s){const t=[];for(const e of s){let n="";for(const a of e.ops){const r=a.data;switch(a.op){case"move":n.trim()&&t.push(n.trim()),n=`M${r[0]} ${r[1]} `;break;case"bcurveTo":n+=`C${r[0]} ${r[1]}, ${r[2]} ${r[3]}, ${r[4]} ${r[5]} `;break;case"lineTo":n+=`L${r[0]} ${r[1]} `;break}}n.trim()&&t.push(n.trim())}return t}function Gl(){if(!window.__rno_kf_s){const s=window.__rno_kf_s=document.createElement("style");s.textContent="@keyframes rough-notation-dash { to { stroke-dashoffset: 0; } }",document.head.appendChild(s)}}var Wl=Object.defineProperty,Ul=(s,t,e)=>t in s?Wl(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,et=(s,t,e)=>(Ul(s,typeof t!="symbol"?t+"":t,e),e);class Jl{constructor(t,e){et(this,"_state","unattached"),et(this,"_config"),et(this,"_resizing",!1),et(this,"_ro"),et(this,"_seed",ba()),et(this,"_e"),et(this,"_svg"),et(this,"_lastSizes",[]),et(this,"_animationDelay",0),et(this,"_resizeListener",()=>{this._resizing||(this._resizing=!0,setTimeout(()=>{this._resizing=!1,this._state==="showing"&&this.haveRectsChanged()&&this.show()},400))}),et(this,"pendingRefresh"),this._e=t,this._config=JSON.parse(JSON.stringify(e)),this.attach()}getConfig(t){return this._config[t]}setConfig(t,e){this._config[t]!==e&&(this._config[t]=e,this.refresh())}get animate(){return this._config.animate}set animate(t){this._config.animate=t}get animationDuration(){return this._config.animationDuration}set animationDuration(t){this._config.animationDuration=t}get iterations(){return this._config.iterations}set iterations(t){this._config.iterations=t}get color(){return this._config.color}set color(t){this._config.color!==t&&(this._config.color=t,this.refresh())}get class(){return this._config.class}set class(t){this._config.class!==t&&(this._config.class=t,this._svg&&this._svg.setAttribute("class",["rough-annotation",this._config.class||""].filter(Boolean).join(" ")))}get strokeWidth(){return this._config.strokeWidth}set strokeWidth(t){this._config.strokeWidth!==t&&(this._config.strokeWidth=t,this.refresh())}get padding(){return this._config.padding}set padding(t){this._config.padding!==t&&(this._config.padding=t,this.refresh())}attach(){if(this._state==="unattached"&&this._e.parentElement){Gl();const t=this._svg=document.createElementNS(Ca,"svg");t.setAttribute("class",["rough-annotation",this._config.class||""].filter(Boolean).join(" "));const e=t.style;e.position="absolute",e.top="0",e.left="0",e.overflow="visible",e.pointerEvents="none",e.width="100px",e.height="100px";const n=this._config.type==="highlight";if(this._e.insertAdjacentElement(n?"beforebegin":"afterend",t),this._state="not-showing",n){const a=window.getComputedStyle(this._e).position;(!a||a==="static")&&(this._e.style.position="relative")}this.attachListeners()}}detachListeners(){window.removeEventListener("resize",this._resizeListener),this._ro&&this._ro.unobserve(this._e)}attachListeners(){this.detachListeners(),window.addEventListener("resize",this._resizeListener,{passive:!0}),!this._ro&&"ResizeObserver"in window&&(this._ro=new window.ResizeObserver(t=>{for(const e of t)e.contentRect&&this._resizeListener()})),this._ro&&this._ro.observe(this._e)}haveRectsChanged(){if(this._lastSizes.length){const t=this.rects();if(t.length===this._lastSizes.length){for(let e=0;e<t.length;e++)if(!this.isSameRect(t[e],this._lastSizes[e]))return!0}else return!0}return!1}isSameRect(t,e){const n=(a,r)=>Math.round(a)===Math.round(r);return n(t.x,e.x)&&n(t.y,e.y)&&n(t.w,e.w)&&n(t.h,e.h)}isShowing(){return this._state!=="not-showing"}refresh(){this.isShowing()&&!this.pendingRefresh&&(this.pendingRefresh=Promise.resolve().then(()=>{this.isShowing()&&this.show(),delete this.pendingRefresh}))}async show(){switch(this._state){case"unattached":break;case"showing":this.hide(),this._svg&&await this.render(this._svg,!0);break;case"not-showing":this.attach(),this._svg&&await this.render(this._svg,!1);break}}hide(){if(this._svg)for(;this._svg.lastChild;)this._svg.removeChild(this._svg.lastChild);this._state="not-showing"}remove(){this._svg&&this._svg.parentElement&&this._svg.parentElement.removeChild(this._svg),this._svg=void 0,this._state="unattached",this.detachListeners()}async render(t,e){let n=this._config;e&&(n=JSON.parse(JSON.stringify(this._config)),n.animate=!1);const a=this.rects();let r=0;a.forEach(c=>r+=c.w);const o=n.animationDuration||Bl;let i=0;const l=[];for(let c=0;c<a.length;c++){const m=a[c],u=o*(m.w/r);l.push(zl(t,a[c],n,i+this._animationDelay+(this._config.delay||0),u,this._seed)),i+=u}return this._lastSizes=a,this._state="showing",await Promise.all(l)}rects(){const t=[];if(this._svg)if(this._config.multiline){const e=this._e.getClientRects();for(let n=0;n<e.length;n++)t.push(this.svgRect(this._svg,e[n]))}else t.push(this.svgRect(this._svg,this._e.getBoundingClientRect()));return t}svgRect(t,e){const n=t.getBoundingClientRect(),a=e;return{x:(a.x||a.left)-(n.x||n.left),y:(a.y||a.top)-(n.y||n.top),w:a.width,h:a.height}}}function Kl(s,t){return new Jl(s,t)}function J(s,t){return s.class=[s.class,t].filter(Boolean).join(" "),s}const jn={box:s=>Object.assign(s,{type:"box"}),circle:s=>Object.assign(s,{type:"circle"}),underline:s=>Object.assign(s,{type:"underline"}),highlight:s=>Object.assign(s,{type:"highlight"}),"strike-through":s=>Object.assign(s,{type:"strike-through"}),"crossed-off":s=>Object.assign(s,{type:"crossed-off"}),bracket:s=>Object.assign(s,{type:"bracket"}),strike:s=>Object.assign(s,{type:"strike-through"}),cross:s=>Object.assign(s,{type:"crossed-off"}),crossed:s=>Object.assign(s,{type:"crossed-off"}),linethrough:s=>Object.assign(s,{type:"strike-through"}),"line-through":s=>Object.assign(s,{type:"strike-through"}),black:s=>J(s,"text-black"),blue:s=>J(s,"text-blue"),cyan:s=>J(s,"text-cyan"),gray:s=>J(s,"text-gray"),green:s=>J(s,"text-green"),indigo:s=>J(s,"text-indigo"),lime:s=>J(s,"text-lime"),orange:s=>J(s,"text-orange"),pink:s=>J(s,"text-pink"),purple:s=>J(s,"text-purple"),red:s=>J(s,"text-red"),teal:s=>J(s,"text-teal"),white:s=>J(s,"text-white"),yellow:s=>J(s,"text-yellow")},Ql=[[/^delay-?(\d+)?$/,(s,t,e)=>{const n=(s[1]?Number.parseInt(s[1]):e)||300;return t.delay=n,t}],[/^(?:op|opacity)-?(\d+)?$/,(s,t,e)=>{const n=(s[1]?Number.parseInt(s[1]):e)||100;return t.opacity=n/100,t}]];function Yl(){return{install(s){s.directive("mark",{name:"v-mark",mounted:(t,e)=>{const{isPrintMode:n}=Xt(),a=b(()=>{const i=typeof e.value=="object"&&!Array.isArray(e.value)?{...e.value}:{at:e.value};let l={at:i.at};const c=Object.entries(e.modifiers).filter(([u,h])=>{if(jn[u])return l=jn[u](l,h),!1;for(const[p,f]of Ql){const d=u.match(p);if(d)return l=f(d,l,h),!1}return!0});c.length&&console.warn("[Slidev] Invalid modifiers for v-mark:",c);const m={...l,...i};return m.type||="underline",n.value&&(m.animationDuration=1),m}),r=Kl(t,a.value),o=As(t,e,a.value.at);if(!o){r.show();return}t.watchStopHandle=Yt(()=>{let i;a.value.class&&(r.class=a.value.class),a.value.color&&(r.color=a.value.color);const l=a.value.at;l===!0?i=!0:l===!1?i=!1:i=o.isActive.value,i!=null&&(i?r.show():r.hide())})},unmounted:t=>{t.watchStopHandle?.()}})}}}function Zl(){return{install(s){const t=ar();s.directive("motion",{name:"v-motion",mounted(e,n,a,r){const o=Zt(n,Hs),i=Zt(n,Le),l=Zt(n,Ae),{currentPage:c,clicks:m,isPrintMode:u}=Xt(),h=a.props={...a.props},p={...h.initial,...h.variants?.["slidev-initial"]},f={...h.enter,...h.variants?.["slidev-enter"]},d={...h.leave,...h.variants?.["slidev-leave"]};delete h.initial,delete h.enter,delete h.leave;const g=`${Ne()}-`,y=[];for(const v of Object.keys(h))if(v.startsWith("click-")){const k=v.slice(6),x=k.includes("-")?k.split("-").map(Number):+k,O=g+k;y.push({id:O,at:x,variant:{...h[v]},info:o?.value.calculate(x)}),delete h[v]}y.sort((v,k)=>(Array.isArray(v.at)?v.at[0]:v.at)-(Array.isArray(k.at)?k.at[0]:k.at)),t.created(e,n,a,r),t.mounted(e,n,a,r);const w=e.motionInstance;w.clickIds=y.map(v=>v.id),w.set(p),w.watchStopHandle=tt([i,c,m].filter(Boolean),()=>{const v=ka.get(e)?.visibilityState.value??"shown";if(!o?.value||!["slide","presenter"].includes(l?.value??"")){const k={...p,...f};for(const{variant:x}of y)Object.assign(k,x);w.set(k)}else if(u.value||i?.value===c.value)if(v==="shown"){const k={...p,...f};for(const{variant:x,info:O}of y)(!O||O.isActive.value)&&Object.assign(k,x);u.value?w.set(k):w.apply(k)}else w.apply(v==="before"?p:d);else w.apply((i?.value??-1)>c.value?p:d)},{immediate:!0})},unmounted(e){e.motionInstance.watchStopHandle()}})}}}const Xl=[Object.values([])[0],Object.values([])[0]].filter(Boolean);function tc(){const s=[];function t(e){if(!j.remote||j.remote===e.query.password)return!0;if(j.remote&&e.query.password===void 0){const n=prompt("Enter password");if(j.remote===n)return!0}return e.params.no?{path:`/${e.params.no}`}:{path:""}}return s.push({name:"entry",path:"/entry",component:()=>S(()=>import("./slidev/entry-BNL1IaeT.js"),__vite__mapDeps([35,1,3,4,36]),import.meta.url),beforeEnter:t},{name:"overview",path:"/overview",component:()=>S(()=>import("./slidev/overview-4QDB9-dr.js"),__vite__mapDeps([37,16,1,38,39,40,2,41,42,43,3,4]),import.meta.url),beforeEnter:t},{name:"notes",path:"/notes",component:()=>S(()=>import("./slidev/notes-DHJxC5Sg.js"),__vite__mapDeps([44,1,38,39,45,42,46,3,4]),import.meta.url),beforeEnter:t},{name:"notes-edit",path:"/notes-edit",component:()=>S(()=>import("./slidev/notes-edit-DRnTAfMe.js"),__vite__mapDeps([47,1,43,42,46,3,4]),import.meta.url),beforeEnter:t},{name:"presenter",path:"/presenter/:no",component:()=>S(()=>import("./slidev/presenter-BmkaaQ54.js"),__vite__mapDeps([48,1,40,2,41,49,16,42,3,4,50,38,39,45,43,51]),import.meta.url),beforeEnter:t},{path:"/presenter",redirect:{path:"/presenter/1"}}),s.push({name:"play",path:"/:no",component:()=>S(()=>import("./slidev/play-B5igPiz9.js"),__vite__mapDeps([52,1,40,2,41,49,16,42,3,4,50,46,53]),import.meta.url)},{path:"",redirect:{path:"/1"}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>S(()=>import("./slidev/404-B832hs3p.js"),__vite__mapDeps([54,1,3,4,55]),import.meta.url)}),Xl.reduce((e,n)=>n(e),s)}async function sc(s){function t(){document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`)}t(),window.addEventListener("resize",t);const e=rr({history:or("./"),routes:tc()});s.use(e),s.use(il()),s.use(ll()),s.use(Yl()),s.use(hl()),s.use(Zl()),s.use(lr,{container:"#twoslash-container"});const n={app:s,router:e};for(const a of al)await a(n)}async function ec(){const s=ir(tl);await sc(s),s.mount("#app")}ec();export{ds as $,ui as A,wc as B,Ms as C,gi as D,de as E,xc as F,Cc as G,rc as H,$s as I,hc as J,sa as K,mi as L,gs as M,gc as N,jc as O,Lc as P,Sc as Q,nt as R,ci as S,cl as T,Wn as U,fr as V,yc as W,Xo as X,Oe as Y,uc as Z,Ur as _,Xt as a,dc as a0,fc as a1,bc as a2,kc as a3,Dc as a4,Pc as a5,Tc as a6,st as a7,ya as a8,wa as a9,ta as aa,Gn as ab,lc as ac,si as ad,Le as ae,Ae as af,Hs as ag,ei as ah,Nc as ai,Ne as aj,es as ak,$c as al,ti as am,cc as an,ai as ao,ra as b,qr as c,Rc as d,Zn as e,vc as f,Ut as g,fs as h,Sn as i,hi as j,Ts as k,Ac as l,Oc as m,_c as n,j as o,oc as p,ic as q,pe as r,Ks as s,Ec as t,Hr as u,ze as v,Fs as w,Mc as x,pc as y,mc as z};
