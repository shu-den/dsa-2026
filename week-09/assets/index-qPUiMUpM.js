const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./md-C0GDX64Z.js","./modules/vue-EkOm0DBg.js","./slidev/context-DKib1Pa6.js","./modules/shiki-CIKF_8I9.js","./modules/shiki-UqVAgQbi.css","./md-D9mQazZw.js","./md-DNVix9jK.js","./default-NiNoNkjk.js","./md-eFuEbBRk.js","./section-divider-Dn303Fsp.js","./md-BQRVqpwc.js","./md-ChhSRZ7n.js","./slidev/CodeBlockWrapper.vue_vue_type_script_setup_true_lang-BJ0Cfz7m.js","./modules/unplugin-icons-Cy6aUMRx.js","./md-TQ1Hrbn5.js","./md-CnuDhJdu.js","./md-DLfC8I-p.js","./md-Bw6Cg5eo.js","./md-CqaJYis7.js","./md-C4HW_OBr.js","./md-bNfGOsfP.js","./md-jJHkhc5f.js","./interactive-gMKw3QM1.js","./md-Lj2XiNcm.css","./md-Dk-mV0Cb.js","./md-ppNicaFO.js","./md-D-9aAmLd.js","./md-E7ZllbaX.js","./md-BOnd7GRS.js","./md-CovBwwgU.js","./md-CkXKRsqc.js","./md-CkGnfWiV.js","./md-C28BRajI.js","./md-B5A81Meu.js","./md-ihEPhk_q.js","./md-CqSmpxgi.css","./md-DOMpXjkd.js","./md-Brvz9Keh.js","./md-DUOSl3r0.js","./md-3EIsT9av.js","./md-DN8OaeQO.js","./md-CuJsIQFh.js","./md-BB9-6qXm.js","./md-DR1cam4S.js","./question-CdMPt9lg.js","./md-ClgZFZSE.js","./md-CaUAYQ4g.js","./md-XXWMy3L4.js","./slidev/entry-Ba0ND7gW.js","./entry-CyMt_iSL.css","./slidev/overview-Cxt_ZL9W.js","./slidev/NoteDisplay.vue_vue_type_style_index_0_lang-CDCYBHCC.js","./NoteDisplay-DggBAdha.css","./slidev/SlideWrapper-Dr470-JU.js","./SlideWrapper-4Jte_8x4.css","./slidev/IconButton.vue_vue_type_script_setup_true_lang-BV593VYM.js","./slidev/useSlideInfo-l2PfPHMu.js","./slidev/notes-Q3HH-ZzF.js","./slidev/TimerBar.vue_vue_type_script_setup_true_lang-crDSNtFY.js","./slidev/Modal.vue_vue_type_script_setup_true_lang-O9nhGBGA.js","./slidev/notes-edit-DDovf49Z.js","./slidev/presenter-BLtYmbD4.js","./slidev/shortcuts-DAKEsewF.js","./shortcuts-B4GtsM5T.css","./presenter-Bs6wyjjy.css","./slidev/play-D-CWVdJk.js","./play-D_7yfuao.css","./slidev/404-B02vpZi9.js","./404-poZcRPAh.css"])))=>i.map(i=>d[i]);
import{z as v,A as Qe,B as xn,C as Ze,D as ee,E as ra,G as Ye,H as Xe,I as sl,r as E,J as le,K as ss,L as ie,M as S,N as al,O as nl,o as ja,e as kn,t as tl,f as re,F as el,g as Xn,j as ll,P as L,Q as Dn,R as il,S as Ga,p as rl,T as ol,U as ml,V as pl,W as q,X as cl,Y as oe,Z as hl,_ as ul,$ as Qa,a0 as gl,a1 as me,a2 as dl,a3 as fl,a4 as yl,a5 as pe,b as wl,a as xl,a6 as kl,a7 as vl,a8 as bl,a9 as Ml,aa as _l,ab as Ll,ac as Sl,c as Ol}from"./modules/vue-EkOm0DBg.js";import{T as Pl}from"./modules/shiki-CIKF_8I9.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?l.credentials="include":e.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(e){if(e.ep)return;e.ep=!0;const l=n(e);fetch(e.href,l)}})();const R={theme:"../theme",title:"DSA 第9回: 動的計画法(1)",titleTemplate:"%s - Slidev",addons:[],remoteAssets:!1,monaco:!0,monacoTypesSource:"local",monacoTypesAdditionalPackages:[],monacoTypesIgnorePackages:[],monacoRunAdditionalDeps:[],monacoRunUseStrict:!0,download:!1,export:{},info:`<p>データ構造とアルゴリズム 2026年度 第9回
関西大学 ビジネスデータサイエンス学部 / 伝住 周平</p>
`,highlighter:"shiki",twoslash:!0,lineNumbers:!1,colorSchema:"light",routerMode:"hash",aspectRatio:1.7777777777777777,canvasWidth:980,exportFilename:"",selectable:!1,themeConfig:{},fonts:{sans:['"Noto Sans JP"','"sans-serif"',"ui-sans-serif","system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"',"sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:['"JetBrains Mono"','"monospace"',"ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"],webfonts:["Noto Sans JP","sans-serif","JetBrains Mono","monospace"],provider:"google",local:[],italic:!1,weights:["200","400","600"]},favicon:"https://cdn.jsdelivr.net/gh/slidevjs/slidev/assets/favicon.png",drawings:{enabled:!1,persist:!1,presenterOnly:!1,syncAll:!0},plantUmlServer:"https://www.plantuml.com/plantuml",codeCopy:!0,magicMoveCopy:!0,author:"",record:"dev",css:"unocss",presenter:!0,browserExporter:"dev",htmlAttrs:{},transition:"slide-left",editor:!0,contextMenu:null,wakeLock:!0,mdc:!1,seoMeta:{},notesAutoRuby:{},duration:"30min",timer:"stopwatch",magicMoveDuration:800,preloadImages:!0,layout:"title",slidesTitle:"DSA 第9回: 動的計画法(1) - Slidev"};function vn(a,s,n){return Math.min(n,Math.max(s,a))}function $l(...a){return El(a).reduce((s,n)=>s+n,0)}function Tl(a){return a=a??[],Array.isArray(a)?a:[a]}function El(a){return Tl(a).flat(1)}function Fl(a){return Array.from(new Set(a))}function st(...a){let s,n,t;a.length===1?(s=0,t=1,[n]=a):[s,n,t=1]=a;const e=[];let l=s;for(;l<n;)e.push(l),l+=t||1;return e}function Al(a){return a!=null}function Cl(a,s){return Object.fromEntries(Object.entries(a).map(([n,t])=>s(n,t)).filter(Al))}const Wm="build",ce=v(()=>R.aspectRatio),he=v(()=>R.canvasWidth),Nl=v(()=>Math.ceil(he.value/ce.value)),Dl=v(()=>Cl(R.themeConfig||{},(a,s)=>[`--slidev-theme-${a}`,s])),ln=R.slidesTitle,Um="./#/",Rl=[Object.values([])[0],Object.values([])[0]].filter(Boolean),Il=new Set(["link","style","script","noscript"]),jl=new Set(["title","titleTemplate","script","style","noscript"]),at=new Set(["base","meta","link","style","script","noscript"]),zl=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),Hl=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),Vl=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),Bl=new Set(["templateParams","htmlAttrs","bodyAttrs"]),ql=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function bn(a,s={},n){for(const t in a){const e=a[t],l=n?`${n}:${t}`:t;typeof e=="object"&&e!==null?bn(e,s,l):typeof e=="function"&&(s[l]=e)}return s}const ue=(()=>{if(console.createTask)return console.createTask;const a={run:s=>s()};return()=>a})();function ge(a,s,n,t){for(let e=n;e<a.length;e+=1)try{const l=t?t.run(()=>a[e](...s)):a[e](...s);if(l instanceof Promise)return l.then(()=>ge(a,s,e+1,t))}catch(l){return Promise.reject(l)}}function Wl(a,s,n){if(a.length>0)return ge(a,s,0,ue(n))}function Ul(a,s,n){if(a.length>0){const t=ue(n);return Promise.all(a.map(e=>t.run(()=>e(...s))))}}function rn(a,s){for(const n of[...a])n(s)}var Jl=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(a,s,n={}){if(!a||typeof s!="function")return()=>{};const t=a;let e;for(;this._deprecatedHooks[a];)e=this._deprecatedHooks[a],a=e.to;if(e&&!n.allowDeprecated){let l=e.message;l||(l=`${t} hook has been deprecated`+(e.to?`, please use ${e.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(l)||(console.warn(l),this._deprecatedMessages.add(l))}if(!s.name)try{Object.defineProperty(s,"name",{get:()=>"_"+a.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[a]=this._hooks[a]||[],this._hooks[a].push(s),()=>{s&&(this.removeHook(a,s),s=void 0)}}hookOnce(a,s){let n,t=(...e)=>(typeof n=="function"&&n(),n=void 0,t=void 0,s(...e));return n=this.hook(a,t),n}removeHook(a,s){const n=this._hooks[a];if(n){const t=n.indexOf(s);t!==-1&&n.splice(t,1),n.length===0&&(this._hooks[a]=void 0)}}deprecateHook(a,s){this._deprecatedHooks[a]=typeof s=="string"?{to:s}:s;const n=this._hooks[a]||[];this._hooks[a]=void 0;for(const t of n)this.hook(a,t)}deprecateHooks(a){for(const s in a)this.deprecateHook(s,a[s])}addHooks(a){const s=bn(a),n=Object.keys(s).map(t=>this.hook(t,s[t]));return()=>{for(const t of n)t();n.length=0}}removeHooks(a){const s=bn(a);for(const n in s)this.removeHook(n,s[n])}removeAllHooks(){this._hooks={}}callHook(a,...s){return this.callHookWith(Wl,a,s)}callHookParallel(a,...s){return this.callHookWith(Ul,a,s)}callHookWith(a,s,n){const t=this._before||this._after?{name:s,args:n,context:{}}:void 0;this._before&&rn(this._before,t);const e=a(this._hooks[s]?[...this._hooks[s]]:[],n,s);return e instanceof Promise?e.finally(()=>{this._after&&t&&rn(this._after,t)}):(this._after&&t&&rn(this._after,t),e)}beforeEach(a){return this._before=this._before||[],this._before.push(a),()=>{if(this._before!==void 0){const s=this._before.indexOf(a);s!==-1&&this._before.splice(s,1)}}}afterEach(a){return this._after=this._after||[],this._after.push(a),()=>{if(this._after!==void 0){const s=this._after.indexOf(a);s!==-1&&this._after.splice(s,1)}}}};function Kl(){return new Jl}const Gl=["name","property","http-equiv"],Ql=new Set(["viewport","description","keywords","robots"]);function de(a){const s=a.split(":");return s.length?ql.has(s[1]):!1}function Mn(a){const{props:s,tag:n}=a;if(Hl.has(n))return n;if(n==="link"&&s.rel==="canonical")return"canonical";const t=s.hreflang||s.type;if(n==="link"&&s.rel==="alternate"&&t)return`alternate:${t}`;if(s.charset)return"charset";if(a.tag==="meta"){for(const e of Gl)if(s[e]!==void 0){const l=s[e],i=l&&typeof l=="string"&&l.includes(":"),r=l&&Ql.has(l),m=!(i||r)&&a.key?`:key:${a.key}`:"";return`${n}:${l}${m}`}}if(a.key)return`${n}:key:${a.key}`;if(s.id)return`${n}:id:${s.id}`;if(jl.has(n)){const e=a.textContent||a.innerHTML;if(e)return`${n}:content:${e}`}}function nt(a){const s=a._h||a._d;if(s)return s;const n=a.textContent||a.innerHTML;return n||`${a.tag}:${Object.entries(a.props).map(([t,e])=>`${t}:${String(e)}`).join(",")}`}function za(a,s,n){typeof a==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(a=a());const e=s?s(n,a):a;if(Array.isArray(e))return e.map(l=>za(l,s));if(e?.constructor===Object){const l={};for(const i of Object.keys(e))l[i]=za(e[i],s,i);return l}return e}function Zl(a,s){const n=a==="style"?new Map:new Set;function t(e){if(e==null||e===void 0)return;const l=String(e).trim();if(l)if(a==="style"){const[i,...r]=l.split(":").map(o=>o?o.trim():"");i&&r.length&&n.set(i,r.join(":"))}else l.split(" ").filter(Boolean).forEach(i=>n.add(i))}return typeof s=="string"?a==="style"?s.split(";").forEach(t):t(s):Array.isArray(s)?s.forEach(e=>t(e)):s&&typeof s=="object"&&Object.entries(s).forEach(([e,l])=>{l&&l!=="false"&&(a==="style"?n.set(String(e).trim(),String(l)):t(e))}),n}function fe(a,s){return a.props=a.props||{},s?a.tag==="templateParams"?(a.props=s,a):(Object.entries(s).forEach(([n,t])=>{if(t===null){a.props[n]=null;return}if(n==="class"||n==="style"){a.props[n]=Zl(n,t);return}if(Vl.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof t=="object"){let r=s.type;if(s.type||(r="application/json"),!r?.endsWith("json")&&r!=="speculationrules")return;s.type=r,a.props.type=r,a[n]=JSON.stringify(t)}else a[n]=t;return}const e=String(t),l=n.startsWith("data-"),i=a.tag==="meta"&&n==="content";e==="true"||e===""?a.props[n]=l||i?e:!0:!t&&l&&e==="false"?a.props[n]="false":t!==void 0&&(a.props[n]=t)}),a):a}function Yl(a,s){const n=typeof s=="object"&&typeof s!="function"?s:{[a==="script"||a==="noscript"||a==="style"?"innerHTML":"textContent"]:s},t=fe({tag:a,props:{}},n);return t.key&&Il.has(t.tag)&&(t.props["data-hid"]=t._h=t.key),t.tag==="script"&&typeof t.innerHTML=="object"&&(t.innerHTML=JSON.stringify(t.innerHTML),t.props.type=t.props.type||"application/json"),Array.isArray(t.props.content)?t.props.content.map(e=>({...t,props:{...t.props,content:e}})):t}function Xl(a,s){if(!a)return[];typeof a=="function"&&(a=a());const n=(e,l)=>{for(let i=0;i<s.length;i++)l=s[i](e,l);return l};a=n(void 0,a);const t=[];return a=za(a,n),Object.entries(a||{}).forEach(([e,l])=>{if(l!==void 0)for(const i of Array.isArray(l)?l:[l])t.push(Yl(e,i))}),t.flat()}const tt=(a,s)=>a._w===s._w?a._p-s._p:a._w-s._w,et={base:-10,title:10},si={critical:-8,high:-1,low:2},lt={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},ai=/@import/,ca=a=>a===""||a===!0;function ni(a,s){if(typeof s.tagPriority=="number")return s.tagPriority;let n=100;const t=si[s.tagPriority]||0,e=a.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:lt;if(s.tag in et)n=et[s.tag];else if(s.tag==="meta"){const l=s.props["http-equiv"]==="content-security-policy"?"content-security-policy":s.props.charset?"charset":s.props.name==="viewport"?"viewport":null;l&&(n=lt.meta[l])}else if(s.tag==="link"&&s.props.rel)n=e.link[s.props.rel];else if(s.tag==="script"){const l=String(s.props.type);ca(s.props.async)?n=e.script.async:s.props.src&&!ca(s.props.defer)&&!ca(s.props.async)&&l!=="module"&&!l.endsWith("json")||s.innerHTML&&!l.endsWith("json")?n=e.script.sync:(ca(s.props.defer)&&s.props.src&&!ca(s.props.async)||l==="module")&&(n=e.script.defer)}else s.tag==="style"&&(n=s.innerHTML&&ai.test(s.innerHTML)?e.style.imported:e.style.sync);return(n||100)+t}function it(a,s){const n=typeof s=="function"?s(a):s,t=n.key||String(a.plugins.size+1);a.plugins.get(t)||(a.plugins.set(t,n),a.hooks.addHooks(n.hooks||{}))}function ti(a={}){const s=Kl();s.addHooks(a.hooks||{});const n=!a.document,t=new Map,e=new Map,l=new Set,i={_entryCount:1,plugins:e,dirty:!1,resolvedOptions:a,hooks:s,ssr:n,entries:t,headEntries(){return[...t.values()]},use:r=>it(i,r),push(r,o){const m={...o||{}};delete m.head;const c=m._index??i._entryCount++,u={_i:c,input:r,options:m},h={_poll(p=!1){i.dirty=!0,!p&&l.add(c),s.callHook("entries:updated",i)},dispose(){t.delete(c)&&i.invalidate()},patch(p){(!m.mode||m.mode==="server"&&n||m.mode==="client"&&!n)&&(u.input=p,t.set(c,u),h._poll())}};return h.patch(r),h},async resolveTags(){const r={tagMap:new Map,tags:[],entries:[...i.entries.values()]};for(await s.callHook("entries:resolve",r);l.size;){const h=l.values().next().value;l.delete(h);const p=t.get(h);if(p){const d={tags:Xl(p.input,a.propResolvers||[]).map(g=>Object.assign(g,p.options)),entry:p};await s.callHook("entries:normalize",d),p._tags=d.tags.map((g,f)=>(g._w=ni(i,g),g._p=(p._i<<10)+f,g._d=Mn(g),g))}}let o=!1;r.entries.flatMap(h=>(h._tags||[]).map(p=>({...p,props:{...p.props}}))).sort(tt).reduce((h,p)=>{const d=String(p._d||p._p);if(!h.has(d))return h.set(d,p);const g=h.get(d);if((p?.tagDuplicateStrategy||(Bl.has(p.tag)?"merge":null)||(p.key&&p.key===g.key?"merge":null))==="merge"){const y={...g.props};Object.entries(p.props).forEach(([w,x])=>y[w]=w==="style"?new Map([...g.props.style||new Map,...x]):w==="class"?new Set([...g.props.class||new Set,...x]):x),h.set(d,{...p,props:y})}else p._p>>10===g._p>>10&&p.tag==="meta"&&de(d)?(h.set(d,Object.assign([...Array.isArray(g)?g:[g],p],p)),o=!0):(p._w===g._w?p._p>g._p:p?._w<g?._w)&&h.set(d,p);return h},r.tagMap);const m=r.tagMap.get("title"),c=r.tagMap.get("titleTemplate");if(i._title=m?.textContent,c){const h=c?.textContent;if(i._titleTemplate=h,h){let p=typeof h=="function"?h(m?.textContent):h;typeof p=="string"&&!i.plugins.has("template-params")&&(p=p.replace("%s",m?.textContent||"")),m?p===null?r.tagMap.delete("title"):r.tagMap.set("title",{...m,textContent:p}):(c.tag="title",c.textContent=p)}}r.tags=Array.from(r.tagMap.values()),o&&(r.tags=r.tags.flat().sort(tt)),await s.callHook("tags:beforeResolve",r),await s.callHook("tags:resolve",r),await s.callHook("tags:afterResolve",r);const u=[];for(const h of r.tags){const{innerHTML:p,tag:d,props:g}=h;if(zl.has(d)&&!(Object.keys(g).length===0&&!h.innerHTML&&!h.textContent)&&!(d==="meta"&&!g.content&&!g["http-equiv"]&&!g.charset)){if(d==="script"&&p){if(String(g.type).endsWith("json")){const f=typeof p=="string"?p:JSON.stringify(p);h.innerHTML=f.replace(/</g,"\\u003C")}else typeof p=="string"&&(h.innerHTML=p.replace(new RegExp(`</${d}`,"g"),`<\\/${d}`));h._d=Mn(h)}u.push(h)}}return u},invalidate(){for(const r of t.values())l.add(r._i);i.dirty=!0,s.callHook("entries:updated",i)}};return(a?.plugins||[]).forEach(r=>it(i,r)),i.hooks.callHook("init",i),a.init?.forEach(r=>r&&i.push(r)),i}const ei=(a,s)=>Qe(s)?xn(s):s,ye="usehead";function li(a){return{install(n){n.config.globalProperties.$unhead=a,n.config.globalProperties.$head=a,n.provide(ye,a)}}.install}function ii(){if(Ze()){const a=ee(ye);if(a)return a}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function ri(a,s={}){const n=s.head||ii();return n.ssr?n.push(a||{},s):oi(n,a,s)}function oi(a,s,n={}){const t=E(!1);let e;return ra(()=>{const i=t.value?{}:za(s,ei);e?e.patch(i):e=a.push(i,n)}),le()&&(Ye(()=>{e.dispose()}),Xe(()=>{t.value=!0}),sl(()=>{t.value=!1})),e}function _n(a){if(a===!1||a==="false")return null;if(a==null||a===!0||a==="true")return"+1";if(typeof a=="string"&&"+-".includes(a[0]))return a;const s=+a;return Number.isNaN(s)?(console.error(`Invalid "at" prop value: ${a}`),null):s<=0?(console.warn(`[Slidev] "at" prop value must be greater than 0, but got ${a}, has been set to 1`),1):s}function mi(a){return Array.isArray(a)?[_n(a[0]),_n(a[1])]:null}function we(a,s=0,n){const t=E(!1);let e=new Map,l=new Map;const i={get current(){return vn(+a.value,s,i.total)},set current(r){a.value=t.value?vn(r,s,i.total):r},clicksStart:s,get relativeSizeMap(){return e},get maxMap(){return l},get isMounted(){return t.value},setup(){ie(()=>{t.value=!0,l=S(l),al(a)||(i.current=a.value)}),nl(()=>{t.value=!1,e=new Map,l=new Map})},calculateSince(r,o=1){const m=_n(r);if(m==null)return null;let c,u,h;if(typeof m=="string"){const p=i.currentOffset,d=+m;c=p+d,u=p+d+o-1,h=d+o-1}else c=m,u=m+o-1,h=0;return{start:c,end:+Number.POSITIVE_INFINITY,max:u,delta:h,currentOffset:v(()=>i.current-c),isCurrent:v(()=>i.current===c),isActive:v(()=>i.current>=c)}},calculateRange(r){const o=mi(r);if(o==null)return null;const[m,c]=o;let u,h,p;return typeof m=="string"?(u=i.currentOffset+ +m,p=+m):(u=m,p=0),typeof c=="string"?(h=u+ +c,p+=+c):h=c,{start:u,end:h,max:h,delta:p,currentOffset:v(()=>i.current-u),isCurrent:v(()=>i.current===u),isActive:v(()=>u<=i.current&&i.current<h)}},calculate(r){return Array.isArray(r)?i.calculateRange(r):i.calculateSince(r)},register(r,o){if(!o)return;const{delta:m,max:c}=o;e.set(r,m),l.set(r,c)},unregister(r){e.delete(r),l.delete(r)},get currentOffset(){return $l(...e.values())},get total(){return n??(t.value?Math.max(0,...l.values()):0)}};return i}function pi(a,s=0){const n=a?.meta.slide?.frontmatter.clicksStart??0,t=E(Math.max(xn(s),n));return ss(()=>xn(s),e=>{t.value=Math.max(e,n)}),we(t,n,a?.meta?.clicks)}const ci="modulepreload",hi=function(a,s){return new URL(a,s).href},rt={},_=function(s,n,t){let e=Promise.resolve();if(n&&n.length>0){let m=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const i=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),o=r?.nonce||r?.getAttribute("nonce");e=m(n.map(c=>{if(c=hi(c,t),c in rt)return;rt[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(t)for(let d=i.length-1;d>=0;d--){const g=i[d];if(g.href===c&&(!u||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":ci,u||(p.as="script"),p.crossOrigin="",p.href=c,o&&p.setAttribute("nonce",o),document.head.appendChild(p),u)return new Promise((d,g)=>{p.addEventListener("load",d),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(i){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=i,window.dispatchEvent(r),!r.defaultPrevented)throw i}return e.then(i=>{for(const r of i||[])r.status==="rejected"&&l(r.reason);return s().catch(l)})},ui=(a,s)=>{const n=a.__vccOpts||a;for(const[t,e]of s)n[t]=e;return n},gi={},di={class:"px-4 py-10 text-center text-red-700 dark:text-red-500 font-bold font-mono"};function fi(a,s){return ja(),kn("div",di,tl("Failed to fetch this slide. Please check your network connection."))}const O=ui(gi,[["render",fi]]),yi={class:"h-full w-full flex items-center justify-center gap-2 slidev-slide-loading"},wi=re({__name:"SlideLoading",setup(a){const s=E(!1);return ie(()=>{setTimeout(()=>{s.value=!0},200)}),(n,t)=>(ja(),kn("div",yi,[s.value?(ja(),kn(el,{key:0},[t[0]||(t[0]=Xn("div",{class:"i-svg-spinners-90-ring-with-bg text-xl"},null,-1)),t[1]||(t[1]=Xn("div",null,"Loading slide...",-1))],64)):ll("v-if",!0)]))}}),xi={theme:"../theme",title:"DSA 第9回: 動的計画法(1)",info:`データ構造とアルゴリズム 2026年度 第9回
関西大学 ビジネスデータサイエンス学部 / 伝住 周平
`,drawings:{enabled:!1},transition:"slide-left",routerMode:"hash",layout:"title"},hs=L(xi),ki=S({get layout(){return hs.layout},get transition(){return hs.transition},get class(){return hs.class},get clicks(){return hs.clicks},get name(){return hs.name},get preload(){return hs.preload},slide:{content:"",revision:"-pe3qdg",frontmatterRaw:`theme: ../theme
title: 'DSA 第9回: 動的計画法(1)'
info: |
  データ構造とアルゴリズム 2026年度 第9回
  関西大学 ビジネスデータサイエンス学部 / 伝住 周平
drawings:
  enabled: false
transition: slide-left
routerMode: hash
layout: title
`,note:"",title:"DSA 第9回: 動的計画法(1)",index:0,noteHTML:`<p>「みなさん，フィボナッチ数列は知っていますか？
0, 1, 1, 2, 3, 5, 8, 13, 21, ...
前の2つの数を足して次の数を作る，とてもシンプルな数列です．</p>
<p>では問題です．
フィボナッチ数列の <strong>100番目</strong> の数を計算したい．
前の2つを足すだけなんだから，コンピュータに素朴な再帰で計算させれば一瞬でしょ？</p>
<p>……と思いますよね．</p>
<p>ところが答えは，<strong>宇宙の年齢でも終わらない</strong>．</p>
<p>100番目ですよ？たった100番目の数を求めるのに，宇宙が生まれてから今までの138億年では全然足りない．
でも，ある工夫をすると<strong>一瞬</strong>で終わります．</p>
<p>今日はその仕組みを明らかにします．テーマは <strong>動的計画法</strong>，略してDPです．」</p>
`,raw:"",frontmatter:hs,filepath:"",start:0,id:0,no:1},__clicksContext:null,__preloaded:!1}),vi={layout:"objectives"},us=L(vi),bi=S({get layout(){return us.layout},get transition(){return us.transition},get class(){return us.class},get clicks(){return us.clicks},get name(){return us.name},get preload(){return us.preload},slide:{content:"",revision:"-287c5l",frontmatterRaw:`layout: objectives
`,note:"",title:"本日の学習目標",level:2,index:1,noteHTML:`<p>「今日の学習目標を確認します．</p>
<p>単純な再帰の非効率性，つまり重複計算を理解すること．
メモ化による計算量削減の仕組みを説明できるようになること．
ボトムアップ方式でDPテーブルを構築できること．
DP設計の3ステップ ― 状態定義・漸化式・初期値 ― を適用できること．
そして1次元DPの問題を漸化式で解けるようになること．</p>
<p>DPは期末試験の大問1つ分を占める重要テーマです．
今日と来週の2回でマスターしましょう．」</p>
`,raw:"",frontmatter:us,filepath:"",start:40,id:1,no:2},__clicksContext:null,__preloaded:!1}),Mi={},gs=L(Mi),_i=S({get layout(){return gs.layout},get transition(){return gs.transition},get class(){return gs.class},get clicks(){return gs.clicks},get name(){return gs.name},get preload(){return gs.preload},slide:{content:"",revision:"h6zche",note:"",title:"前回の復習",level:2,index:2,noteHTML:`<p>「前回の復習です．</p>
<p>第8回ではハッシュテーブルを学びました．
ハッシュ関数でデータを整数に変換し，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> で検索できるデータ構造．
衝突の処理にはチェイン法とオープンアドレス法がありました．
負荷率の管理とリハッシュで性能を維持する，という話でしたね．</p>
<p>今日のキーポイントとして，
第2回の <strong>指数関数の爆発</strong> が，再帰の計算量として再登場します．
第3回の <strong>再帰</strong> が，DPの出発点になります．
そして第8回の <strong>ハッシュテーブル</strong> が，メモ化の辞書として使えるというつながりもあります．</p>
<p>前回の予告で，フィボナッチ数列の100番目を素朴な再帰で求めると <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mn>100</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(2^{100})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">100</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> だが，たった1つのアイデアで <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>100</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(100)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">100</span><span class="mclose">)</span></span></span></span> に改善できると言いました．
その『たった1つのアイデア』が今日のテーマです．」</p>
`,raw:"",frontmatter:gs,filepath:"",start:66,id:2,no:3},__clicksContext:null,__preloaded:!1}),Li={layout:"section-divider"},ds=L(Li),Si=S({get layout(){return ds.layout},get transition(){return ds.transition},get class(){return ds.class},get clicks(){return ds.clicks},get name(){return ds.name},get preload(){return ds.preload},slide:{content:"",revision:"s71wfv",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 1",level:1,index:3,noteHTML:`<p>「まず，素朴な再帰がなぜ遅いのかを見ていきましょう．
第3回の再帰の考え方は覚えていますよね．」</p>
`,raw:"",frontmatter:ds,filepath:"",start:114,id:3,no:4},__clicksContext:null,__preloaded:!1}),Oi={},fs=L(Oi),Pi=S({get layout(){return fs.layout},get transition(){return fs.transition},get class(){return fs.class},get clicks(){return fs.clicks},get name(){return fs.name},get preload(){return fs.preload},slide:{content:"",revision:"-8zq0se",note:"",title:"フィボナッチ数列",level:2,index:4,noteHTML:`<p>「フィボナッチ数列の定義を確認しましょう．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">F(0) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">F(1) = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≥</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">n \\geq 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> のとき，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>F</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>F</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(n) = F(n-1) + F(n-2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span>．</p>
<p>前の2つの数を足して次の数を作る ― それだけのシンプルな規則です．</p>
<p>最初の数項を並べてみると，
0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>10</mn><mo stretchy="false">)</mo><mo>=</mo><mn>55</mn></mrow><annotation encoding="application/x-tex">F(10) = 55</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">10</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">55</span></span></span></span> です．</p>
<p>このフィボナッチ数列，実は自然界にもたくさん現れます．
ヒマワリの種の並び方，貝殻の渦巻き，松ぼっくりの螺旋 ―
いずれもフィボナッチ数に関係しています．</p>
<p>数学的に美しく，自然界にも現れる数列 ―
では，これをコンピュータで計算するにはどうすればいいか？」</p>
`,raw:"",frontmatter:fs,filepath:"",start:128,id:4,no:5},__clicksContext:null,__preloaded:!1}),$i={},ys=L($i),Ti=S({get layout(){return ys.layout},get transition(){return ys.transition},get class(){return ys.class},get clicks(){return ys.clicks},get name(){return ys.name},get preload(){return ys.preload},slide:{content:"",revision:"-t9wbpa",note:"",title:"フィボナッチ数列を再帰で計算する",level:2,index:5,noteHTML:`<p>「定義をそのまま関数にしてみましょう．</p>
<pre><code>fib(n):
    if n &lt;= 1: return n
    return fib(n-1) + fib(n-2)
</code></pre>
<p>第3回の再帰の考え方がそのまま当てはまっています．</p>
<p><strong>ベースケース:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n \\leq 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> のとき，そのまま <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> を返す．
<strong>再帰ケース:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≥</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">n \\geq 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> のとき，自分自身を2回呼ぶ．
<strong>問題の縮小:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> が <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">n-2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> に減っていく．</p>
<p>完璧な再帰関数に見えます．
定義そのままのシンプルなコードです．</p>
<p>でも……この関数には<strong>重大な問題</strong>が隠れています．」</p>
`,raw:"",frontmatter:ys,filepath:"",start:176,id:5,no:6},__clicksContext:null,__preloaded:!1}),Ei={},ws=L(Ei),Fi=S({get layout(){return ws.layout},get transition(){return ws.transition},get class(){return ws.class},get clicks(){return ws.clicks},get name(){return ws.name},get preload(){return ws.preload},slide:{content:"",revision:"-2t18sc",note:"",title:"再帰ツリーの爆発",level:2,index:6,noteHTML:`<p>「<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>5</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">5</span><span class="mclose">)</span></span></span></span> を計算する過程をツリーで描いてみましょう．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>5</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">5</span><span class="mclose">)</span></span></span></span> を求めるには <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>4</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">4</span><span class="mclose">)</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> が必要です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>4</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">4</span><span class="mclose">)</span></span></span></span> を求めるには <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> が必要です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> を求めるには <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> が必要です．</p>
<p>これをツリーにすると，画面のように枝分かれがどんどん広がっていきます．</p>
<p>ここで気づいてほしいことがあります．
<strong>同じ計算が何度も繰り返されている</strong> のです．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> は <strong>2回</strong> 計算されていますよね．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> に至っては <strong>3回</strong> も計算されています．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> は <strong>5回</strong> も呼ばれています．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">N = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span> でこの状態です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> がもっと大きくなったらどうなるでしょうか？」</p>
`,raw:"",frontmatter:ws,filepath:"",start:225,id:6,no:7},__clicksContext:null,__preloaded:!1}),Ai={},xs=L(Ai),Ci=S({get layout(){return xs.layout},get transition(){return xs.transition},get class(){return xs.class},get clicks(){return xs.clicks},get name(){return xs.name},get preload(){return xs.preload},slide:{content:"",revision:"-3ywoeo",note:"",title:"指数的な爆発",level:2,index:7,noteHTML:`<p>「再帰ツリーのノード数は，ほぼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>N</mi></msup></mrow><annotation encoding="application/x-tex">2^N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span></span></span></span> に比例します．
計算量は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>N</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(2^N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> です．</p>
<p>第2回の指数関数的な増加を思い出してください．</p>
<p>具体的な数字で見てみましょう．
コンピュータが1秒に10億回計算できるとして，</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">N = 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span> なら，約1,000回の関数呼び出し ― 一瞬です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>30</mn></mrow><annotation encoding="application/x-tex">N = 30</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">30</span></span></span></span> なら，約10億回 ― 約1秒．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>50</mn></mrow><annotation encoding="application/x-tex">N = 50</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">50</span></span></span></span> なら，約 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>15</mn></msup></mrow><annotation encoding="application/x-tex">10^{15}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">15</span></span></span></span></span></span></span></span></span></span></span></span> 回 ― <strong>約12日</strong>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">N = 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span> なら，約 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>30</mn></msup></mrow><annotation encoding="application/x-tex">10^{30}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">30</span></span></span></span></span></span></span></span></span></span></span></span> 回 ― <strong>宇宙の年齢でも不可能</strong>．</p>
<p>たった100番目のフィボナッチ数を求めるのに，宇宙の年齢でも足りない．
第2回で学んだ指数爆発そのものです．</p>
<p>でも解決策はあります．
同じ計算を何度もしているのが問題だとわかっている．
ならば，<strong>同じ計算を繰り返さなければいい</strong>．</p>
<p>どうすれば同じ計算を繰り返さないようにできるか？
ヒントは，皆さんが毎日やっていることの中にあります．」</p>
`,raw:"",frontmatter:xs,filepath:"",start:279,id:7,no:8},__clicksContext:null,__preloaded:!1}),Ni={layout:"section-divider"},ks=L(Ni),Di=S({get layout(){return ks.layout},get transition(){return ks.transition},get class(){return ks.class},get clicks(){return ks.clicks},get name(){return ks.name},get preload(){return ks.preload},slide:{content:"",revision:"ibur38",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 2",level:1,index:8,noteHTML:`<p>「『一度やった計算は覚えておく』 ―
この発想をアルゴリズムとして定式化しましょう．」</p>
`,raw:"",frontmatter:ks,filepath:"",start:332,id:8,no:9},__clicksContext:null,__preloaded:!1}),Ri={},vs=L(Ri),Ii=S({get layout(){return vs.layout},get transition(){return vs.transition},get class(){return vs.class},get clicks(){return vs.clicks},get name(){return vs.name},get preload(){return vs.preload},slide:{content:"",revision:"tqlgpo",note:"",title:"試験勉強を思い出してください",level:2,index:9,noteHTML:`<p>「試験勉強のことを考えてみましょう．</p>
<p>一度理解したことを，もう一度教科書から読み直しますか？
普通はしませんよね ― <strong>ノートにメモしておく</strong>．
次に同じ内容が必要になったら，ノートを見ればいい．</p>
<p>アルゴリズムでも同じことが言えます．</p>
<p>一度計算した結果を<strong>メモしておく</strong>．
次に同じ計算が必要になったら，メモを見ればいい．
この技法を <strong>メモ化（Memoization）</strong> といいます．</p>
<p>ちなみに，Memorization（暗記）ではなく <strong>Memo</strong>-ization ―
『メモする』という意味の1968年の造語です．
ドナルド・ミッチーという人工知能の研究者が作った言葉です．
AIの黎明期に生まれた技法が，現代のアルゴリズムの根幹を成しているのは面白いですよね．」</p>
`,raw:"",frontmatter:vs,filepath:"",start:346,id:9,no:10},__clicksContext:null,__preloaded:!1}),ji={},bs=L(ji),zi=S({get layout(){return bs.layout},get transition(){return bs.transition},get class(){return bs.class},get clicks(){return bs.clicks},get name(){return bs.name},get preload(){return bs.preload},slide:{content:"",revision:"-wybrjf",note:"",title:"メモ化の実装",level:2,index:10,noteHTML:`<p>「では，メモ化の具体的なコードを見ましょう．</p>
<pre><code>memo = {}
fib(n):
    if n in memo: return memo[n]   // 記録済みなら即座に返す
    if n &lt;= 1: return n
    memo[n] = fib(n-1) + fib(n-2)  // 結果を記録
    return memo[n]
</code></pre>
<p>素朴な再帰からの変更点は<strong>たった2行</strong>です．</p>
<p>1行目の追加: <code>if n in memo: return memo[n]</code> ―
もしメモに <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> の答えが記録済みなら，計算せずに即座に返す．</p>
<p>結果の記録: <code>memo[n] = fib(n-1) + fib(n-2)</code> ―
新しく計算した結果をメモに記録してから返す．</p>
<p>ここで <code>memo</code> は辞書型のデータ構造です．
第8回で学んだハッシュテーブルを使えば，メモの参照も <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> でできます．</p>
<p>たった2行の追加で，何が起きるでしょうか？」</p>
`,raw:"",frontmatter:bs,filepath:"",start:391,id:10,no:11},__clicksContext:null,__preloaded:!1}),Hi={},Ms=L(Hi),Vi=S({get layout(){return Ms.layout},get transition(){return Ms.transition},get class(){return Ms.class},get clicks(){return Ms.clicks},get name(){return Ms.name},get preload(){return Ms.preload},slide:{content:"",revision:"-9a71yv",note:"",title:"メモ化の効果",level:2,index:11,noteHTML:`<p>「メモ化の効果を確認しましょう．</p>
<p>各 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span> は<strong>最大1回しか計算されない</strong>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>50</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(50)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">50</span><span class="mclose">)</span></span></span></span> を求めるのに必要な計算は，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">(</mo><mn>50</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(0), F(1), F(2), \\ldots, F(50)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">50</span><span class="mclose">)</span></span></span></span> のたった<strong>51回</strong>です．
メモの参照は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> ― 第8回のハッシュテーブルを辞書として使えばいい．</p>
<p>計算量の改善を表にすると，</p>
<p>メモ化なしの計算量は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>N</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(2^N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>．メモ化ありは <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>50</mn></mrow><annotation encoding="application/x-tex">N = 50</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">50</span></span></span></span> のとき，メモ化なしでは約12日．メモ化ありなら<strong>一瞬</strong>．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">N = 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span> のとき，メモ化なしでは宇宙の年齢でも不可能．メモ化ありなら<strong>一瞬</strong>．</p>
<p><strong>指数時間から線形時間</strong> ― たった2行のコードで天文学的な改善です．</p>
<p>第2回のスライドを思い出してください．
指数と多項式の間には超えられない壁がありましたよね．
メモ化は，その壁を突破する技法なのです．」</p>
`,raw:"",frontmatter:Ms,filepath:"",start:445,id:11,no:12},__clicksContext:null,__preloaded:!1}),Bi={},_s=L(Bi),qi=S({get layout(){return _s.layout},get transition(){return _s.transition},get class(){return _s.class},get clicks(){return _s.clicks},get name(){return _s.name},get preload(){return _s.preload},slide:{content:"",revision:"c89jrf",note:"",title:"メモ化のトレース: $F(5)$",level:2,index:12,noteHTML:`<p>「メモ化の動作を，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>5</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">5</span><span class="mclose">)</span></span></span></span> を例にして1ステップずつ追ってみましょう．
memoの状態がどう変化するかに注目してください．</p>
<p>まず <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>5</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">5</span><span class="mclose">)</span></span></span></span> が呼ばれます．memoは空です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>4</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">4</span><span class="mclose">)</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> を呼ぶ必要がある．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>4</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">4</span><span class="mclose">)</span></span></span></span> が呼ばれます．まだmemoは空．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> を呼ぶ必要がある．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> が呼ばれます．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> を呼ぶ．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> が呼ばれます．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span></span></span> を呼ぶ．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> はベースケースで1を返す．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span></span></span> はベースケースで0を返す．</p>
<p>ここで <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> の計算が完了します．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>+</mo><mn>0</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1 + 0 = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>．
この結果をmemoに記録します．memo = {2: 1}．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> はベースケースで1を返す．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> の計算が完了します．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">1 + 1 = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>．
memoに記録．memo = {2: 1, 3: 2}．</p>
<p>次に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>4</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">4</span><span class="mclose">)</span></span></span></span> の中で <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> が呼ばれますが ―
<strong>memoから即座に返す！</strong> 計算不要です．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>4</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">4</span><span class="mclose">)</span></span></span></span> の計算が完了します．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">2 + 1 = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>．
memoに記録．memo = {2: 1, 3: 2, 4: 3}．</p>
<p>そして <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>5</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">5</span><span class="mclose">)</span></span></span></span> の中で <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> が呼ばれますが ―
これも<strong>memoから即座に返す！</strong></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>5</mn><mo stretchy="false">)</mo><mo>=</mo><mn>3</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">F(5) = 3 + 2 = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span> で完了．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> の2回目の呼び出しが，メモのおかげで一瞬で終わっている．
これがメモ化の威力です．」</p>
`,raw:"",frontmatter:_s,filepath:"",start:494,id:12,no:13},__clicksContext:null,__preloaded:!1}),Wi={layout:"interactive"},Ls=L(Wi),Ui=S({get layout(){return Ls.layout},get transition(){return Ls.transition},get class(){return Ls.class},get clicks(){return Ls.clicks},get name(){return Ls.name},get preload(){return Ls.preload},slide:{content:"",revision:"8iymak",frontmatterRaw:`layout: interactive
`,note:"",title:"再帰木で理解するメモ化の効果",level:2,index:13,noteHTML:`<p>「ここで，メモ化の効果を視覚的に確認しましょう．</p>
<p>画面に <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>5</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">5</span><span class="mclose">)</span></span></span></span> の再帰木が表示されています．
まず，メモ化なしの状態を見てください．</p>
<p>オレンジの点線で囲まれたノードがありますね．
これが<strong>同じ部分問題が重複して計算されている箇所</strong>です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> が2回，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> が3回呼ばれている ― さっき表で確認した通りです．</p>
<p>では，メモ化をONにしてみましょう．</p>
<p>紫色に変わったノードに注目してください．
これは<strong>一度計算した結果を再利用している</strong>ことを示しています．
呼び出し回数が15回から9回に激減していますね．</p>
<p>これが <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>N</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(2^N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> への改善の正体です．
重複する枝がすべて刈り取られて，各部分問題を1回ずつしか計算しなくなる．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">N = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span> でも目に見えて枝が減っています．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>50</mn></mrow><annotation encoding="application/x-tex">N = 50</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">50</span></span></span></span> や <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">N = 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span> なら，この効果は天文学的になります．」</p>
`,raw:"",frontmatter:Ls,filepath:"",start:564,id:13,no:14},__clicksContext:null,__preloaded:!1}),Ji={layout:"section-divider"},Ss=L(Ji),Ki=S({get layout(){return Ss.layout},get transition(){return Ss.transition},get class(){return Ss.class},get clicks(){return Ss.clicks},get name(){return Ss.name},get preload(){return Ss.preload},slide:{content:"",revision:"pm3056",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 3",level:1,index:14,noteHTML:`<p>「メモ化は再帰のトップダウンアプローチでした．
次に，同じアイデアを<strong>ボトムアップ</strong>で実現する方法を学びましょう．
これが DPテーブル の考え方です．」</p>
`,raw:"",frontmatter:Ss,filepath:"",start:603,id:14,no:15},__clicksContext:null,__preloaded:!1}),Gi={},Os=L(Gi),Qi=S({get layout(){return Os.layout},get transition(){return Os.transition},get class(){return Os.class},get clicks(){return Os.clicks},get name(){return Os.name},get preload(){return Os.preload},slide:{content:"",revision:"j5hp0d",note:"",title:"トップダウン vs ボトムアップ",level:2,index:15,noteHTML:`<p>「メモ化では再帰を使って『上から下に』計算しました．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>50</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(50)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">50</span><span class="mclose">)</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>49</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(49)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">49</span><span class="mclose">)</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>48</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(48)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">48</span><span class="mclose">)</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.313em;"></span><span class="minner">⋯</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span></span></span></p>
<p>大きな問題から始めて，ベースケースに到達したら戻ってくる．
これがトップダウン方式です．</p>
<p>ボトムアップ方式はその逆です．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.313em;"></span><span class="minner">⋯</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>49</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(49)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">49</span><span class="mclose">)</span></span></span></span> → <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>50</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(50)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">50</span><span class="mclose">)</span></span></span></span></p>
<p>小さい方から順に計算していく ― <strong>再帰を使わない！</strong></p>
<p>ボトムアップ方式では，再帰も辞書も不要です．
必要なのは <strong>ただの配列とforループ</strong> だけ．</p>
<p>これがDPの真の姿です．」</p>
`,raw:"",frontmatter:Os,filepath:"",start:618,id:15,no:16},__clicksContext:null,__preloaded:!1}),Zi={},Ps=L(Zi),Yi=S({get layout(){return Ps.layout},get transition(){return Ps.transition},get class(){return Ps.class},get clicks(){return Ps.clicks},get name(){return Ps.name},get preload(){return Ps.preload},slide:{content:"",revision:"s97286",note:"",title:"フィボナッチのDPテーブル",level:2,index:16,noteHTML:`<p>「ボトムアップのコードを見てみましょう．</p>
<pre><code>dp[0] = 0
dp[1] = 1
for i = 2 to N:
    dp[i] = dp[i-1] + dp[i-2]
</code></pre>
<p>非常にシンプルです．再帰呼び出しも辞書もない．</p>
<p>テーブルの中身を追ってみましょう．</p>
<p>| <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>     | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7  |
|————————-|——-|——-|——-|——-|——-|——-|——-|————|
| <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> | 0 | 1 | 1 | 2 | 3 | 5 | 8 | 13 |</p>
<p><strong>左から右に，順番に埋めていくだけ</strong>です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> を計算するとき，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i-2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span> はすでに計算済みだから，
必ず正しい値が入っている．</p>
<p>これが<strong>DPテーブル</strong>です．
高校で学んだ漸化式の計算と同じ発想ですね．」</p>
`,raw:"",frontmatter:Ps,filepath:"",start:664,id:16,no:17},__clicksContext:null,__preloaded:!1}),Xi={},$s=L(Xi),sr=S({get layout(){return $s.layout},get transition(){return $s.transition},get class(){return $s.class},get clicks(){return $s.clicks},get name(){return $s.name},get preload(){return $s.preload},slide:{content:"",revision:"ws7q8j",note:"",title:"メモ化 vs ボトムアップ",level:2,index:17,noteHTML:`<p>「メモ化とボトムアップを比較しておきましょう．</p>
<p>方向は，メモ化が上から下へ（再帰），ボトムアップが下から上へ（ループ）．
計算する部分問題は，メモ化が必要なもののみ，ボトムアップが全部．
実装は，メモ化が再帰＋辞書，ボトムアップがループ＋配列．
メモリは，メモ化は辞書のオーバーヘッドがあり，ボトムアップは配列で効率的．
計算量はどちらも <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>．</p>
<p>計算量は同じです．
実用上はボトムアップの方がオーバーヘッドが少なく，
再帰のスタック深度の制限も気にしなくてよい．</p>
<p>試験でもボトムアップ（テーブル方式）の方が追跡しやすいので，
この授業ではテーブル方式を中心に扱っていきます．」</p>
`,raw:"",frontmatter:$s,filepath:"",start:721,id:17,no:18},__clicksContext:null,__preloaded:!1}),ar={layout:"section-divider"},Ts=L(ar),nr=S({get layout(){return Ts.layout},get transition(){return Ts.transition},get class(){return Ts.class},get clicks(){return Ts.clicks},get name(){return Ts.name},get preload(){return Ts.preload},slide:{content:"",revision:"4685rh",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 4",level:1,index:18,noteHTML:`<p>「メモ化もボトムアップもできるようになりました．
では，初めてのDP問題に出会ったとき，どうやって設計すればいいのか？
体系的な方法論を学びましょう．」</p>
`,raw:"",frontmatter:Ts,filepath:"",start:761,id:18,no:19},__clicksContext:null,__preloaded:!1}),tr={},Es=L(tr),er=S({get layout(){return Es.layout},get transition(){return Es.transition},get class(){return Es.class},get clicks(){return Es.clicks},get name(){return Es.name},get preload(){return Es.preload},slide:{content:"",revision:"-4nsh71",note:"",title:"DP設計の3ステップ",level:2,index:19,noteHTML:`<p>「すべてのDP問題は，この3ステップで解けます．</p>
<p><strong>ステップ1: 状態を定義する．</strong>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> は何を表すのかを明確にする．</p>
<p><strong>ステップ2: 漸化式を立てる．</strong>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> を，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span>（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>&lt;</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">j &lt; i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>）を使って表す．</p>
<p><strong>ステップ3: 初期値を設定する．</strong>
ベースケース ― 漸化式だけでは計算が始まらないので，出発点を決める．</p>
<p>フィボナッチで確認しましょう．</p>
<p>ステップ1: 状態は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>F</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">dp[i] = F(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span>，つまり <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 番目のフィボナッチ数．
ステップ2: 漸化式は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i] = dp[i-1] + dp[i-2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span>．
ステップ3: 初期値は <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">dp[0] = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">dp[1] = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>．</p>
<p><strong>状態 → 漸化式 → 初期値</strong> ―
この3つが揃えば，あとはテーブルを左から右に埋めるだけです．</p>
<p>この手順は試験にも直結するので，しっかり覚えてください．」</p>
`,raw:"",frontmatter:Es,filepath:"",start:776,id:19,no:20},__clicksContext:null,__preloaded:!1}),lr={},Fs=L(lr),ir=S({get layout(){return Fs.layout},get transition(){return Fs.transition},get class(){return Fs.class},get clicks(){return Fs.clicks},get name(){return Fs.name},get preload(){return Fs.preload},slide:{content:"",revision:"-8p9rk9",note:"",title:"参考: SRTBOTフレームワーク",level:2,index:20,noteHTML:`<p>「参考として，MITの有名なアルゴリズムの授業（6.006）で紹介されている <strong>SRTBOTフレームワーク</strong> を紹介します．</p>
<p>DPの設計を6つのステップに分解したものです．</p>
<p><strong>S</strong> ― Subproblem．部分問題を定義する．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> は何を表すか．
<strong>R</strong> ― Relate．漸化式を立てる．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> と他の <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span> の関係を明確にする．
<strong>T</strong> ― Topological order．計算順序を決める．どの順番でテーブルを埋めるか．
<strong>B</strong> ― Base case．初期値を設定する．
<strong>O</strong> ― Original problem．元の問題の答えを <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">dp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span></span></span></span> からどう読み取るか．
<strong>T</strong> ― Time．全体の計算量を見積もる．</p>
<p>この授業で扱っている3ステップ ― 状態定義・漸化式・初期値 ― は，SRTBOTの S・R・B に対応しています．
残りの T（計算順序）・O（答えの読み取り）・T（計算量）も意識すると，DPの設計がより体系的になります．</p>
<p>詳しく知りたい人は，MITの公開授業を調べてみてください．」</p>
`,raw:"",frontmatter:Fs,filepath:"",start:826,id:20,no:21},__clicksContext:null,__preloaded:!1}),rr={},As=L(rr),or=S({get layout(){return As.layout},get transition(){return As.transition},get class(){return As.class},get clicks(){return As.clicks},get name(){return As.name},get preload(){return As.preload},slide:{content:"",revision:"-ltosma",note:"",title:"例題①: 階段の登り方",level:2,index:21,noteHTML:`<p>「3ステップを使って，新しい問題を解いてみましょう．</p>
<p><strong>問題:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 段の階段がある．1段ずつ登るか，2段飛ばしで登るかを選べる．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 段目に到達する方法は何通りあるか？</p>
<p>DP設計の3ステップで考えます．</p>
<p><strong>ステップ1: 状態の定義．</strong>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 段目に到達する方法の数．</p>
<p><strong>ステップ2: 漸化式．</strong>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 段目に到達するには，2つのルートがある．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 段目から1段登る方法 ― これは <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> 通り．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>−</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">i-2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 段目から2段登る方法 ― これは <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i-2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span> 通り．
したがって，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i] = dp[i-1] + dp[i-2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span>．</p>
<p><strong>ステップ3: 初期値．</strong>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">dp[1] = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>（1段目に到達する方法は1通り ― 1段登るだけ）．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">dp[2] = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>（2段目に到達する方法は2通り ― 1+1か，2段飛ばし）．</p>
<p>気づきましたか？
漸化式がフィボナッチ数列と<strong>同じ形</strong>です！
階段問題の答えは，実はフィボナッチ数になるのです．</p>
<p>異なる問題でも，同じ漸化式が現れる ― これがDPの面白さです．」</p>
`,raw:"",frontmatter:As,filepath:"",start:873,id:21,no:22},__clicksContext:null,__preloaded:!1}),mr={},Cs=L(mr),pr=S({get layout(){return Cs.layout},get transition(){return Cs.transition},get class(){return Cs.class},get clicks(){return Cs.clicks},get name(){return Cs.name},get preload(){return Cs.preload},slide:{content:"",revision:"-ewkctx",note:"",title:"階段問題のトレース",level:2,index:22,noteHTML:`<p>「<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">N = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span> 段のときを具体的にトレースしましょう．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">dp[1] = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>．1段目に登る方法は {1} の1通り．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">dp[2] = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>．2段目に登る方法は {1+1, 2} の2通り．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>2</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">dp[3] = dp[2] + dp[1] = 2 + 1 = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>．{1+1+1, 1+2, 2+1} の3通り．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mn>3</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">dp[4] = dp[3] + dp[2] = 3 + 2 = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span>．{1+1+1+1, 1+1+2, 1+2+1, 2+1+1, 2+2} の5通り．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>=</mo><mn>5</mn><mo>+</mo><mn>3</mn><mo>=</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">dp[5] = dp[4] + dp[3] = 5 + 3 = 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">5</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span>．8通り．</p>
<p><strong>答え: 8通り</strong>．</p>
<p>3ステップで設計し，テーブルを左から右に埋めるだけ．
漸化式が正しければ，あとは機械的に計算できます．</p>
<p>ちなみに <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[4]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span></span></span></span> の中身を数え上げてみると，
1+1+1+1, 1+1+2, 1+2+1, 2+1+1, 2+2 の5通り ―
確かに <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mn>3</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">dp[3] + dp[2] = 3 + 2 = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span> と一致しています．
漸化式が正しいことの確認にもなりますね．」</p>
`,raw:"",frontmatter:Cs,filepath:"",start:929,id:22,no:23},__clicksContext:null,__preloaded:!1}),cr={},Ns=L(cr),hr=S({get layout(){return Ns.layout},get transition(){return Ns.transition},get class(){return Ns.class},get clicks(){return Ns.clicks},get name(){return Ns.name},get preload(){return Ns.preload},slide:{content:"",revision:"tbx59c",note:"",title:"例題②: カエルの移動問題",level:2,index:23,noteHTML:`<p>「次は階段問題とは少し違う問題を考えましょう．</p>
<p><strong>問題:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 個の足場があり，カエルは足場 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> または <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">i+2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> にジャンプできる．
足場 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> の高さは <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">h_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>．ジャンプのコスト = 高さの差の絶対値．
足場1から足場 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> まで移動する<strong>最小コスト</strong>は？</p>
<p>階段問題との違いがわかりますか？
階段問題は『方法の<strong>数</strong>』を求めました．
今度は『コストの<strong>最小値</strong>』を求めます．</p>
<p>3ステップで設計しましょう．</p>
<p><strong>ステップ1: 状態の定義．</strong>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> = 足場1から足場 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> に到達する最小コスト．</p>
<p><strong>ステップ2: 漸化式．</strong>
足場 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> に到達するルートは2つ ―
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> からジャンプする場合のコスト: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi mathvariant="normal">∣</mi><msub><mi>h</mi><mi>i</mi></msub><mo>−</mo><msub><mi>h</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">dp[i-1] + |h_i - h_{i-1}|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mord">∣</span></span></span></span>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>−</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">i-2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> からジャンプする場合のコスト: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>2</mn><mo stretchy="false">]</mo><mo>+</mo><mi mathvariant="normal">∣</mi><msub><mi>h</mi><mi>i</mi></msub><mo>−</mo><msub><mi>h</mi><mrow><mi>i</mi><mo>−</mo><mn>2</mn></mrow></msub><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">dp[i-2] + |h_i - h_{i-2}|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mord">∣</span></span></span></span>
この2つのうち小さい方を選ぶ．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi mathvariant="normal">∣</mi><msub><mi>h</mi><mi>i</mi></msub><mo>−</mo><msub><mi>h</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">∣</mi><mo separator="true">,</mo><mspace width="1em"/><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>2</mn><mo stretchy="false">]</mo><mo>+</mo><mi mathvariant="normal">∣</mi><msub><mi>h</mi><mi>i</mi></msub><mo>−</mo><msub><mi>h</mi><mrow><mi>i</mi><mo>−</mo><mn>2</mn></mrow></msub><mi mathvariant="normal">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">dp[i] = \\min(dp[i-1] + |h_i - h_{i-1}|, \\quad dp[i-2] + |h_i - h_{i-2}|)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mclose">)</span></span></span></span></p>
<p><strong>ステップ3: 初期値．</strong>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">dp[1] = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>（出発地点なのでコスト0）．</p>
<p>漸化式の構造に注目してください．
階段問題では <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">+</span></span></span></span>（足し算）でしたが，カエル問題では <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>min</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\\min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mop">min</span></span></span></span>（最小値）に変わっています．
『数え上げ問題は足し算，最適化問題はminまたはmax』 ― これはDPの重要なパターンです．」</p>
`,raw:"",frontmatter:Ns,filepath:"",start:975,id:23,no:24},__clicksContext:null,__preloaded:!1}),ur={layout:"interactive"},Ds=L(ur),gr=S({get layout(){return Ds.layout},get transition(){return Ds.transition},get class(){return Ds.class},get clicks(){return Ds.clicks},get name(){return Ds.name},get preload(){return Ds.preload},slide:{content:"",revision:"-fzo5nt",frontmatterRaw:`layout: interactive
`,note:"",title:"DPテーブルを埋めてみよう",level:2,index:24,noteHTML:`<p>「画面のDPテーブルを使って，実際にテーブルを埋めてみましょう．</p>
<p>足場1のdp[1] = 0 はすでに入っています．</p>
<p>高さは <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>=</mo><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>9</mn><mo separator="true">,</mo><mn>4</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">h = [2, 9, 4, 5, 1, 6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">]</span></span></span></span> を使います．</p>
<p>まず dp[2] を計算してください．
足場1からしか来れないので，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi mathvariant="normal">∣</mi><mi>h</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>−</mo><mi>h</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mi mathvariant="normal">∣</mi><mo>=</mo><mn>0</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>9</mn><mo>−</mo><mn>2</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">dp[1] + |h[2] - h[1]| = 0 + |9 - 2| = 7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal">h</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span> です．
dp[2] = 7 を入力してください．</p>
<p>次に dp[3]．
足場2からの場合: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>4</mn><mo>−</mo><mn>9</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>12</mn></mrow><annotation encoding="application/x-tex">7 + |4 - 9| = 12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">9∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">12</span></span></span></span>
足場1からの場合: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>4</mn><mo>−</mo><mn>2</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">0 + |4 - 2| = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>
min(12, 2) = 2 です．dp[3] = 2．</p>
<p>dp[4] はみなさんで計算してみてください．
紙に描いて確かめてみましょう．</p>
<p>（少し間を置く）</p>
<p>足場3から: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>5</mn><mo>−</mo><mn>4</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">2 + |5 - 4| = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">4∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>
足場2から: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>5</mn><mo>−</mo><mn>9</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>11</mn></mrow><annotation encoding="application/x-tex">7 + |5 - 9| = 11</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">9∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">11</span></span></span></span>
min(3, 11) = 3 です．dp[4] = 3．</p>
<p>残りも順に埋めていってください．」</p>
`,raw:"",frontmatter:Ds,filepath:"",start:1034,id:24,no:25},__clicksContext:null,__preloaded:!1}),dr={},Rs=L(dr),fr=S({get layout(){return Rs.layout},get transition(){return Rs.transition},get class(){return Rs.class},get clicks(){return Rs.clicks},get name(){return Rs.name},get preload(){return Rs.preload},slide:{content:"",revision:"taxdgc",note:"",title:"カエル問題の完全トレース",level:2,index:25,noteHTML:`<p>「完全トレースを確認しましょう．
高さ: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>=</mo><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>9</mn><mo separator="true">,</mo><mn>4</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">h = [2, 9, 4, 5, 1, 6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">]</span></span></span></span></p>
<p>dp[1] = 0．初期値です．</p>
<p>dp[2]: 足場1からの <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>9</mn><mo>−</mo><mn>2</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">0 + |9 - 2| = 7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span>．他の選択肢なし．dp[2] = <strong>7</strong>．</p>
<p>dp[3]: 足場2からの <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>4</mn><mo>−</mo><mn>9</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>12</mn></mrow><annotation encoding="application/x-tex">7 + |4 - 9| = 12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">9∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">12</span></span></span></span>，足場1からの <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>4</mn><mo>−</mo><mn>2</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">0 + |4 - 2| = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>．
min(12, 2) = <strong>2</strong>．</p>
<p>dp[4]: 足場3からの <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>5</mn><mo>−</mo><mn>4</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">2 + |5 - 4| = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">4∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>，足場2からの <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>5</mn><mo>−</mo><mn>9</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>11</mn></mrow><annotation encoding="application/x-tex">7 + |5 - 9| = 11</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">9∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">11</span></span></span></span>．
min(3, 11) = <strong>3</strong>．</p>
<p>dp[5]: 足場4からの <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>1</mn><mo>−</mo><mn>5</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">3 + |1 - 5| = 7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span>，足場3からの <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>1</mn><mo>−</mo><mn>4</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">2 + |1 - 4| = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">4∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span>．
min(7, 5) = <strong>5</strong>．</p>
<p>dp[6]: 足場5からの <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>6</mn><mo>−</mo><mn>1</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">5 + |6 - 1| = 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣6</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span>，足場4からの <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>+</mo><mi mathvariant="normal">∣</mi><mn>6</mn><mo>−</mo><mn>5</mn><mi mathvariant="normal">∣</mi><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">3 + |6 - 5| = 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣6</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span>．
min(10, 4) = <strong>4</strong>．</p>
<p><strong>最小コスト:</strong> dp[6] = 4．
最適ルートを逆にたどると，1 → 3 → 4 → 6 です．</p>
<p>dp[3] = 2 がポイントです．
足場2を経由するよりも，足場1から直接足場3に跳ぶ方がコストが安い．
最短経路は必ずしも1歩ずつ進むルートではない ― DPだからこそ見つかる最適解です．</p>
<p>これ，カーナビの経路計算と同じ発想だと気づきましたか？
各交差点までの最短距離を，手前の交差点から計算する．
第13回で学ぶダイクストラ法も，実はこの考え方の拡張です．」</p>
`,raw:"",frontmatter:Rs,filepath:"",start:1071,id:25,no:26},__clicksContext:null,__preloaded:!1}),yr={layout:"section-divider"},Is=L(yr),wr=S({get layout(){return Is.layout},get transition(){return Is.transition},get class(){return Is.class},get clicks(){return Is.clicks},get name(){return Is.name},get preload(){return Is.preload},slide:{content:"",revision:"uc4b6j",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 5",level:1,index:26,noteHTML:`<p>「2つの例題を解きました．
ここからはDPの本質を理論的に整理し，さらなる応用を見ていきましょう．」</p>
`,raw:"",frontmatter:Is,filepath:"",start:1129,id:26,no:27},__clicksContext:null,__preloaded:!1}),xr={},js=L(xr),kr=S({get layout(){return js.layout},get transition(){return js.transition},get class(){return js.class},get clicks(){return js.clicks},get name(){return js.name},get preload(){return js.preload},slide:{content:"",revision:"6i07zi",note:"",title:"DPが使える条件",level:2,index:27,noteHTML:`<p>「DPが万能な手法かというと，そうではありません．
DPが使えるためには，2つの条件が必要です．</p>
<p><strong>条件1: 重複する部分問題（Overlapping Subproblems）</strong>
同じ計算が何度も必要になること．
フィボナッチでいえば，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> が何度も呼ばれる ― これが重複です．
重複があるからこそ，メモ化に意味がある．</p>
<p><strong>条件2: 最適部分構造（Optimal Substructure）</strong>
全体の最適解が，部分問題の最適解から構成できること．
カエル問題でいえば，足場6への最適経路は，
足場4または足場5への最適経路を含んでいる．
部分の最適解を組み合わせれば全体の最適解になる ― これが最適部分構造です．</p>
<p>では，DPが使えない場合はどうするか？</p>
<p>部分問題が重複しないなら → 分割統治法（マージソート等）で十分．
わざわざメモ化する必要がない．</p>
<p>部分問題の最適解が全体の最適解を構成しないなら → 別の手法が必要です．</p>
<p>2つの条件を満たすかどうかを見極められれば，DPを適用すべきかどうか判断できます．」</p>
`,raw:"",frontmatter:js,filepath:"",start:1143,id:27,no:28},__clicksContext:null,__preloaded:!1}),vr={},zs=L(vr),br=S({get layout(){return zs.layout},get transition(){return zs.transition},get class(){return zs.class},get clicks(){return zs.clicks},get name(){return zs.name},get preload(){return zs.preload},slide:{content:"",revision:"t1cqtr",note:"",title:"メモリの最適化",level:2,index:28,noteHTML:`<p>「フィボナッチのDPテーブルをもう一度見てください．</p>
<pre><code>dp[0] = 0, dp[1] = 1
for i = 2 to N:
    dp[i] = dp[i-1] + dp[i-2]
</code></pre>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> を計算するのに使うのは <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> と <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i-2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span> <strong>だけ</strong>です．
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i-3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mclose">]</span></span></span></span> 以前の値は，もう使いません．</p>
<p>ということは，配列全体を保持する必要はない．
<strong>変数2つで十分</strong>なのです．</p>
<pre><code>a = 0, b = 1         // F(0), F(1)
for i = 2 to N:
    c = a + b         // F(i) = F(i-2) + F(i-1)
    a = b             // 次に備えて更新
    b = c
</code></pre>
<p>これでメモリが <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> から <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> に改善されます．
配列すら不要 ― 変数2つとループだけ．</p>
<p>ただし注意点があります．
この最適化をすると，途中の値を後から参照できなくなる．
カエル問題のように『最適経路を復元したい』場合は，配列が必要です．</p>
<p>DPの構造を理解していれば，こういう最適化に気づけます．
逆に言えば，最適化は構造を理解してからで十分です．」</p>
`,raw:"",frontmatter:zs,filepath:"",start:1191,id:28,no:29},__clicksContext:null,__preloaded:!1}),Mr={},Hs=L(Mr),_r=S({get layout(){return Hs.layout},get transition(){return Hs.transition},get class(){return Hs.class},get clicks(){return Hs.clicks},get name(){return Hs.name},get preload(){return Hs.preload},slide:{content:"",revision:"rhc6wr",note:"",title:"身の回りのDP",level:2,index:29,noteHTML:`<p>「DPは学術的な概念に見えるかもしれませんが，
身の回りのさまざまな場面で使われています．</p>
<p><strong>カーナビの最短経路</strong> ―
状態は各交差点までの最短距離．漸化式は，前の交差点プラス道路の距離．</p>
<p><strong>文章の自動改行</strong> ―
ワードプロセッサの自動改行も，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 文字目までの最小コストをDPで計算しています．</p>
<p><strong>音声認識</strong> ―
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> 秒目までの最適な単語列を，前の単語と次の単語の確率からDPで計算します．</p>
<p><strong>生物の配列比較</strong> ―
DNA配列の類似度を計算するアラインメントも，実はDPです．
1文字の一致・不一致・挿入・削除のコストから最適な対応を求める．</p>
<p>DPは，最短経路，最小コスト，最大利益，場合の数 ―
<strong>最適化問題と計数問題</strong>の強力な道具です．</p>
<p>来週学ぶナップザック問題も，DPの代表的な応用の1つです．」</p>
`,raw:"",frontmatter:Hs,filepath:"",start:1261,id:29,no:30},__clicksContext:null,__preloaded:!1}),Lr={layout:"section-divider"},Vs=L(Lr),Sr=S({get layout(){return Vs.layout},get transition(){return Vs.transition},get class(){return Vs.class},get clicks(){return Vs.clicks},get name(){return Vs.name},get preload(){return Vs.preload},slide:{content:"",revision:"73oigd",frontmatterRaw:`layout: section-divider
`,note:"",title:"Part 6",level:1,index:30,noteHTML:`<p>「最後にまとめと確認問題です．」</p>
`,raw:"",frontmatter:Vs,filepath:"",start:1304,id:30,no:31},__clicksContext:null,__preloaded:!1}),Or={layout:"summary"},Bs=L(Or),Pr=S({get layout(){return Bs.layout},get transition(){return Bs.transition},get class(){return Bs.class},get clicks(){return Bs.clicks},get name(){return Bs.name},get preload(){return Bs.preload},slide:{content:"",revision:"7y3fq1",frontmatterRaw:`layout: summary
`,note:"",title:"本日のまとめ",level:2,index:31,noteHTML:`<p>「今日のポイントを6つにまとめます．</p>
<p>1つ目．<strong>素朴な再帰の罠</strong> ― 重複計算で <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>N</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(2^N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> に爆発する．</p>
<p>2つ目．<strong>メモ化</strong> ― 計算結果を記録して重複を排除．<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> に改善．</p>
<p>3つ目．<strong>ボトムアップ（DPテーブル）</strong> ― 漸化式に従って小さい方から順に埋める．再帰不要．</p>
<p>4つ目．<strong>DP設計の3ステップ</strong> ― 状態定義 → 漸化式 → 初期値．</p>
<p>5つ目．<strong>DPが使える条件</strong> ― 重複する部分問題と最適部分構造の2つ．</p>
<p>6つ目．<strong>メモリ最適化</strong> ― 使う値だけ覚えておけばよい．</p>
<p>教科書の対応箇所は第7章の7.1から7.3です．」</p>
`,raw:"",frontmatter:Bs,filepath:"",start:1316,id:31,no:32},__clicksContext:null,__preloaded:!1}),$r={layout:"question"},qs=L($r),Tr=S({get layout(){return qs.layout},get transition(){return qs.transition},get class(){return qs.class},get clicks(){return qs.clicks},get name(){return qs.name},get preload(){return qs.preload},slide:{content:"",revision:"899fg2",frontmatterRaw:`layout: question
`,note:"",title:"確認問題 ①",level:2,index:32,noteHTML:`<p>「確認問題です．</p>
<p>フィボナッチ数列をメモ化なしの単純な再帰で計算するとき，計算量は？</p>
<p>選択肢は，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>N</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(2^N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N \\log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>．</p>
<p>隣の人と10秒ほど相談してみてください．</p>
<p>……答えは3番の <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>N</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(2^N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></strong> です．</p>
<p>同じ部分問題が指数的に繰り返されるため <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>N</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(2^N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>．
メモ化すれば <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\mathrm{O}(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> に改善できます．
指数時間が線形時間になる ― 今日の核心です．」</p>
`,raw:"",frontmatter:qs,filepath:"",start:1353,id:32,no:33},__clicksContext:null,__preloaded:!1}),Er={layout:"question"},Ws=L(Er),Fr=S({get layout(){return Ws.layout},get transition(){return Ws.transition},get class(){return Ws.class},get clicks(){return Ws.clicks},get name(){return Ws.name},get preload(){return Ws.preload},slide:{content:"",revision:"-irn7yd",frontmatterRaw:`layout: question
`,note:"",title:"確認問題 ②",level:2,index:33,noteHTML:`<p>「2問目です．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">N = 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> 段の階段を，1段ずつまたは2段飛ばしで登る方法は何通りか？</p>
<p>選択肢は，3通り，4通り，5通り，8通り．</p>
<p>紙でDPテーブルを埋めてみてください．</p>
<p>……答えは3番の <strong>5通り</strong> です．</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">dp[1] = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">dp[2] = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">dp[3] = dp[2] + dp[1] = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">dp[4] = dp[3] + dp[2] = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span>．</p>
<p>具体的には {1+1+1+1, 1+1+2, 1+2+1, 2+1+1, 2+2} の5通り．
漸化式を立ててテーブルを埋めれば，数え上げなくても答えが出ます．」</p>
`,raw:"",frontmatter:Ws,filepath:"",start:1398,id:33,no:34},__clicksContext:null,__preloaded:!1}),Ar={layout:"question"},Us=L(Ar),Cr=S({get layout(){return Us.layout},get transition(){return Us.transition},get class(){return Us.class},get clicks(){return Us.clicks},get name(){return Us.name},get preload(){return Us.preload},slide:{content:"",revision:"-3753hl",frontmatterRaw:`layout: question
`,note:"",title:"確認問題 ③",level:2,index:34,noteHTML:`<p>「最後の確認問題です．</p>
<p>DPテーブルをボトムアップで埋めるとき，最初に必要なのは？</p>
<p>選択肢は，漸化式のみ，初期値のみ，
状態の定義と漸化式と初期値すべて，再帰関数の実装．</p>
<p>……答えは3番，<strong>状態の定義と漸化式と初期値すべて</strong> です．</p>
<p>状態定義がないと <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> の意味がわからず，
漸化式がないと埋め方がわからず，
初期値がないと計算が始まらない ―
3つすべてが必要です．</p>
<p>これがDP設計の3ステップの重要性です．」</p>
`,raw:"",frontmatter:Us,filepath:"",start:1446,id:34,no:35},__clicksContext:null,__preloaded:!1}),Nr={},Js=L(Nr),Dr=S({get layout(){return Js.layout},get transition(){return Js.transition},get class(){return Js.class},get clicks(){return Js.clicks},get name(){return Js.name},get preload(){return Js.preload},slide:{content:"",revision:"-ykxth4",note:"",title:"次回予告",level:2,index:35,noteHTML:`<p>「今日のDPは1次元 ― つまりテーブルが一列でした．
来週はこれを<strong>2次元</strong>に拡張します．</p>
<p>テーマは <strong>ナップザック問題</strong> です．</p>
<p>みなさん，旅行の荷造りをするとき，
重さ制限があるリュックに最大価値の荷物を詰めたい．
『単価が高いものから詰めれば最適だろう』と思うかもしれません．</p>
<p>実はそれ，<strong>間違い</strong>です．
直感に反する反例がちゃんと存在します．</p>
<p>でも2次元のDPテーブルを使えば，確実に最適解が求まる．
来週はそれを見ていきます．</p>
<p>教科書の第7章後半に目を通しておいてください．</p>
<p>小テストはMicrosoft Formsで配信します．期限は来週の授業前日までです．
DPの漸化式を立てる練習をしておいてください．
それでは今日はここまで．ありがとうございました．」</p>
`,raw:"",frontmatter:Js,filepath:"",start:1494,id:35,no:36},__clicksContext:null,__preloaded:!1}),$=new Array(36),P=(a,s)=>il({loader:s,delay:300,loadingComponent:wi,errorComponent:O,onError:n=>console.error("Failed to load slide "+(a+1),n)}),ot=async()=>{try{return $[0]??=await _(()=>import("./md-C0GDX64Z.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},mt=async()=>{try{return $[1]??=await _(()=>import("./md-D9mQazZw.js"),__vite__mapDeps([5,1,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},pt=async()=>{try{return $[2]??=await _(()=>import("./md-DNVix9jK.js"),__vite__mapDeps([6,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},ct=async()=>{try{return $[3]??=await _(()=>import("./md-eFuEbBRk.js"),__vite__mapDeps([8,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},ht=async()=>{try{return $[4]??=await _(()=>import("./md-BQRVqpwc.js"),__vite__mapDeps([10,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},ut=async()=>{try{return $[5]??=await _(()=>import("./md-ChhSRZ7n.js"),__vite__mapDeps([11,12,13,1,2,7,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},gt=async()=>{try{return $[6]??=await _(()=>import("./md-TQ1Hrbn5.js"),__vite__mapDeps([14,12,13,1,2,7,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},dt=async()=>{try{return $[7]??=await _(()=>import("./md-CnuDhJdu.js"),__vite__mapDeps([15,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},ft=async()=>{try{return $[8]??=await _(()=>import("./md-DLfC8I-p.js"),__vite__mapDeps([16,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},yt=async()=>{try{return $[9]??=await _(()=>import("./md-Bw6Cg5eo.js"),__vite__mapDeps([17,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},wt=async()=>{try{return $[10]??=await _(()=>import("./md-CqaJYis7.js"),__vite__mapDeps([18,12,13,1,2,7,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},xt=async()=>{try{return $[11]??=await _(()=>import("./md-C4HW_OBr.js"),__vite__mapDeps([19,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},kt=async()=>{try{return $[12]??=await _(()=>import("./md-bNfGOsfP.js"),__vite__mapDeps([20,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},vt=async()=>{try{return $[13]??=await _(()=>import("./md-jJHkhc5f.js"),__vite__mapDeps([21,1,2,22,3,4,23]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},bt=async()=>{try{return $[14]??=await _(()=>import("./md-Dk-mV0Cb.js"),__vite__mapDeps([24,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Mt=async()=>{try{return $[15]??=await _(()=>import("./md-ppNicaFO.js"),__vite__mapDeps([25,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},_t=async()=>{try{return $[16]??=await _(()=>import("./md-D-9aAmLd.js"),__vite__mapDeps([26,12,13,1,2,7,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Lt=async()=>{try{return $[17]??=await _(()=>import("./md-E7ZllbaX.js"),__vite__mapDeps([27,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},St=async()=>{try{return $[18]??=await _(()=>import("./md-BOnd7GRS.js"),__vite__mapDeps([28,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Ot=async()=>{try{return $[19]??=await _(()=>import("./md-CovBwwgU.js"),__vite__mapDeps([29,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Pt=async()=>{try{return $[20]??=await _(()=>import("./md-CkXKRsqc.js"),__vite__mapDeps([30,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},$t=async()=>{try{return $[21]??=await _(()=>import("./md-CkGnfWiV.js"),__vite__mapDeps([31,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Tt=async()=>{try{return $[22]??=await _(()=>import("./md-C28BRajI.js"),__vite__mapDeps([32,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Et=async()=>{try{return $[23]??=await _(()=>import("./md-B5A81Meu.js"),__vite__mapDeps([33,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Ft=async()=>{try{return $[24]??=await _(()=>import("./md-ihEPhk_q.js"),__vite__mapDeps([34,1,2,22,3,4,35]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},At=async()=>{try{return $[25]??=await _(()=>import("./md-DOMpXjkd.js"),__vite__mapDeps([36,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Ct=async()=>{try{return $[26]??=await _(()=>import("./md-Brvz9Keh.js"),__vite__mapDeps([37,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Nt=async()=>{try{return $[27]??=await _(()=>import("./md-DUOSl3r0.js"),__vite__mapDeps([38,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Dt=async()=>{try{return $[28]??=await _(()=>import("./md-3EIsT9av.js"),__vite__mapDeps([39,12,13,1,2,7,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Rt=async()=>{try{return $[29]??=await _(()=>import("./md-DN8OaeQO.js"),__vite__mapDeps([40,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},It=async()=>{try{return $[30]??=await _(()=>import("./md-CuJsIQFh.js"),__vite__mapDeps([41,1,9,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},jt=async()=>{try{return $[31]??=await _(()=>import("./md-BB9-6qXm.js"),__vite__mapDeps([42,1,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},zt=async()=>{try{return $[32]??=await _(()=>import("./md-DR1cam4S.js"),__vite__mapDeps([43,1,44,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Ht=async()=>{try{return $[33]??=await _(()=>import("./md-ClgZFZSE.js"),__vite__mapDeps([45,1,44,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Vt=async()=>{try{return $[34]??=await _(()=>import("./md-CaUAYQ4g.js"),__vite__mapDeps([46,1,44,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Bt=async()=>{try{return $[35]??=await _(()=>import("./md-XXWMy3L4.js"),__vite__mapDeps([47,1,7,2,3,4]),import.meta.url)}catch(a){return console.error("slide failed to load",a),O}},Rr=[{no:1,meta:ki,load:ot,component:P(0,ot)},{no:2,meta:bi,load:mt,component:P(1,mt)},{no:3,meta:_i,load:pt,component:P(2,pt)},{no:4,meta:Si,load:ct,component:P(3,ct)},{no:5,meta:Pi,load:ht,component:P(4,ht)},{no:6,meta:Ti,load:ut,component:P(5,ut)},{no:7,meta:Fi,load:gt,component:P(6,gt)},{no:8,meta:Ci,load:dt,component:P(7,dt)},{no:9,meta:Di,load:ft,component:P(8,ft)},{no:10,meta:Ii,load:yt,component:P(9,yt)},{no:11,meta:zi,load:wt,component:P(10,wt)},{no:12,meta:Vi,load:xt,component:P(11,xt)},{no:13,meta:qi,load:kt,component:P(12,kt)},{no:14,meta:Ui,load:vt,component:P(13,vt)},{no:15,meta:Ki,load:bt,component:P(14,bt)},{no:16,meta:Qi,load:Mt,component:P(15,Mt)},{no:17,meta:Yi,load:_t,component:P(16,_t)},{no:18,meta:sr,load:Lt,component:P(17,Lt)},{no:19,meta:nr,load:St,component:P(18,St)},{no:20,meta:er,load:Ot,component:P(19,Ot)},{no:21,meta:ir,load:Pt,component:P(20,Pt)},{no:22,meta:or,load:$t,component:P(21,$t)},{no:23,meta:pr,load:Tt,component:P(22,Tt)},{no:24,meta:hr,load:Et,component:P(23,Et)},{no:25,meta:gr,load:Ft,component:P(24,Ft)},{no:26,meta:fr,load:At,component:P(25,At)},{no:27,meta:wr,load:Ct,component:P(26,Ct)},{no:28,meta:kr,load:Nt,component:P(27,Nt)},{no:29,meta:br,load:Dt,component:P(28,Dt)},{no:30,meta:_r,load:Rt,component:P(29,Rt)},{no:31,meta:Sr,load:It,component:P(30,It)},{no:32,meta:Pr,load:jt,component:P(31,jt)},{no:33,meta:Tr,load:zt,component:P(32,zt)},{no:34,meta:Fr,load:Ht,component:P(33,Ht)},{no:35,meta:Cr,load:Vt,component:P(34,Vt)},{no:36,meta:Dr,load:Bt,component:P(35,Bt)}],ts=Dn(Rr);function Jm(a){if(typeof a=="number")return{seconds:a,relative:!1};const s=a.startsWith("+");s&&(a=a.slice(1));let n=0;if(a.includes(":")){const t=a.split(":").map(Number);let e=0,l=0,i=0;if(t.length===3)e=t[0],l=t[1],i=t[2];else if(t.length===2)l=t[0],i=t[1];else if(t.length===1)i=t[0];else throw new TypeError("Invalid timestamp format");if(Number.isNaN(e)||Number.isNaN(l)||Number.isNaN(i))throw new TypeError("Invalid timestamp format");n=(e||0)*3600+(l||0)*60+(i||0)}else if(!a.match(/[a-z]/i))n=Number(a);else{const t={s:1,sec:1,secs:1,m:60,min:60,mins:60,h:3600,hr:3600,hrs:3600,hour:3600,hours:3600,day:86400,days:86400,week:604800,weeks:604800,month:2629746,months:2629746,year:31556952,years:31556952},e=/([\d.]+)([a-z]+)/gi,l=a.matchAll(e);if(l)for(const r of l){const o=Number(r[1]);if(Number.isNaN(o))throw new TypeError(`Invalid timestamp value: ${r[1]}`);const m=r[2].toLowerCase();if(!(m in t))throw new TypeError(`Invalid timestamp unit: ${m}`);n+=o*t[m]}const i=a.replace(e,"").trim();if(i)throw new TypeError(`Unknown timestamp remaining: ${i}`)}return{seconds:n,relative:s}}function xe(a,s){if(!s||s==="all"||s==="*")return st(1,a+1);if(s==="none")return[];const n=[];for(const t of s.split(/[,;]/g))if(!t.includes("-"))n.push(+t);else{const[e,l]=t.split("-",2);n.push(...st(+e,l?+l+1:a+1))}return Fl(n).filter(t=>t<=a).sort((t,e)=>t-e)}const Za="$$slidev-clicks-context",Rn="$$slidev-page",ke="$$slidev-slide-element",Ir="$$slidev-slide-scale",jr="$$slidev-context",Km="$$slidev-route",In="$$slidev-render-context",zr="$$slidev-fontmatter",Hr="$$slidev-slide-zoom",Fa="slidev-vclick-target",ha="slidev-vclick-hidden",ua="slidev-vclick-fade",on="slidev-vclick-hidden-explicitly",mn="slidev-vclick-current",pn="slidev-vclick-prior",Aa=999999,Vr=["localhost","127.0.0.1"],Br=["clicks","clicksStart","disabled","hide","hideInToc","layout","level","preload","routeAlias","src","title","transition","zoom","dragPos","lang"],Gm=[...Br,"theme","titleTemplate","info","author","keywords","presenter","browserExporter","download","exportFilename","export","highlighter","lineNumbers","monaco","monacoTypesSource","monacoTypesAdditionalPackages","monacoRunAdditionalDeps","monacoRunUseStrict","remoteAssets","selectable","record","colorSchema","routerMode","aspectRatio","canvasWidth","themeConfig","favicon","plantUmlServer","fonts","defaults","drawings","htmlAttrs","mdc","contextMenu","wakeLock","seoMeta","notesAutoRuby","magicMoveDuration","preloadImages"];function qr(a,s,{mode:n="replace"}={}){const t=Ga();return v({get(){const e=t.currentRoute.value.query[a];return e==null?s:Array.isArray(e)?e.filter(Boolean):e},set(e){rl(()=>{(t.currentRoute.value.query[a]??s?.toString())!==e.toString()&&t[ol(n)]({query:{...t.currentRoute.value.query,[a]:`${e}`===s?void 0:e}})})}})}function Ya(a){return ts.value.find(s=>s.no===+a||s.meta.slide?.frontmatter.routeAlias===a)}function ta(a,s,n=!1){(typeof a=="number"||typeof a=="string")&&(a=Ya(a));const t=a.meta.slide?.frontmatter.routeAlias??a.no;return n?`/export/${t}`:s?`/presenter/${t}`:`/${t}`}const Wr={"slide-left":"slide-left | slide-right","slide-right":"slide-right | slide-left","slide-up":"slide-up | slide-down","slide-down":"slide-down | slide-up"};function Ur(a,s=!1){if(!a||(typeof a=="string"&&(a={name:a}),!a.name))return;let n=a.name.includes("|")?a.name:Wr[a.name]||a.name;if(n.includes("|")){const[t,e]=n.split("|").map(l=>l.trim());n=s?e:t}if(n)return{...a,name:n}}function Jr(a,s,n){let t=a>0?n?.meta?.transition:s?.meta?.transition;return t||(t=R.transition||void 0),Ur(t,a<0)}const Qm=E(!1),Zm=E(!1),Ym=E(!1),Kr=E(!1),jn=E(!1),Xm=E(!1),sp=E(!0),Gr=L(new Set),ap=v(()=>Gr.size>0),np=cl({xs:460,...ul}),Ha=gl(),tp=ml(),ep=v(()=>Ha.height.value-Ha.width.value/ce.value>120),lp=pl(Qa?document.body:null),ve=hl(),ip=v(()=>["INPUT","TEXTAREA"].includes(ve.value?.tagName||"")),rp=v(()=>["BUTTON","A"].includes(ve.value?.tagName||""));q("slidev-camera","default",{listenToStorageChanges:!1});q("slidev-mic","default",{listenToStorageChanges:!1});const Qr=q("slidev-scale",0),op=q("slidev-wake-lock",!0),mp=q("slidev-hide-cursor-idle",!0);q("slidev-skip-export-pdf-tip",!1);q("slidev-export-capture-delay",400,{listenToStorageChanges:!1});const pp=q("slidev-presenter-cursor",!0,{listenToStorageChanges:!1}),Zr=q("slidev-show-editor",!1,{listenToStorageChanges:!1}),Yr=q("slidev-editor-vertical",!1,{listenToStorageChanges:!1}),Xr=q("slidev-editor-width",Qa?window.innerWidth*.4:318,{listenToStorageChanges:!1}),so=q("slidev-editor-height",Qa?window.innerHeight*.4:300,{listenToStorageChanges:!1}),_a=Dn(null),Va=q("slidev-presenter-font-size",1,{listenToStorageChanges:!1}),La=q("slidev-presenter-layout",1,{listenToStorageChanges:!1}),Ln={invert:!1,contrast:1,brightness:1,hueRotate:0,saturate:1,sepia:0},ao=q("slidev-viewer-css-filter",Ln,{listenToStorageChanges:!1,mergeDefaults:!0,deep:!0}),cp=v(()=>Object.keys(Ln).some(a=>ao.value[a]!==Ln[a]));function hp(){La.value=La.value+1,La.value>3&&(La.value=1)}function up(){Va.value=Math.min(2,Va.value+.1)}function gp(){Va.value=Math.max(.5,Va.value-.1)}const dp=oe(Kr),Sa=q("slidev-sync-directions",{viewerSend:!0,viewerReceive:!0,presenterSend:!0,presenterReceive:!0},{listenToStorageChanges:!1,mergeDefaults:!0});function be(a,s,n=1){const t=s.meta.slide.level??n;t&&t>n&&a.length>0?be(a[a.length-1].children,s,n+1):a.push({no:s.no,children:[],level:n,titleLevel:t,path:ta(s.meta.slide?.frontmatter?.routeAlias??s.no,!1),hideInToc:!!s.meta?.slide?.frontmatter?.hideInToc,title:s.meta?.slide?.title})}function Me(a,s,n=!1,t,e){return a.map(l=>{const i={...l,active:l.no===e?.value,hasActiveParent:n};return i.children.length>0&&(i.children=Me(i.children,s,i.active||i.hasActiveParent,i,e)),t&&(i.active||i.activeParent)&&(t.activeParent=!0),i})}function _e(a,s=1){return a.filter(n=>!n.hideInToc).map(n=>({...n,children:_e(n.children,s+1)}))}function no(a,s,n){const t=v(()=>a.value.filter(l=>l.meta?.slide?.title).reduce((l,i)=>(be(l,i),l),[])),e=v(()=>Me(t.value,n.value,void 0,void 0,s));return v(()=>_e(e.value))}function to(a,s,n=E(0),t,e,l){const i=v(()=>ts.value.length),r=E(0),o=E(0),m=v(()=>ta(a.value,t.value)),c=v(()=>a.value.no),u=v(()=>a.value.meta?.layout||(c.value===1?"cover":"default")),h=v(()=>s.value.current),p=v(()=>s.value.clicksStart),d=v(()=>s.value.total),g=v(()=>ts.value[Math.min(ts.value.length,c.value+1)-1]),f=v(()=>ts.value[Math.max(1,c.value-1)-1]),y=v(()=>c.value<ts.value.length||h.value<d.value),w=v(()=>c.value>1||h.value>0),x=v(()=>e.value?void 0:Jr(r.value,a.value,f.value));ss(a,(j,N)=>{r.value=j.no-N.no});async function k(j){return!1}const b=no(ts,c,a);async function F(){o.value=1,d.value<=n.value?await H():n.value+=1}async function C(){o.value=-1,n.value<=p.value?await U(!0):n.value-=1}async function H(j=!1){o.value=1,c.value<ts.value.length&&await T(c.value+1,j&&!e.value?Aa:void 0)}async function U(j=!1){o.value=-1,c.value>1&&await T(c.value-1,j&&!e.value?Aa:void 0)}function os(){return T(1)}function Y(){return T(i.value)}async function T(j,N=0,is=!1){jn.value=!1;const ms=c.value!==j,pa=N!==n.value,G=Ya(j)?.meta,I=G?.slide?.frontmatter.clicksStart??0;N=vn(N,I,G?.__clicksContext?.total??Aa),(is||ms||pa)&&await l?.push({path:ta(j,t.value,l.currentRoute.value.name==="export"),query:{...l.currentRoute.value.query,clicks:N===0?void 0:N.toString(),embedded:location.search.includes("embedded")?"true":void 0}})}function A(){l?.push({path:ta(c.value,!0),query:{...l.currentRoute.value.query}})}function V(){l?.push({path:ta(c.value,!1),query:{...l.currentRoute.value.query}})}return{slides:ts,total:i,currentPath:m,currentSlideNo:c,currentPage:c,currentSlideRoute:a,currentLayout:u,currentTransition:x,clicksDirection:o,nextRoute:g,prevRoute:f,clicksContext:s,clicks:h,clicksStart:p,clicksTotal:d,hasNext:y,hasPrev:w,tocTree:b,navDirection:r,openInEditor:k,next:F,prev:C,go:T,goLast:Y,goFirst:os,nextSlide:H,prevSlide:U,enterPresenter:A,exitPresenter:V}}const eo=me(()=>{const a=Ga(),s=dl(),n=v(()=>(a?.currentRoute?.value?.query,new URLSearchParams(location.search))),t=v(()=>n.value.has("print")||s.name==="export"),e=E(n.value.get("print")==="clicks"),l=v(()=>n.value.has("embedded")),i=v(()=>s.name==="play"),r=v(()=>s.name==="presenter"),o=v(()=>s.name==="notes"),m=v(()=>!r.value&&(!R.remote||n.value.get("password")===R.remote)),c=v(()=>!!s.params.no),u=v(()=>c.value?Ya(s.params.no)?.no??1:1),h=v(()=>ts.value[u.value-1]),p=E(xe(ts.value.length,s?.query?.range)),d=qr("clicks","0"),g=v(()=>y(h.value)),f=v({get(){let w=+(d.value||0);return Number.isNaN(w)&&(w=0),w},set(w){jn.value=!1,d.value=w.toString()}});function y(w){if(w?.meta?.__clicksContext)return w.meta.__clicksContext;const x=w.no,k=we(v({get(){return u.value===x?Math.max(+(d.value??0),k.clicksStart):u.value>x?Aa:k.clicksStart},set(b){u.value===x&&(d.value=b.toString())}}),w?.meta.slide?.frontmatter.clicksStart??0,w?.meta.clicks);return w?.meta&&(w.meta.__clicksContext=k),k}return{router:a,currentRoute:v(()=>s),isPrintMode:t,isPrintWithClicks:e,isEmbedded:l,isPlaying:i,isPresenter:r,isNotesViewer:o,isPresenterAvailable:m,hasPrimarySlide:c,currentSlideNo:u,currentSlideRoute:h,clicksContext:g,queryClicksRaw:d,queryClicks:f,printRange:p,getPrimaryClicks:y}}),ma=me(()=>{const a=eo(),s=Ga(),n=to(a.currentSlideRoute,a.clicksContext,a.queryClicks,a.isPresenter,a.isPrintMode,s);return ss([n.total,a.currentRoute],async()=>{const t=a.currentRoute.value.params.no;a.hasPrimarySlide.value&&!Ya(t)&&(t&&t!=="index.html"?await n.go(n.total.value,0,!0):await n.go(1,0,!0))},{flush:"pre",immediate:!0}),{...n,...a}}),qt=fl(),cn=q("slidev-color-schema","auto"),Wt=v(()=>R.colorSchema!=="auto"),Le=v({get(){return Wt.value?R.colorSchema==="dark":cn.value==="auto"?qt.value:cn.value==="dark"},set(a){Wt.value||(cn.value=a===qt.value?"auto":a?"dark":"light")}}),fp=oe(Le);if(Qa){const a="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";ss(Le,s=>{const n=window.document.createElement("style");n.appendChild(document.createTextNode(a)),window.document.head.appendChild(n);const t=document.querySelector("html");t.classList.toggle("dark",s),t.classList.toggle("light",!s),window.getComputedStyle(n).opacity,document.head.removeChild(n)},{immediate:!0})}function lo(){const{isPrintMode:a}=ma();yl(v(()=>a.value?`
@page {
  size: ${he.value}px ${Nl.value}px;
  margin: 0px;
}

* {
  transition: none !important;
  transition-duration: 0s !important;
}`:""))}const zn=Symbol.for("yaml.alias"),io=Symbol.for("yaml.document"),Zs=Symbol.for("yaml.map"),Se=Symbol.for("yaml.pair"),Hn=Symbol.for("yaml.scalar"),va=Symbol.for("yaml.seq"),ls=Symbol.for("yaml.node.type"),Ys=a=>!!a&&typeof a=="object"&&a[ls]===zn,Xa=a=>!!a&&typeof a=="object"&&a[ls]===io,Oe=a=>!!a&&typeof a=="object"&&a[ls]===Zs,B=a=>!!a&&typeof a=="object"&&a[ls]===Se,z=a=>!!a&&typeof a=="object"&&a[ls]===Hn,Vn=a=>!!a&&typeof a=="object"&&a[ls]===va;function Z(a){if(a&&typeof a=="object")switch(a[ls]){case Zs:case va:return!0}return!1}function W(a){if(a&&typeof a=="object")switch(a[ls]){case zn:case Zs:case Hn:case va:return!0}return!1}const Pe=a=>(z(a)||Z(a))&&!!a.anchor,Ks=Symbol("break visit"),ro=Symbol("skip children"),ya=Symbol("remove node");function sn(a,s){const n=oo(s);Xa(a)?ea(null,a.contents,n,Object.freeze([a]))===ya&&(a.contents=null):ea(null,a,n,Object.freeze([]))}sn.BREAK=Ks;sn.SKIP=ro;sn.REMOVE=ya;function ea(a,s,n,t){const e=mo(a,s,n,t);if(W(e)||B(e))return po(a,t,e),ea(a,e,n,t);if(typeof e!="symbol"){if(Z(s)){t=Object.freeze(t.concat(s));for(let l=0;l<s.items.length;++l){const i=ea(l,s.items[l],n,t);if(typeof i=="number")l=i-1;else{if(i===Ks)return Ks;i===ya&&(s.items.splice(l,1),l-=1)}}}else if(B(s)){t=Object.freeze(t.concat(s));const l=ea("key",s.key,n,t);if(l===Ks)return Ks;l===ya&&(s.key=null);const i=ea("value",s.value,n,t);if(i===Ks)return Ks;i===ya&&(s.value=null)}}return e}function oo(a){return typeof a=="object"&&(a.Collection||a.Node||a.Value)?Object.assign({Alias:a.Node,Map:a.Node,Scalar:a.Node,Seq:a.Node},a.Value&&{Map:a.Value,Scalar:a.Value,Seq:a.Value},a.Collection&&{Map:a.Collection,Seq:a.Collection},a):a}function mo(a,s,n,t){if(typeof n=="function")return n(a,s,t);if(Oe(s))return n.Map?.(a,s,t);if(Vn(s))return n.Seq?.(a,s,t);if(B(s))return n.Pair?.(a,s,t);if(z(s))return n.Scalar?.(a,s,t);if(Ys(s))return n.Alias?.(a,s,t)}function po(a,s,n){const t=s[s.length-1];if(Z(t))t.items[a]=n;else if(B(t))a==="key"?t.key=n:t.value=n;else if(Xa(t))t.contents=n;else{const e=Ys(t)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}}function $e(a){if(/[\x00-\x19\s,[\]{}]/.test(a)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(a)}`;throw new Error(n)}return!0}function fa(a,s,n,t){if(t&&typeof t=="object")if(Array.isArray(t))for(let e=0,l=t.length;e<l;++e){const i=t[e],r=fa(a,t,String(e),i);r===void 0?delete t[e]:r!==i&&(t[e]=r)}else if(t instanceof Map)for(const e of Array.from(t.keys())){const l=t.get(e),i=fa(a,t,e,l);i===void 0?t.delete(e):i!==l&&t.set(e,i)}else if(t instanceof Set)for(const e of Array.from(t)){const l=fa(a,t,e,e);l===void 0?t.delete(e):l!==e&&(t.delete(e),t.add(l))}else for(const[e,l]of Object.entries(t)){const i=fa(a,t,e,l);i===void 0?delete t[e]:i!==l&&(t[e]=i)}return a.call(s,n,t)}function es(a,s,n){if(Array.isArray(a))return a.map((t,e)=>es(t,String(e),n));if(a&&typeof a.toJSON=="function"){if(!n||!Pe(a))return a.toJSON(s,n);const t={aliasCount:0,count:1,res:void 0};n.anchors.set(a,t),n.onCreate=l=>{t.res=l,delete n.onCreate};const e=a.toJSON(s,n);return n.onCreate&&n.onCreate(e),e}return typeof a=="bigint"&&!n?.keep?Number(a):a}class Bn{constructor(s){Object.defineProperty(this,ls,{value:s})}clone(){const s=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(s.range=this.range.slice()),s}toJS(s,{mapAsMap:n,maxAliasCount:t,onAnchor:e,reviver:l}={}){if(!Xa(s))throw new TypeError("A document argument is required");const i={anchors:new Map,doc:s,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof t=="number"?t:100},r=es(this,"",i);if(typeof e=="function")for(const{count:o,res:m}of i.anchors.values())e(m,o);return typeof l=="function"?fa(l,{"":r},"",r):r}}class co extends Bn{constructor(s){super(zn),this.source=s,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(s,n){let t;n?.aliasResolveCache?t=n.aliasResolveCache:(t=[],sn(s,{Node:(l,i)=>{(Ys(i)||Pe(i))&&t.push(i)}}),n&&(n.aliasResolveCache=t));let e;for(const l of t){if(l===this)break;l.anchor===this.source&&(e=l)}return e}toJSON(s,n){if(!n)return{source:this.source};const{anchors:t,doc:e,maxAliasCount:l}=n,i=this.resolve(e,n);if(!i){const o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(o)}let r=t.get(i);if(r||(es(i,null,n),r=t.get(i)),r?.res===void 0){const o="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(o)}if(l>=0&&(r.count+=1,r.aliasCount===0&&(r.aliasCount=Ca(e,i,t)),r.count*r.aliasCount>l)){const o="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(o)}return r.res}toString(s,n,t){const e=`*${this.source}`;if(s){if($e(this.source),s.options.verifyAliasOrder&&!s.anchors.has(this.source)){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(l)}if(s.implicitKey)return`${e} `}return e}}function Ca(a,s,n){if(Ys(s)){const t=s.resolve(a),e=n&&t&&n.get(t);return e?e.count*e.aliasCount:0}else if(Z(s)){let t=0;for(const e of s.items){const l=Ca(a,e,n);l>t&&(t=l)}return t}else if(B(s)){const t=Ca(a,s.key,n),e=Ca(a,s.value,n);return Math.max(t,e)}return 1}const Te=a=>!a||typeof a!="function"&&typeof a!="object";class D extends Bn{constructor(s){super(Hn),this.value=s}toJSON(s,n){return n?.keep?this.value:es(this.value,s,n)}toString(){return String(this.value)}}D.BLOCK_FOLDED="BLOCK_FOLDED";D.BLOCK_LITERAL="BLOCK_LITERAL";D.PLAIN="PLAIN";D.QUOTE_DOUBLE="QUOTE_DOUBLE";D.QUOTE_SINGLE="QUOTE_SINGLE";function ho(a,s,n){return n.find(t=>t.identify?.(a)&&!t.format)}function Ba(a,s,n){if(Xa(a)&&(a=a.contents),W(a))return a;if(B(a)){const u=n.schema[Zs].createNode?.(n.schema,null,n);return u.items.push(a),u}(a instanceof String||a instanceof Number||a instanceof Boolean||typeof BigInt<"u"&&a instanceof BigInt)&&(a=a.valueOf());const{aliasDuplicateObjects:t,onAnchor:e,onTagObj:l,schema:i,sourceObjects:r}=n;let o;if(t&&a&&typeof a=="object"){if(o=r.get(a),o)return o.anchor??(o.anchor=e(a)),new co(o.anchor);o={anchor:null,node:null},r.set(a,o)}let m=ho(a,s,i.tags);if(!m){if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),!a||typeof a!="object"){const u=new D(a);return o&&(o.node=u),u}m=a instanceof Map?i[Zs]:Symbol.iterator in Object(a)?i[va]:i[Zs]}l&&(l(m),delete n.onTagObj);const c=m?.createNode?m.createNode(n.schema,a,n):typeof m?.nodeClass?.from=="function"?m.nodeClass.from(n.schema,a,n):new D(a);return m.default||(c.tag=m.tag),o&&(o.node=c),c}function Ut(a,s,n){let t=n;for(let e=s.length-1;e>=0;--e){const l=s[e];if(typeof l=="number"&&Number.isInteger(l)&&l>=0){const i=[];i[l]=t,t=i}else t=new Map([[l,t]])}return Ba(t,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:a,sourceObjects:new Map})}const uo=a=>a==null||typeof a=="object"&&!!a[Symbol.iterator]().next().done;class Ee extends Bn{constructor(s,n){super(s),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(s){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return s&&(n.schema=s),n.items=n.items.map(t=>W(t)||B(t)?t.clone(s):t),this.range&&(n.range=this.range.slice()),n}addIn(s,n){if(uo(s))this.add(n);else{const[t,...e]=s,l=this.get(t,!0);if(Z(l))l.addIn(e,n);else if(l===void 0&&this.schema)this.set(t,Ut(this.schema,e,n));else throw new Error(`Expected YAML collection at ${t}. Remaining path: ${e}`)}}deleteIn(s){const[n,...t]=s;if(t.length===0)return this.delete(n);const e=this.get(n,!0);if(Z(e))return e.deleteIn(t);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${t}`)}getIn(s,n){const[t,...e]=s,l=this.get(t,!0);return e.length===0?!n&&z(l)?l.value:l:Z(l)?l.getIn(e,n):void 0}hasAllNullValues(s){return this.items.every(n=>{if(!B(n))return!1;const t=n.value;return t==null||s&&z(t)&&t.value==null&&!t.commentBefore&&!t.comment&&!t.tag})}hasIn(s){const[n,...t]=s;if(t.length===0)return this.has(n);const e=this.get(n,!0);return Z(e)?e.hasIn(t):!1}setIn(s,n){const[t,...e]=s;if(e.length===0)this.set(t,n);else{const l=this.get(t,!0);if(Z(l))l.setIn(e,n);else if(l===void 0&&this.schema)this.set(t,Ut(this.schema,e,n));else throw new Error(`Expected YAML collection at ${t}. Remaining path: ${e}`)}}}const go=a=>a.replace(/^(?!$)(?: $)?/gm,"#");function ka(a,s){return/^\n+$/.test(a)?a.substring(1):s?a.replace(/^(?! *$)/gm,s):a}const la=(a,s,n)=>a.endsWith(`
`)?ka(n,s):n.includes(`
`)?`
`+ka(n,s):(a.endsWith(" ")?"":" ")+n,Fe="flow",Sn="block",Na="quoted";function an(a,s,n="flow",{indentAtStart:t,lineWidth:e=80,minContentWidth:l=20,onFold:i,onOverflow:r}={}){if(!e||e<0)return a;e<l&&(l=0);const o=Math.max(1+l,1+e-s.length);if(a.length<=o)return a;const m=[],c={};let u=e-s.length;typeof t=="number"&&(t>e-Math.max(2,l)?m.push(0):u=e-t);let h,p,d=!1,g=-1,f=-1,y=-1;n===Sn&&(g=Jt(a,g,s.length),g!==-1&&(u=g+o));for(let x;x=a[g+=1];){if(n===Na&&x==="\\"){switch(f=g,a[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}y=g}if(x===`
`)n===Sn&&(g=Jt(a,g,s.length)),u=g+s.length+o,h=void 0;else{if(x===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){const k=a[g+1];k&&k!==" "&&k!==`
`&&k!=="	"&&(h=g)}if(g>=u)if(h)m.push(h),u=h+o,h=void 0;else if(n===Na){for(;p===" "||p==="	";)p=x,x=a[g+=1],d=!0;const k=g>y+1?g-2:f-1;if(c[k])return a;m.push(k),c[k]=!0,u=k+o,h=void 0}else d=!0}p=x}if(d&&r&&r(),m.length===0)return a;i&&i();let w=a.slice(0,m[0]);for(let x=0;x<m.length;++x){const k=m[x],b=m[x+1]||a.length;k===0?w=`
${s}${a.slice(0,b)}`:(n===Na&&c[k]&&(w+=`${a[k]}\\`),w+=`
${s}${a.slice(k+1,b)}`)}return w}function Jt(a,s,n){let t=s,e=s+1,l=a[e];for(;l===" "||l==="	";)if(s<e+n)l=a[++s];else{do l=a[++s];while(l&&l!==`
`);t=s,e=s+1,l=a[e]}return t}const nn=(a,s)=>({indentAtStart:s?a.indent.length:a.indentAtStart,lineWidth:a.options.lineWidth,minContentWidth:a.options.minContentWidth}),tn=a=>/^(%|---|\.\.\.)/m.test(a);function fo(a,s,n){if(!s||s<0)return!1;const t=s-n,e=a.length;if(e<=t)return!1;for(let l=0,i=0;l<e;++l)if(a[l]===`
`){if(l-i>t)return!0;if(i=l+1,e-i<=t)return!1}return!0}function wa(a,s){const n=JSON.stringify(a);if(s.options.doubleQuotedAsJSON)return n;const{implicitKey:t}=s,e=s.options.doubleQuotedMinMultiLineLength,l=s.indent||(tn(a)?"  ":"");let i="",r=0;for(let o=0,m=n[o];m;m=n[++o])if(m===" "&&n[o+1]==="\\"&&n[o+2]==="n"&&(i+=n.slice(r,o)+"\\ ",o+=1,r=o,m="\\"),m==="\\")switch(n[o+1]){case"u":{i+=n.slice(r,o);const c=n.substr(o+2,4);switch(c){case"0000":i+="\\0";break;case"0007":i+="\\a";break;case"000b":i+="\\v";break;case"001b":i+="\\e";break;case"0085":i+="\\N";break;case"00a0":i+="\\_";break;case"2028":i+="\\L";break;case"2029":i+="\\P";break;default:c.substr(0,2)==="00"?i+="\\x"+c.substr(2):i+=n.substr(o,6)}o+=5,r=o+1}break;case"n":if(t||n[o+2]==='"'||n.length<e)o+=1;else{for(i+=n.slice(r,o)+`

`;n[o+2]==="\\"&&n[o+3]==="n"&&n[o+4]!=='"';)i+=`
`,o+=2;i+=l,n[o+2]===" "&&(i+="\\"),o+=1,r=o+1}break;default:o+=1}return i=r?i+n.slice(r):n,t?i:an(i,l,Na,nn(s,!1))}function On(a,s){if(s.options.singleQuote===!1||s.implicitKey&&a.includes(`
`)||/[ \t]\n|\n[ \t]/.test(a))return wa(a,s);const n=s.indent||(tn(a)?"  ":""),t="'"+a.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return s.implicitKey?t:an(t,n,Fe,nn(s,!1))}function ia(a,s){const{singleQuote:n}=s.options;let t;if(n===!1)t=wa;else{const e=a.includes('"'),l=a.includes("'");e&&!l?t=On:l&&!e?t=wa:t=n?On:wa}return t(a,s)}let Pn;try{Pn=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Pn=/\n+(?!\n|$)/g}function Da({comment:a,type:s,value:n},t,e,l){const{blockQuote:i,commentString:r,lineWidth:o}=t.options;if(!i||/\n[\t ]+$/.test(n))return ia(n,t);const m=t.indent||(t.forceBlockIndent||tn(n)?"  ":""),c=i==="literal"?!0:i==="folded"||s===D.BLOCK_FOLDED?!1:s===D.BLOCK_LITERAL?!0:!fo(n,o,m.length);if(!n)return c?`|
`:`>
`;let u,h;for(h=n.length;h>0;--h){const b=n[h-1];if(b!==`
`&&b!=="	"&&b!==" ")break}let p=n.substring(h);const d=p.indexOf(`
`);d===-1?u="-":n===p||d!==p.length-1?(u="+",l&&l()):u="",p&&(n=n.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(Pn,`$&${m}`));let g=!1,f,y=-1;for(f=0;f<n.length;++f){const b=n[f];if(b===" ")g=!0;else if(b===`
`)y=f;else break}let w=n.substring(0,y<f?y+1:f);w&&(n=n.substring(w.length),w=w.replace(/\n+/g,`$&${m}`));let k=(g?m?"2":"1":"")+u;if(a&&(k+=" "+r(a.replace(/ ?[\r\n]+/g," ")),e&&e()),!c){const b=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${m}`);let F=!1;const C=nn(t,!0);i!=="folded"&&s!==D.BLOCK_FOLDED&&(C.onOverflow=()=>{F=!0});const H=an(`${w}${b}${p}`,m,Sn,C);if(!F)return`>${k}
${m}${H}`}return n=n.replace(/\n+/g,`$&${m}`),`|${k}
${m}${w}${n}${p}`}function yo(a,s,n,t){const{type:e,value:l}=a,{actualString:i,implicitKey:r,indent:o,indentStep:m,inFlow:c}=s;if(r&&l.includes(`
`)||c&&/[[\]{},]/.test(l))return ia(l,s);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(l))return r||c||!l.includes(`
`)?ia(l,s):Da(a,s,n,t);if(!r&&!c&&e!==D.PLAIN&&l.includes(`
`))return Da(a,s,n,t);if(tn(l)){if(o==="")return s.forceBlockIndent=!0,Da(a,s,n,t);if(r&&o===m)return ia(l,s)}const u=l.replace(/\n+/g,`$&
${o}`);if(i){const h=g=>g.default&&g.tag!=="tag:yaml.org,2002:str"&&g.test?.test(u),{compat:p,tags:d}=s.doc.schema;if(d.some(h)||p?.some(h))return ia(l,s)}return r?u:an(u,o,Fe,nn(s,!1))}function wo(a,s,n,t){const{implicitKey:e,inFlow:l}=s,i=typeof a.value=="string"?a:Object.assign({},a,{value:String(a.value)});let{type:r}=a;r!==D.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(i.value)&&(r=D.QUOTE_DOUBLE);const o=c=>{switch(c){case D.BLOCK_FOLDED:case D.BLOCK_LITERAL:return e||l?ia(i.value,s):Da(i,s,n,t);case D.QUOTE_DOUBLE:return wa(i.value,s);case D.QUOTE_SINGLE:return On(i.value,s);case D.PLAIN:return yo(i,s,n,t);default:return null}};let m=o(r);if(m===null){const{defaultKeyType:c,defaultStringType:u}=s.options,h=e&&c||u;if(m=o(h),m===null)throw new Error(`Unsupported default string type ${h}`)}return m}function xo(a,s){const n=Object.assign({blockQuote:!0,commentString:go,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},a.schema.toStringOptions,s);let t;switch(n.collectionStyle){case"block":t=!1;break;case"flow":t=!0;break;default:t=null}return{anchors:new Set,doc:a,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:t,options:n}}function ko(a,s){if(s.tag){const e=a.filter(l=>l.tag===s.tag);if(e.length>0)return e.find(l=>l.format===s.format)??e[0]}let n,t;if(z(s)){t=s.value;let e=a.filter(l=>l.identify?.(t));if(e.length>1){const l=e.filter(i=>i.test);l.length>0&&(e=l)}n=e.find(l=>l.format===s.format)??e.find(l=>!l.format)}else t=s,n=a.find(e=>e.nodeClass&&t instanceof e.nodeClass);if(!n){const e=t?.constructor?.name??(t===null?"null":typeof t);throw new Error(`Tag not resolved for ${e} value`)}return n}function vo(a,s,{anchors:n,doc:t}){if(!t.directives)return"";const e=[],l=(z(a)||Z(a))&&a.anchor;l&&$e(l)&&(n.add(l),e.push(`&${l}`));const i=a.tag??(s.default?null:s.tag);return i&&e.push(t.directives.tagString(i)),e.join(" ")}function qa(a,s,n,t){if(B(a))return a.toString(s,n,t);if(Ys(a)){if(s.doc.directives)return a.toString(s);if(s.resolvedAliases?.has(a))throw new TypeError("Cannot stringify circular structure without alias nodes");s.resolvedAliases?s.resolvedAliases.add(a):s.resolvedAliases=new Set([a]),a=a.resolve(s.doc)}let e;const l=W(a)?a:s.doc.createNode(a,{onTagObj:o=>e=o});e??(e=ko(s.doc.schema.tags,l));const i=vo(l,e,s);i.length>0&&(s.indentAtStart=(s.indentAtStart??0)+i.length+1);const r=typeof e.stringify=="function"?e.stringify(l,s,n,t):z(l)?wo(l,s,n,t):l.toString(s,n,t);return i?z(l)||r[0]==="{"||r[0]==="["?`${i} ${r}`:`${i}
${s.indent}${r}`:r}function bo({key:a,value:s},n,t,e){const{allNullValues:l,doc:i,indent:r,indentStep:o,options:{commentString:m,indentSeq:c,simpleKeys:u}}=n;let h=W(a)&&a.comment||null;if(u){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(Z(a)||!W(a)&&typeof a=="object"){const C="With simple keys, collection cannot be used as a key value";throw new Error(C)}}let p=!u&&(!a||h&&s==null&&!n.inFlow||Z(a)||(z(a)?a.type===D.BLOCK_FOLDED||a.type===D.BLOCK_LITERAL:typeof a=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!p&&(u||!l),indent:r+o});let d=!1,g=!1,f=qa(a,n,()=>d=!0,()=>g=!0);if(!p&&!n.inFlow&&f.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(n.inFlow){if(l||s==null)return d&&t&&t(),f===""?"?":p?`? ${f}`:f}else if(l&&!u||s==null&&p)return f=`? ${f}`,h&&!d?f+=la(f,n.indent,m(h)):g&&e&&e(),f;d&&(h=null),p?(h&&(f+=la(f,n.indent,m(h))),f=`? ${f}
${r}:`):(f=`${f}:`,h&&(f+=la(f,n.indent,m(h))));let y,w,x;W(s)?(y=!!s.spaceBefore,w=s.commentBefore,x=s.comment):(y=!1,w=null,x=null,s&&typeof s=="object"&&(s=i.createNode(s))),n.implicitKey=!1,!p&&!h&&z(s)&&(n.indentAtStart=f.length+1),g=!1,!c&&o.length>=2&&!n.inFlow&&!p&&Vn(s)&&!s.flow&&!s.tag&&!s.anchor&&(n.indent=n.indent.substring(2));let k=!1;const b=qa(s,n,()=>k=!0,()=>g=!0);let F=" ";if(h||y||w){if(F=y?`
`:"",w){const C=m(w);F+=`
${ka(C,n.indent)}`}b===""&&!n.inFlow?F===`
`&&x&&(F=`

`):F+=`
${n.indent}`}else if(!p&&Z(s)){const C=b[0],H=b.indexOf(`
`),U=H!==-1,os=n.inFlow??s.flow??s.items.length===0;if(U||!os){let Y=!1;if(U&&(C==="&"||C==="!")){let T=b.indexOf(" ");C==="&"&&T!==-1&&T<H&&b[T+1]==="!"&&(T=b.indexOf(" ",T+1)),(T===-1||H<T)&&(Y=!0)}Y||(F=`
${n.indent}`)}}else(b===""||b[0]===`
`)&&(F="");return f+=F+b,n.inFlow?k&&t&&t():x&&!k?f+=la(f,n.indent,m(x)):g&&e&&e(),f}function Mo(a,s){(a==="debug"||a==="warn")&&console.warn(s)}const Oa="<<",hn={identify:a=>a===Oa||typeof a=="symbol"&&a.description===Oa,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new D(Symbol(Oa)),{addToJSMap:Ae}),stringify:()=>Oa},_o=(a,s)=>(hn.identify(s)||z(s)&&(!s.type||s.type===D.PLAIN)&&hn.identify(s.value))&&a?.doc.schema.tags.some(n=>n.tag===hn.tag&&n.default);function Ae(a,s,n){if(n=a&&Ys(n)?n.resolve(a.doc):n,Vn(n))for(const t of n.items)un(a,s,t);else if(Array.isArray(n))for(const t of n)un(a,s,t);else un(a,s,n)}function un(a,s,n){const t=a&&Ys(n)?n.resolve(a.doc):n;if(!Oe(t))throw new Error("Merge sources must be maps or map aliases");const e=t.toJSON(null,a,Map);for(const[l,i]of e)s instanceof Map?s.has(l)||s.set(l,i):s instanceof Set?s.add(l):Object.prototype.hasOwnProperty.call(s,l)||Object.defineProperty(s,l,{value:i,writable:!0,enumerable:!0,configurable:!0});return s}function Ce(a,s,{key:n,value:t}){if(W(n)&&n.addToJSMap)n.addToJSMap(a,s,t);else if(_o(a,n))Ae(a,s,t);else{const e=es(n,"",a);if(s instanceof Map)s.set(e,es(t,e,a));else if(s instanceof Set)s.add(e);else{const l=Lo(n,e,a),i=es(t,l,a);l in s?Object.defineProperty(s,l,{value:i,writable:!0,enumerable:!0,configurable:!0}):s[l]=i}}return s}function Lo(a,s,n){if(s===null)return"";if(typeof s!="object")return String(s);if(W(a)&&n?.doc){const t=xo(n.doc,{});t.anchors=new Set;for(const l of n.anchors.keys())t.anchors.add(l.anchor);t.inFlow=!0,t.inStringifyKey=!0;const e=a.toString(t);if(!n.mapKeyWarned){let l=JSON.stringify(e);l.length>40&&(l=l.substring(0,36)+'..."'),Mo(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${l}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return e}return JSON.stringify(s)}function qn(a,s,n){const t=Ba(a,void 0,n),e=Ba(s,void 0,n);return new rs(t,e)}class rs{constructor(s,n=null){Object.defineProperty(this,ls,{value:Se}),this.key=s,this.value=n}clone(s){let{key:n,value:t}=this;return W(n)&&(n=n.clone(s)),W(t)&&(t=t.clone(s)),new rs(n,t)}toJSON(s,n){const t=n?.mapAsMap?new Map:{};return Ce(n,t,this)}toString(s,n,t){return s?.doc?bo(this,s,n,t):JSON.stringify(this)}}function Ne(a,s,n){return(s.inFlow??a.flow?Oo:So)(a,s,n)}function So({comment:a,items:s},n,{blockItemPrefix:t,flowChars:e,itemIndent:l,onChompKeep:i,onComment:r}){const{indent:o,options:{commentString:m}}=n,c=Object.assign({},n,{indent:l,type:null});let u=!1;const h=[];for(let d=0;d<s.length;++d){const g=s[d];let f=null;if(W(g))!u&&g.spaceBefore&&h.push(""),Wa(n,h,g.commentBefore,u),g.comment&&(f=g.comment);else if(B(g)){const w=W(g.key)?g.key:null;w&&(!u&&w.spaceBefore&&h.push(""),Wa(n,h,w.commentBefore,u))}u=!1;let y=qa(g,c,()=>f=null,()=>u=!0);f&&(y+=la(y,l,m(f))),u&&f&&(u=!1),h.push(t+y)}let p;if(h.length===0)p=e.start+e.end;else{p=h[0];for(let d=1;d<h.length;++d){const g=h[d];p+=g?`
${o}${g}`:`
`}}return a?(p+=`
`+ka(m(a),o),r&&r()):u&&i&&i(),p}function Oo({items:a},s,{flowChars:n,itemIndent:t}){const{indent:e,indentStep:l,flowCollectionPadding:i,options:{commentString:r}}=s;t+=l;const o=Object.assign({},s,{indent:t,inFlow:!0,type:null});let m=!1,c=0;const u=[];for(let d=0;d<a.length;++d){const g=a[d];let f=null;if(W(g))g.spaceBefore&&u.push(""),Wa(s,u,g.commentBefore,!1),g.comment&&(f=g.comment);else if(B(g)){const w=W(g.key)?g.key:null;w&&(w.spaceBefore&&u.push(""),Wa(s,u,w.commentBefore,!1),w.comment&&(m=!0));const x=W(g.value)?g.value:null;x?(x.comment&&(f=x.comment),x.commentBefore&&(m=!0)):g.value==null&&w?.comment&&(f=w.comment)}f&&(m=!0);let y=qa(g,o,()=>f=null);d<a.length-1&&(y+=","),f&&(y+=la(y,t,r(f))),!m&&(u.length>c||y.includes(`
`))&&(m=!0),u.push(y),c=u.length}const{start:h,end:p}=n;if(u.length===0)return h+p;if(!m){const d=u.reduce((g,f)=>g+f.length+2,2);m=s.options.lineWidth>0&&d>s.options.lineWidth}if(m){let d=h;for(const g of u)d+=g?`
${l}${e}${g}`:`
`;return`${d}
${e}${p}`}else return`${h}${i}${u.join(" ")}${i}${p}`}function Wa({indent:a,options:{commentString:s}},n,t,e){if(t&&e&&(t=t.replace(/^\n+/,"")),t){const l=ka(s(t),a);n.push(l.trimStart())}}function Qs(a,s){const n=z(s)?s.value:s;for(const t of a)if(B(t)&&(t.key===s||t.key===n||z(t.key)&&t.key.value===n))return t}class aa extends Ee{static get tagName(){return"tag:yaml.org,2002:map"}constructor(s){super(Zs,s),this.items=[]}static from(s,n,t){const{keepUndefined:e,replacer:l}=t,i=new this(s),r=(o,m)=>{if(typeof l=="function")m=l.call(n,o,m);else if(Array.isArray(l)&&!l.includes(o))return;(m!==void 0||e)&&i.items.push(qn(o,m,t))};if(n instanceof Map)for(const[o,m]of n)r(o,m);else if(n&&typeof n=="object")for(const o of Object.keys(n))r(o,n[o]);return typeof s.sortMapEntries=="function"&&i.items.sort(s.sortMapEntries),i}add(s,n){let t;B(s)?t=s:!s||typeof s!="object"||!("key"in s)?t=new rs(s,s?.value):t=new rs(s.key,s.value);const e=Qs(this.items,t.key),l=this.schema?.sortMapEntries;if(e){if(!n)throw new Error(`Key ${t.key} already set`);z(e.value)&&Te(t.value)?e.value.value=t.value:e.value=t.value}else if(l){const i=this.items.findIndex(r=>l(t,r)<0);i===-1?this.items.push(t):this.items.splice(i,0,t)}else this.items.push(t)}delete(s){const n=Qs(this.items,s);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(s,n){const e=Qs(this.items,s)?.value;return(!n&&z(e)?e.value:e)??void 0}has(s){return!!Qs(this.items,s)}set(s,n){this.add(new rs(s,n),!0)}toJSON(s,n,t){const e=t?new t:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(e);for(const l of this.items)Ce(n,e,l);return e}toString(s,n,t){if(!s)return JSON.stringify(this);for(const e of this.items)if(!B(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!s.allNullValues&&this.hasAllNullValues(!1)&&(s=Object.assign({},s,{allNullValues:!0})),Ne(this,s,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:s.indent||"",onChompKeep:t,onComment:n})}}class De extends Ee{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(s){super(va,s),this.items=[]}add(s){this.items.push(s)}delete(s){const n=Pa(s);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(s,n){const t=Pa(s);if(typeof t!="number")return;const e=this.items[t];return!n&&z(e)?e.value:e}has(s){const n=Pa(s);return typeof n=="number"&&n<this.items.length}set(s,n){const t=Pa(s);if(typeof t!="number")throw new Error(`Expected a valid index, not ${s}.`);const e=this.items[t];z(e)&&Te(n)?e.value=n:this.items[t]=n}toJSON(s,n){const t=[];n?.onCreate&&n.onCreate(t);let e=0;for(const l of this.items)t.push(es(l,String(e++),n));return t}toString(s,n,t){return s?Ne(this,s,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(s.indent||"")+"  ",onChompKeep:t,onComment:n}):JSON.stringify(this)}static from(s,n,t){const{replacer:e}=t,l=new this(s);if(n&&Symbol.iterator in Object(n)){let i=0;for(let r of n){if(typeof e=="function"){const o=n instanceof Set?r:String(i++);r=e.call(n,o,r)}l.items.push(Ba(r,void 0,t))}}return l}}function Pa(a){let s=z(a)?a.value:a;return s&&typeof s=="string"&&(s=Number(s)),typeof s=="number"&&Number.isInteger(s)&&s>=0?s:null}function Po(a,s,n){const{replacer:t}=n,e=new De(a);e.tag="tag:yaml.org,2002:pairs";let l=0;if(s&&Symbol.iterator in Object(s))for(let i of s){typeof t=="function"&&(i=t.call(s,String(l++),i));let r,o;if(Array.isArray(i))if(i.length===2)r=i[0],o=i[1];else throw new TypeError(`Expected [key, value] tuple: ${i}`);else if(i&&i instanceof Object){const m=Object.keys(i);if(m.length===1)r=m[0],o=i[r];else throw new TypeError(`Expected tuple with one key, not ${m.length} keys`)}else r=i;e.items.push(qn(r,o,n))}return e}class Wn extends De{constructor(){super(),this.add=aa.prototype.add.bind(this),this.delete=aa.prototype.delete.bind(this),this.get=aa.prototype.get.bind(this),this.has=aa.prototype.has.bind(this),this.set=aa.prototype.set.bind(this),this.tag=Wn.tag}toJSON(s,n){if(!n)return super.toJSON(s);const t=new Map;n?.onCreate&&n.onCreate(t);for(const e of this.items){let l,i;if(B(e)?(l=es(e.key,"",n),i=es(e.value,l,n)):l=es(e,"",n),t.has(l))throw new Error("Ordered maps must not include duplicate keys");t.set(l,i)}return t}static from(s,n,t){const e=Po(s,n,t),l=new this;return l.items=e.items,l}}Wn.tag="tag:yaml.org,2002:omap";class Un extends aa{constructor(s){super(s),this.tag=Un.tag}add(s){let n;B(s)?n=s:s&&typeof s=="object"&&"key"in s&&"value"in s&&s.value===null?n=new rs(s.key,null):n=new rs(s,null),Qs(this.items,n.key)||this.items.push(n)}get(s,n){const t=Qs(this.items,s);return!n&&B(t)?z(t.key)?t.key.value:t.key:t}set(s,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const t=Qs(this.items,s);t&&!n?this.items.splice(this.items.indexOf(t),1):!t&&n&&this.items.push(new rs(s))}toJSON(s,n){return super.toJSON(s,n,Set)}toString(s,n,t){if(!s)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},s,{allNullValues:!0}),n,t);throw new Error("Set items must all have null values")}static from(s,n,t){const{replacer:e}=t,l=new this(s);if(n&&Symbol.iterator in Object(n))for(let i of n)typeof e=="function"&&(i=e.call(n,i,i)),l.items.push(qn(i,null,t));return l}}Un.tag="tag:yaml.org,2002:set";new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);function Jn(a=5){const s=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=n.length;for(let e=0;e<a;e++)s.push(n.charAt(Math.floor(Math.random()*t)));return s.join("")}function yp(a,s,n,t){const e=xe(s+n-1,a);for(let l=0;l<s;l++){const i=t(l),r=e.includes(l+n);for(const o of i)o.classList.toggle("slidev-code-highlighted",r),o.classList.toggle("slidev-code-dishonored",!r),o.classList.toggle("highlighted",r),o.classList.toggle("dishonored",!r)}}function Re(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)}function as(a,s,n){Object.defineProperty(a,s,{value:n,writable:!0,enumerable:!1})}const ps=L({});let $o=[],To=[];as(ps,"$syncUp",!0);as(ps,"$syncDown",!0);as(ps,"$paused",!1);as(ps,"$onSet",a=>$o.push(a));as(ps,"$onPatch",a=>To.push(a));Re();as(ps,"$patch",async()=>!1);const Eo={channels:[],enabled:!0,init(a,s,n,t=!1){let e;if(!t)e=new BroadcastChannel(a),e.addEventListener("message",l=>s(l.data)),this.channels.push(e);else if(t){this.listener=function(i){i&&i.key===a&&i.newValue&&s(JSON.parse(i.newValue))},window.addEventListener("storage",this.listener);const l=window.localStorage.getItem(a);l&&s(JSON.parse(l))}return(l,i=!1)=>{this.enabled&&(!t&&e&&!i&&e.postMessage(pe(l)),t&&!i&&window.localStorage.setItem(a,JSON.stringify(l)))}},disable(){this.enabled=!1,this.channels.forEach(a=>a.close()),this.listener&&window.removeEventListener("storage",this.listener)}},Fo=L([Eo]),Ao=new Map,Kt=E({});function Ie(a,s,n=!1){const t=[];let e=!1,l=!1,i,r;const o=L(s);function m(p){t.push(p)}function c(p,d){o[p]!==d&&(clearTimeout(i),e=!0,o[p]=d,i=setTimeout(()=>e=!1,0))}function u(p){e||(clearTimeout(r),l=!0,Object.entries(p).forEach(([d,g])=>{o[d]=g}),r=setTimeout(()=>l=!1,0))}function h(p){Ao.set(p,{onUpdate:u,persist:n,state:o}),Kt.value[p]=Fo.map(g=>g.init(p,u,o,n)).filter(g=>!!g);function d(){Kt.value[p].forEach(g=>g?.(pe(o),l)),e||t.forEach(g=>g(o))}ss(o,d,{deep:!0})}return{init:h,onPatch:m,onUpdate:u,patch:c,state:o}}const{init:Co,onPatch:wp,patch:xp,state:kp}=Ie(ps,ps,!1),Xs=L({page:0,clicks:0,timer:{status:"stopped",slides:{},startedAt:0,pausedAt:0}});let No=[],Do=[];as(Xs,"$syncUp",!0);as(Xs,"$syncDown",!0);as(Xs,"$paused",!1);as(Xs,"$onSet",a=>No.push(a));as(Xs,"$onPatch",a=>Do.push(a));Re();as(Xs,"$patch",async()=>!1);const{init:Ro,onPatch:Io,patch:$a,state:vp}=Ie(Xs,{page:1,clicks:0,clicksTotal:0,timer:{status:"stopped",slides:{},startedAt:0,pausedAt:0}});function jo(){const a=le().appContext.app,s=L({nav:ma(),configs:R,themeConfigs:v(()=>R.themeConfig)});a.provide(In,E("none")),a.provide(jr,s),a.provide(Rn,v(()=>s.nav.currentSlideNo)),a.provide(Za,Dn(pi()));for(const h of Rl)h();const{clicksContext:n,currentSlideNo:t,hasPrimarySlide:e,isNotesViewer:l,isPresenter:i,isPrintMode:r}=ma();ri({title:ln,htmlAttrs:R.htmlAttrs}),lo(),Ro(`${ln} - shared`),Co(`${ln} - drawings`);const o=`${location.origin}_${Jn()}`,m=v(()=>i.value?"presenter":"viewer");function c(){(i.value?Sa.value.presenterSend:Sa.value.viewerSend)&&(l.value||r.value||!i.value&&!Vr.includes(location.host.split(":")[0])||($a("page",+t.value),$a("clicks",n.value.current),$a("clicksTotal",n.value.total),$a("lastUpdate",{id:o,type:m.value,time:new Date().getTime()})))}const u=Ga();u.afterEach(c),ss(n,c),Io(h=>{(i.value?Sa.value.presenterReceive:Sa.value.viewerReceive)&&(!e.value||r.value||h.lastUpdate?.type!==m.value&&(+h.page==+t.value&&+n.value.current==+h.clicks||(jn.value=!1,u.replace({path:ta(h.page,i.value),query:{...u.currentRoute.value.query,clicks:h.clicks||0}}))))})}const zo=re({__name:"App",setup(a){return jo(),ra(()=>{for(const[s,n]of Object.entries(Dl.value))document.body.style.setProperty(s,n.toString())}),(s,n)=>{const t=xl("RouterView");return ja(),wl(t)}}});function Ho(a){return a}const Vo=Ho,Bo=Vo(({app:a})=>{}),qo=[Object.values([Bo])[0],Object.values([])[0]].filter(Boolean);async function je(a,s={}){const n=s.document||a.resolvedOptions.document;if(!n||!a.dirty)return;const t={shouldRender:!0,tags:[]};if(await a.hooks.callHook("dom:beforeRender",t),!!t.shouldRender)return a._domUpdatePromise||(a._domUpdatePromise=new Promise(async e=>{const l=new Map,i=new Promise(p=>{a.resolveTags().then(d=>{p(d.map(g=>{const f=l.get(g._d)||0,y={tag:g,id:(f?`${g._d}:${f}`:g._d)||nt(g),shouldRender:!0};return g._d&&de(g._d)&&l.set(g._d,f+1),y}))})});let r=a._dom;if(!r){r={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const p of["body","head"]){const d=n[p]?.children;for(const g of d){const f=g.tagName.toLowerCase();if(!at.has(f))continue;const y=fe({tag:f,props:{}},{innerHTML:g.innerHTML,...g.getAttributeNames().reduce((w,x)=>(w[x]=g.getAttribute(x),w),{})||{}});if(y.key=g.getAttribute("data-hid")||void 0,y._d=Mn(y)||nt(y),r.elMap.has(y._d)){let w=1,x=y._d;for(;r.elMap.has(x);)x=`${y._d}:${w++}`;r.elMap.set(x,g)}else r.elMap.set(y._d,g)}}}r.pendingSideEffects={...r.sideEffects},r.sideEffects={};function o(p,d,g){const f=`${p}:${d}`;r.sideEffects[f]=g,delete r.pendingSideEffects[f]}function m({id:p,$el:d,tag:g}){const f=g.tag.endsWith("Attrs");r.elMap.set(p,d),f||(g.textContent&&g.textContent!==d.textContent&&(d.textContent=g.textContent),g.innerHTML&&g.innerHTML!==d.innerHTML&&(d.innerHTML=g.innerHTML),o(p,"el",()=>{d?.remove(),r.elMap.delete(p)}));for(const y in g.props){if(!Object.prototype.hasOwnProperty.call(g.props,y))continue;const w=g.props[y];if(y.startsWith("on")&&typeof w=="function"){const k=d?.dataset;if(k&&k[`${y}fired`]){const b=y.slice(0,-5);w.call(d,new Event(b.substring(2)))}d.getAttribute(`data-${y}`)!==""&&((g.tag==="bodyAttrs"?n.defaultView:d).addEventListener(y.substring(2),w.bind(d)),d.setAttribute(`data-${y}`,""));continue}const x=`attr:${y}`;if(y==="class"){if(!w)continue;for(const k of w)f&&o(p,`${x}:${k}`,()=>d.classList.remove(k)),!d.classList.contains(k)&&d.classList.add(k)}else if(y==="style"){if(!w)continue;for(const[k,b]of w)o(p,`${x}:${k}`,()=>{d.style.removeProperty(k)}),d.style.setProperty(k,b)}else w!==!1&&w!==null&&(d.getAttribute(y)!==w&&d.setAttribute(y,w===!0?"":String(w)),f&&o(p,x,()=>d.removeAttribute(y)))}}const c=[],u={bodyClose:void 0,bodyOpen:void 0,head:void 0},h=await i;for(const p of h){const{tag:d,shouldRender:g,id:f}=p;if(g){if(d.tag==="title"){n.title=d.textContent,o("title","",()=>n.title=r.title);continue}p.$el=p.$el||r.elMap.get(f),p.$el?m(p):at.has(d.tag)&&c.push(p)}}for(const p of c){const d=p.tag.tagPosition||"head";p.$el=n.createElement(p.tag.tag),m(p),u[d]=u[d]||n.createDocumentFragment(),u[d].appendChild(p.$el)}for(const p of h)await a.hooks.callHook("dom:renderTag",p,n,o);u.head&&n.head.appendChild(u.head),u.bodyOpen&&n.body.insertBefore(u.bodyOpen,n.body.firstChild),u.bodyClose&&n.body.appendChild(u.bodyClose);for(const p in r.pendingSideEffects)r.pendingSideEffects[p]();a._dom=r,await a.hooks.callHook("dom:rendered",{renders:h}),e()}).finally(()=>{a._domUpdatePromise=void 0,a.dirty=!1})),a._domUpdatePromise}function Wo(a={}){const s=a.domOptions?.render||je;a.document=a.document||(typeof window<"u"?document:void 0);const n=a.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return ti({...a,plugins:[...a.plugins||[],{key:"client",hooks:{"entries:updated":s}}],init:[n?JSON.parse(n):!1,...a.init||[]]})}function Uo(a,s){let n=0;return()=>{const t=++n;s(()=>{n===t&&a()})}}function Jo(a={}){const s=Wo({domOptions:{render:Uo(()=>je(s),n=>setTimeout(n,0))},...a});return s.install=li(s),s}function bp(a,s=""){const n=["slidev-page",s],t=a?.meta?.slide?.no;return t!=null&&n.push(`slidev-page-${t}`),n.filter(Boolean).join(" ")}async function Mp(){const{saveAs:a}=await _(async()=>{const{saveAs:s}=await import("./modules/file-saver-DKWcVV7Q.js").then(n=>n.F);return{saveAs:s}},[],import.meta.url);a(typeof R.download=="string"?R.download:R.exportFilename?`${R.exportFilename}.pdf`:"./slidev-exported.pdf",`${R.title}.pdf`)}function oa(a,s,n){return(a.instance?.$).provides[s]??n}function Ko(){return{install(a){a.directive("click",{name:"v-click",mounted(s,n){const t=Ra(s,n,n.value);t!=null&&(s.classList.toggle(Fa,!0),s.dataset.slidevClicksStart=String(t.start),Number.isFinite(t.end)&&(s.dataset.slidevClicksEnd=String(t.end)),s.watchStopHandle=ra(()=>{const e=t.isActive.value,l=t.isCurrent.value,i=e&&!l;t.flagHide?(s.classList.toggle(t.flagFade?ua:ha,e),s.classList.toggle(on,e)):s.classList.toggle(t.flagFade?ua:ha,!e),s.classList.toggle(mn,l),s.classList.toggle(pn,i)}))},unmounted:gn}),a.directive("after",{name:"v-after",mounted(s,n){const t=Ra(s,n,"+0");t!=null&&(s.classList.toggle(Fa,!0),s.watchStopHandle=ra(()=>{const e=t.isActive.value,l=t.isCurrent.value,i=e&&!l;t.flagHide?(s.classList.toggle(t.flagFade?ua:ha,e),s.classList.toggle(on,e)):s.classList.toggle(t.flagFade?ua:ha,!e),s.classList.toggle(mn,l),s.classList.toggle(pn,i)}))},unmounted:gn}),a.directive("click-hide",{name:"v-click-hide",mounted(s,n){const t=Ra(s,n,n.value,!0);t!=null&&(s.classList.toggle(Fa,!0),s.watchStopHandle=ra(()=>{const e=t.isActive.value,l=t.isCurrent.value,i=e&&!l;s.classList.toggle(t.flagFade?ua:ha,e),s.classList.toggle(on,e),s.classList.toggle(mn,l),s.classList.toggle(pn,i)}))},unmounted:gn})}}}const ze=new Map;function Ra(a,s,n,t=!1){const e=oa(s,Za)?.value;if(!a||!e)return null;const l=t||s.modifiers.hide!==!1&&s.modifiers.hide!=null,i=s.modifiers.fade!==!1&&s.modifiers.fade!=null,r=e.calculate(n);if(!r)return null;e.register(a,r);const o=v(()=>l?!r.isActive.value:r.isActive.value),m=v(()=>o.value?"shown":Number.isFinite(r.end)?e.current<r.start?"before":"after":l?"after":"before"),c={...r,isShown:o,visibilityState:m,flagFade:i,flagHide:l};return ze.set(a,c),c}function gn(a,s){a.classList.toggle(Fa,!1),oa(s,Za)?.value?.unregister(a),a.watchStopHandle?.()}function Go(a=ee(ke,E())){const s=kl(a),n=ss([Zr,Yr,Xr,so,Qr,Ha.width,Ha.height],()=>{setTimeout(s.update,300)},{flush:"post",immediate:!0});return{...s,stop:n}}function Qo(a){return()=>{}}function Zo(a,s,n,t=!1){function e(I){return a?oa(a,I):bl(I)}const l=e(In),i=e(zr)??{},r=e(Rn),o=v(()=>Qo(r.value)),m=e(Ir)??E(1),c=e(Hr)??E(1),{left:u,top:h,stop:p}=Go(e(ke)??E()),{isPrintMode:d}=ma(),g=["slide","presenter"].includes(l.value)&&!d.value;let f=a?"directive":"prop",y=Jn(),w;if(Array.isArray(s)?w=s:typeof s=="string"&&s.includes(",")?w=s.split(",").map(Number):s!=null&&(f="frontmatter",y=`${s}`,s=i?.dragPos?.[y],w=s?.split(",").map(Number)),f!=="frontmatter"&&!n)throw new Error("[Slidev] Can not identify the source position of the v-drag element, please provide an explicit `id` prop.");const x=[p],k=!t&&s!=null&&!Number.isFinite(w?.[3]);w??=[Number.NaN,Number.NaN,0];const b=E(w[2]),F=E(w[0]+w[2]/2),C=E(t?0:w[4]??0),H=v(()=>C.value*Math.PI/180),U=v(()=>Math.sin(H.value)),os=v(()=>Math.cos(H.value)),Y=E(),T=E({left:0,top:0,width:0,height:0}),A=E(0);function V(){if(!Y.value)return;const I=Y.value.getBoundingClientRect();T.value={left:I.left/c.value,top:I.top/c.value,width:I.width/c.value,height:I.height/c.value},A.value=(T.value.width+T.value.height)/m.value/(Math.abs(U.value)+Math.abs(os.value))-b.value}x.push(ss(b,V,{flush:"post"}));const j=E(w[3]??0),N=k?v({get:()=>(k?A.value:j.value)||0,set:I=>!k&&(j.value=I)}):j,is=k?E(w[1]):E(w[1]+w[3]/2),ms=k?v({get:()=>is.value+N.value/2,set:I=>is.value=I-N.value/2}):is,pa=v(()=>Number.isFinite(F.value)?{position:"absolute",zIndex:100,left:`${F.value-b.value/2}px`,top:`${ms.value-N.value/2}px`,width:`${b.value}px`,height:k?void 0:`${N.value}px`,transformOrigin:"center center",transform:`rotate(${C.value}deg)`}:{position:"absolute",zIndex:100});x.push(ss([F,ms,b,N,C],([I,Ma,Qn,Zn,Yn])=>{let sa=[I-Qn/2,Ma-Zn/2,Qn].map(Math.round).join();k?sa+=f==="directive"?",NaN":",_":sa+=`,${Math.round(Zn)}`,Math.round(Yn)!==0&&(sa+=`,${Math.round(Yn)}`),f==="directive"&&(sa=`[${sa}]`),o.value(y,sa,f,n)}));const G={dragId:y,dataSource:f,markdownSource:n,isArrow:t,zoom:c,autoHeight:k,x0:F,y0:ms,width:b,height:N,rotate:C,container:Y,containerStyle:pa,watchStopHandles:x,dragging:v(()=>_a.value===G),mounted(){g&&(V(),s||setTimeout(()=>{V(),F.value=(T.value.left+T.value.width/2-u.value)/m.value,ms.value=(T.value.top-h.value)/m.value,b.value=T.value.width/m.value,N.value=T.value.height/m.value},100))},unmounted(){g&&G.stopDragging()},startDragging(){g&&(V(),_a.value=G)},stopDragging(){g&&_a.value===G&&(_a.value=null)}};return x.push(vl(Y,I=>{const Ma=document.querySelector("#drag-control-container");Ma&&I.target&&Ma.contains(I.target)||G.stopDragging()}),ss(Ml(),I=>{I||G.stopDragging()})),G}function Yo(){return{install(a){a.directive("drag",{name:"v-drag",created(s,n,t){const e=Zo(n,n.value,t.props?.markdownSource);t.props&&(t.props={...t.props},delete t.props.markdownSource),e.container.value=s,s.draggingState=e,s.dataset.dragId=e.dragId,e.watchStopHandles.push(ss(e.containerStyle,l=>{for(const[i,r]of Object.entries(l))r&&(s.style[i]=r)},{immediate:!0})),s.addEventListener("dblclick",e.startDragging)},mounted(s){s.draggingState.mounted()},unmounted(s){const n=s.draggingState;n.unmounted(),s.removeEventListener("dblclick",n.startDragging),n.watchStopHandles.forEach(t=>t())}})}}}function He(){return Math.floor(Math.random()*2**31)}class Xo{constructor(s){this.seed=s}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}function $n(a,s,n){if(a&&a.length){const[t,e]=s,l=Math.PI/180*n,i=Math.cos(l),r=Math.sin(l);for(const o of a){const[m,c]=o;o[0]=(m-t)*i-(c-e)*r+t,o[1]=(m-t)*r+(c-e)*i+e}}}function sm(a,s,n){const t=[];a.forEach(e=>t.push(...e)),$n(t,s,n)}function am(a,s){return a[0]===s[0]&&a[1]===s[1]}function nm(a,s,n,t=1){const e=n,l=Math.max(s,.1),i=a[0]&&a[0][0]&&typeof a[0][0]=="number"?[a]:a,r=[0,0];if(e)for(const m of i)$n(m,r,e);const o=tm(i,l,t);if(e){for(const m of i)$n(m,r,-e);sm(o,r,-e)}return o}function tm(a,s,n){const t=[];for(const m of a){const c=[...m];am(c[0],c[c.length-1])||c.push([c[0][0],c[0][1]]),c.length>2&&t.push(c)}const e=[];s=Math.max(s,.1);const l=[];for(const m of t)for(let c=0;c<m.length-1;c++){const u=m[c],h=m[c+1];if(u[1]!==h[1]){const p=Math.min(u[1],h[1]);l.push({ymin:p,ymax:Math.max(u[1],h[1]),x:p===u[1]?u[0]:h[0],islope:(h[0]-u[0])/(h[1]-u[1])})}}if(l.sort((m,c)=>m.ymin<c.ymin?-1:m.ymin>c.ymin?1:m.x<c.x?-1:m.x>c.x?1:m.ymax===c.ymax?0:(m.ymax-c.ymax)/Math.abs(m.ymax-c.ymax)),!l.length)return e;let i=[],r=l[0].ymin,o=0;for(;i.length||l.length;){if(l.length){let m=-1;for(let u=0;u<l.length&&!(l[u].ymin>r);u++)m=u;l.splice(0,m+1).forEach(u=>{i.push({s:r,edge:u})})}if(i=i.filter(m=>!(m.edge.ymax<=r)),i.sort((m,c)=>m.edge.x===c.edge.x?0:(m.edge.x-c.edge.x)/Math.abs(m.edge.x-c.edge.x)),(n!==1||o%s===0)&&i.length>1)for(let m=0;m<i.length;m=m+2){const c=m+1;if(c>=i.length)break;const u=i[m].edge,h=i[c].edge;e.push([[Math.round(u.x),r],[Math.round(h.x),r]])}r+=n,i.forEach(m=>{m.edge.x=m.edge.x+n*m.edge.islope}),o++}return e}function ba(a,s){var n;const t=s.hachureAngle+90;let e=s.hachureGap;e<0&&(e=s.strokeWidth*4),e=Math.round(Math.max(e,.1));let l=1;return s.roughness>=1&&(((n=s.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(l=e),nm(a,e,t,l||1)}class Kn{constructor(s){this.helper=s}fillPolygons(s,n){return this._fillPolygons(s,n)}_fillPolygons(s,n){const t=ba(s,n);return{type:"fillSketch",ops:this.renderLines(t,n)}}renderLines(s,n){const t=[];for(const e of s)t.push(...this.helper.doubleLineOps(e[0][0],e[0][1],e[1][0],e[1][1],n));return t}}function en(a){const s=a[0],n=a[1];return Math.sqrt(Math.pow(s[0]-n[0],2)+Math.pow(s[1]-n[1],2))}class em extends Kn{fillPolygons(s,n){let t=n.hachureGap;t<0&&(t=n.strokeWidth*4),t=Math.max(t,.1);const e=Object.assign({},n,{hachureGap:t}),l=ba(s,e),i=Math.PI/180*n.hachureAngle,r=[],o=t*.5*Math.cos(i),m=t*.5*Math.sin(i);for(const[u,h]of l)en([u,h])&&r.push([[u[0]-o,u[1]+m],[...h]],[[u[0]+o,u[1]-m],[...h]]);return{type:"fillSketch",ops:this.renderLines(r,n)}}}class lm extends Kn{fillPolygons(s,n){const t=this._fillPolygons(s,n),e=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),l=this._fillPolygons(s,e);return t.ops=t.ops.concat(l.ops),t}}class im{constructor(s){this.helper=s}fillPolygons(s,n){n=Object.assign({},n,{hachureAngle:0});const t=ba(s,n);return this.dotsOnLines(t,n)}dotsOnLines(s,n){const t=[];let e=n.hachureGap;e<0&&(e=n.strokeWidth*4),e=Math.max(e,.1);let l=n.fillWeight;l<0&&(l=n.strokeWidth/2);const i=e/4;for(const r of s){const o=en(r),m=o/e,c=Math.ceil(m)-1,u=o-c*e,h=(r[0][0]+r[1][0])/2-e/4,p=Math.min(r[0][1],r[1][1]);for(let d=0;d<c;d++){const g=p+u+d*e,f=h-i+Math.random()*2*i,y=g-i+Math.random()*2*i,w=this.helper.ellipse(f,y,l,l,n);t.push(...w.ops)}}return{type:"fillSketch",ops:t}}}class rm{constructor(s){this.helper=s}fillPolygons(s,n){const t=ba(s,n);return{type:"fillSketch",ops:this.dashedLine(t,n)}}dashedLine(s,n){const t=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,e=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,l=[];return s.forEach(i=>{const r=en(i),o=Math.floor(r/(t+e)),m=(r+e-o*(t+e))/2;let c=i[0],u=i[1];c[0]>u[0]&&(c=i[1],u=i[0]);const h=Math.atan((u[1]-c[1])/(u[0]-c[0]));for(let p=0;p<o;p++){const d=p*(t+e),g=d+t,f=[c[0]+d*Math.cos(h)+m*Math.cos(h),c[1]+d*Math.sin(h)+m*Math.sin(h)],y=[c[0]+g*Math.cos(h)+m*Math.cos(h),c[1]+g*Math.sin(h)+m*Math.sin(h)];l.push(...this.helper.doubleLineOps(f[0],f[1],y[0],y[1],n))}}),l}}class om{constructor(s){this.helper=s}fillPolygons(s,n){const t=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,e=n.zigzagOffset<0?t:n.zigzagOffset;n=Object.assign({},n,{hachureGap:t+e});const l=ba(s,n);return{type:"fillSketch",ops:this.zigzagLines(l,e,n)}}zigzagLines(s,n,t){const e=[];return s.forEach(l=>{const i=en(l),r=Math.round(i/(2*n));let o=l[0],m=l[1];o[0]>m[0]&&(o=l[1],m=l[0]);const c=Math.atan((m[1]-o[1])/(m[0]-o[0]));for(let u=0;u<r;u++){const h=u*2*n,p=(u+1)*2*n,d=Math.sqrt(2*Math.pow(n,2)),g=[o[0]+h*Math.cos(c),o[1]+h*Math.sin(c)],f=[o[0]+p*Math.cos(c),o[1]+p*Math.sin(c)],y=[g[0]+d*Math.cos(c+Math.PI/4),g[1]+d*Math.sin(c+Math.PI/4)];e.push(...this.helper.doubleLineOps(g[0],g[1],y[0],y[1],t),...this.helper.doubleLineOps(y[0],y[1],f[0],f[1],t))}}),e}}const J={};function mm(a,s){let n=a.fillStyle||"hachure";if(!J[n])switch(n){case"zigzag":J[n]||(J[n]=new em(s));break;case"cross-hatch":J[n]||(J[n]=new lm(s));break;case"dots":J[n]||(J[n]=new im(s));break;case"dashed":J[n]||(J[n]=new rm(s));break;case"zigzag-line":J[n]||(J[n]=new om(s));break;default:n="hachure",J[n]||(J[n]=new Kn(s));break}return J[n]}const pm=0,Tn=1,Ve=2,Ta={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function cm(a){const s=new Array;for(;a!=="";)if(a.match(/^([ \t\r\n,]+)/))a=a.substr(RegExp.$1.length);else if(a.match(/^([aAcChHlLmMqQsStTvVzZ])/))s[s.length]={type:pm,text:RegExp.$1},a=a.substr(RegExp.$1.length);else if(a.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))s[s.length]={type:Tn,text:`${parseFloat(RegExp.$1)}`},a=a.substr(RegExp.$1.length);else return[];return s[s.length]={type:Ve,text:""},s}function dn(a,s){return a.type===s}function Gn(a){const s=[],n=cm(a);let t="BOD",e=0,l=n[e];for(;!dn(l,Ve);){let i=0;const r=[];if(t==="BOD")if(l.text==="M"||l.text==="m")e++,i=Ta[l.text],t=l.text;else return Gn("M0,0"+a);else dn(l,Tn)?i=Ta[t]:(e++,i=Ta[l.text],t=l.text);if(e+i<n.length){for(let o=e;o<e+i;o++){const m=n[o];if(dn(m,Tn))r[r.length]=+m.text;else throw new Error("Param not a number: "+t+","+m.text)}if(typeof Ta[t]=="number"){const o={key:t,data:r};s.push(o),e+=i,l=n[e],t==="M"&&(t="L"),t==="m"&&(t="l")}else throw new Error("Bad segment: "+t)}else throw new Error("Path data ended short")}return s}function Be(a){let s=0,n=0,t=0,e=0;const l=[];for(const{key:i,data:r}of a)switch(i){case"M":l.push({key:"M",data:[...r]}),[s,n]=r,[t,e]=r;break;case"m":s+=r[0],n+=r[1],l.push({key:"M",data:[s,n]}),t=s,e=n;break;case"L":l.push({key:"L",data:[...r]}),[s,n]=r;break;case"l":s+=r[0],n+=r[1],l.push({key:"L",data:[s,n]});break;case"C":l.push({key:"C",data:[...r]}),s=r[4],n=r[5];break;case"c":{const o=r.map((m,c)=>c%2?m+n:m+s);l.push({key:"C",data:o}),s=o[4],n=o[5];break}case"Q":l.push({key:"Q",data:[...r]}),s=r[2],n=r[3];break;case"q":{const o=r.map((m,c)=>c%2?m+n:m+s);l.push({key:"Q",data:o}),s=o[2],n=o[3];break}case"A":l.push({key:"A",data:[...r]}),s=r[5],n=r[6];break;case"a":s+=r[5],n+=r[6],l.push({key:"A",data:[r[0],r[1],r[2],r[3],r[4],s,n]});break;case"H":l.push({key:"H",data:[...r]}),s=r[0];break;case"h":s+=r[0],l.push({key:"H",data:[s]});break;case"V":l.push({key:"V",data:[...r]}),n=r[0];break;case"v":n+=r[0],l.push({key:"V",data:[n]});break;case"S":l.push({key:"S",data:[...r]}),s=r[2],n=r[3];break;case"s":{const o=r.map((m,c)=>c%2?m+n:m+s);l.push({key:"S",data:o}),s=o[2],n=o[3];break}case"T":l.push({key:"T",data:[...r]}),s=r[0],n=r[1];break;case"t":s+=r[0],n+=r[1],l.push({key:"T",data:[s,n]});break;case"Z":case"z":l.push({key:"Z",data:[]}),s=t,n=e;break}return l}function qe(a){const s=[];let n="",t=0,e=0,l=0,i=0,r=0,o=0;for(const{key:m,data:c}of a){switch(m){case"M":s.push({key:"M",data:[...c]}),[t,e]=c,[l,i]=c;break;case"C":s.push({key:"C",data:[...c]}),t=c[4],e=c[5],r=c[2],o=c[3];break;case"L":s.push({key:"L",data:[...c]}),[t,e]=c;break;case"H":t=c[0],s.push({key:"L",data:[t,e]});break;case"V":e=c[0],s.push({key:"L",data:[t,e]});break;case"S":{let u=0,h=0;n==="C"||n==="S"?(u=t+(t-r),h=e+(e-o)):(u=t,h=e),s.push({key:"C",data:[u,h,...c]}),r=c[0],o=c[1],t=c[2],e=c[3];break}case"T":{const[u,h]=c;let p=0,d=0;n==="Q"||n==="T"?(p=t+(t-r),d=e+(e-o)):(p=t,d=e);const g=t+2*(p-t)/3,f=e+2*(d-e)/3,y=u+2*(p-u)/3,w=h+2*(d-h)/3;s.push({key:"C",data:[g,f,y,w,u,h]}),r=p,o=d,t=u,e=h;break}case"Q":{const[u,h,p,d]=c,g=t+2*(u-t)/3,f=e+2*(h-e)/3,y=p+2*(u-p)/3,w=d+2*(h-d)/3;s.push({key:"C",data:[g,f,y,w,p,d]}),r=u,o=h,t=p,e=d;break}case"A":{const u=Math.abs(c[0]),h=Math.abs(c[1]),p=c[2],d=c[3],g=c[4],f=c[5],y=c[6];u===0||h===0?(s.push({key:"C",data:[t,e,f,y,f,y]}),t=f,e=y):(t!==f||e!==y)&&(We(t,e,f,y,u,h,p,d,g).forEach(function(x){s.push({key:"C",data:x})}),t=f,e=y);break}case"Z":s.push({key:"Z",data:[]}),t=l,e=i;break}n=m}return s}function hm(a){return Math.PI*a/180}function ga(a,s,n){const t=a*Math.cos(n)-s*Math.sin(n),e=a*Math.sin(n)+s*Math.cos(n);return[t,e]}function We(a,s,n,t,e,l,i,r,o,m){const c=hm(i);let u=[],h=0,p=0,d=0,g=0;if(m)[h,p,d,g]=m;else{[a,s]=ga(a,s,-c),[n,t]=ga(n,t,-c);const T=(a-n)/2,A=(s-t)/2;let V=T*T/(e*e)+A*A/(l*l);V>1&&(V=Math.sqrt(V),e=V*e,l=V*l);const j=r===o?-1:1,N=e*e,is=l*l,ms=N*is-N*A*A-is*T*T,pa=N*A*A+is*T*T,G=j*Math.sqrt(Math.abs(ms/pa));d=G*e*A/l+(a+n)/2,g=G*-l*T/e+(s+t)/2,h=Math.asin(parseFloat(((s-g)/l).toFixed(9))),p=Math.asin(parseFloat(((t-g)/l).toFixed(9))),a<d&&(h=Math.PI-h),n<d&&(p=Math.PI-p),h<0&&(h=Math.PI*2+h),p<0&&(p=Math.PI*2+p),o&&h>p&&(h=h-Math.PI*2),!o&&p>h&&(p=p-Math.PI*2)}let f=p-h;if(Math.abs(f)>Math.PI*120/180){const T=p,A=n,V=t;o&&p>h?p=h+Math.PI*120/180*1:p=h+Math.PI*120/180*-1,n=d+e*Math.cos(p),t=g+l*Math.sin(p),u=We(n,t,A,V,e,l,i,0,o,[p,T,d,g])}f=p-h;const y=Math.cos(h),w=Math.sin(h),x=Math.cos(p),k=Math.sin(p),b=Math.tan(f/4),F=4/3*e*b,C=4/3*l*b,H=[a,s],U=[a+F*w,s-C*y],os=[n+F*k,t-C*x],Y=[n,t];if(U[0]=2*H[0]-U[0],U[1]=2*H[1]-U[1],m)return[U,os,Y].concat(u);{u=[U,os,Y].concat(u);const T=[];for(let A=0;A<u.length;A+=3){const V=ga(u[A][0],u[A][1],c),j=ga(u[A+1][0],u[A+1][1],c),N=ga(u[A+2][0],u[A+2][1],c);T.push([V[0],V[1],j[0],j[1],N[0],N[1]])}return T}}const um={randOffset:fm,randOffsetWithRange:ym,ellipse:En,doubleLineOps:wm};function X(a,s,n,t,e){return{type:"path",ops:cs(a,s,n,t,e)}}function xa(a,s,n){const t=(a||[]).length;if(t>2){const e=[];for(let l=0;l<t-1;l++)e.push(...cs(a[l][0],a[l][1],a[l+1][0],a[l+1][1],n));return s&&e.push(...cs(a[t-1][0],a[t-1][1],a[0][0],a[0][1],n)),{type:"path",ops:e}}else if(t===2)return X(a[0][0],a[0][1],a[1][0],a[1][1],n);return{type:"path",ops:[]}}function gm(a,s){return xa(a,!0,s)}function Ue(a,s,n,t,e){const l=[[a,s],[a+n,s],[a+n,s+t],[a,s+t]];return gm(l,e)}function Gt(a,s){if(a.length){const t=typeof a[0][0]=="number"?[a]:a,e=Ea(t[0],1*(1+s.roughness*.2),s),l=s.disableMultiStroke?[]:Ea(t[0],1.5*(1+s.roughness*.22),Yt(s));for(let i=1;i<t.length;i++){const r=t[i];if(r.length){const o=Ea(r,1*(1+s.roughness*.2),s),m=s.disableMultiStroke?[]:Ea(r,1.5*(1+s.roughness*.22),Yt(s));for(const c of o)c.op!=="move"&&e.push(c);for(const c of m)c.op!=="move"&&l.push(c)}}return{type:"path",ops:e.concat(l)}}return{type:"path",ops:[]}}function En(a,s,n,t,e){const l=Je(n,t,e);return Fn(a,s,e,l).opset}function Je(a,s,n){const t=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(a/2,2)+Math.pow(s/2,2))/2)),e=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*t)),l=Math.PI*2/e;let i=Math.abs(a/2),r=Math.abs(s/2);const o=1-n.curveFitting;return i+=M(i*o,n),r+=M(r*o,n),{increment:l,rx:i,ry:r}}function Fn(a,s,n,t){const[e,l]=Xt(t.increment,a,s,t.rx,t.ry,1,t.increment*Ua(.1,Ua(.4,1,n),n),n);let i=Ja(e,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[r]=Xt(t.increment,a,s,t.rx,t.ry,1.5,0,n),o=Ja(r,null,n);i=i.concat(o)}return{estimatedPoints:l,opset:{type:"path",ops:i}}}function Qt(a,s,n,t,e,l,i,r,o){const m=a,c=s;let u=Math.abs(n/2),h=Math.abs(t/2);u+=M(u*.01,o),h+=M(h*.01,o);let p=e,d=l;for(;p<0;)p+=Math.PI*2,d+=Math.PI*2;d-p>Math.PI*2&&(p=0,d=Math.PI*2);const g=Math.PI*2/o.curveStepCount,f=Math.min(g/2,(d-p)/2),y=se(f,m,c,u,h,p,d,1,o);if(!o.disableMultiStroke){const w=se(f,m,c,u,h,p,d,1.5,o);y.push(...w)}return i&&(r?y.push(...cs(m,c,m+u*Math.cos(p),c+h*Math.sin(p),o),...cs(m,c,m+u*Math.cos(d),c+h*Math.sin(d),o)):y.push({op:"lineTo",data:[m,c]},{op:"lineTo",data:[m+u*Math.cos(p),c+h*Math.sin(p)]})),{type:"path",ops:y}}function Zt(a,s){const n=qe(Be(Gn(a))),t=[];let e=[0,0],l=[0,0];for(const{key:i,data:r}of n)switch(i){case"M":{l=[r[0],r[1]],e=[r[0],r[1]];break}case"L":t.push(...cs(l[0],l[1],r[0],r[1],s)),l=[r[0],r[1]];break;case"C":{const[o,m,c,u,h,p]=r;t.push(...xm(o,m,c,u,h,p,l,s)),l=[h,p];break}case"Z":t.push(...cs(l[0],l[1],e[0],e[1],s)),l=[e[0],e[1]];break}return{type:"path",ops:t}}function fn(a,s){const n=[];for(const t of a)if(t.length){const e=s.maxRandomnessOffset||0,l=t.length;if(l>2){n.push({op:"move",data:[t[0][0]+M(e,s),t[0][1]+M(e,s)]});for(let i=1;i<l;i++)n.push({op:"lineTo",data:[t[i][0]+M(e,s),t[i][1]+M(e,s)]})}}return{type:"fillPath",ops:n}}function na(a,s){return mm(s,um).fillPolygons(a,s)}function dm(a,s,n,t,e,l,i){const r=a,o=s;let m=Math.abs(n/2),c=Math.abs(t/2);m+=M(m*.01,i),c+=M(c*.01,i);let u=e,h=l;for(;u<0;)u+=Math.PI*2,h+=Math.PI*2;h-u>Math.PI*2&&(u=0,h=Math.PI*2);const p=(h-u)/i.curveStepCount,d=[];for(let g=u;g<=h;g=g+p)d.push([r+m*Math.cos(g),o+c*Math.sin(g)]);return d.push([r+m*Math.cos(h),o+c*Math.sin(h)]),d.push([r,o]),na([d],i)}function fm(a,s){return M(a,s)}function ym(a,s,n){return Ua(a,s,n)}function wm(a,s,n,t,e){return cs(a,s,n,t,e,!0)}function Yt(a){const s=Object.assign({},a);return s.randomizer=void 0,a.seed&&(s.seed=a.seed+1),s}function Ke(a){return a.randomizer||(a.randomizer=new Xo(a.seed||0)),a.randomizer.next()}function Ua(a,s,n,t=1){return n.roughness*t*(Ke(n)*(s-a)+a)}function M(a,s,n=1){return Ua(-a,a,s,n)}function cs(a,s,n,t,e,l=!1){const i=l?e.disableMultiStrokeFill:e.disableMultiStroke,r=An(a,s,n,t,e,!0,!1);if(i)return r;const o=An(a,s,n,t,e,!0,!0);return r.concat(o)}function An(a,s,n,t,e,l,i){const r=Math.pow(a-n,2)+Math.pow(s-t,2),o=Math.sqrt(r);let m=1;o<200?m=1:o>500?m=.4:m=-.0016668*o+1.233334;let c=e.maxRandomnessOffset||0;c*c*100>r&&(c=o/10);const u=c/2,h=.2+Ke(e)*.2;let p=e.bowing*e.maxRandomnessOffset*(t-s)/200,d=e.bowing*e.maxRandomnessOffset*(a-n)/200;p=M(p,e,m),d=M(d,e,m);const g=[],f=()=>M(u,e,m),y=()=>M(c,e,m),w=e.preserveVertices;return i?g.push({op:"move",data:[a+(w?0:f()),s+(w?0:f())]}):g.push({op:"move",data:[a+(w?0:M(c,e,m)),s+(w?0:M(c,e,m))]}),i?g.push({op:"bcurveTo",data:[p+a+(n-a)*h+f(),d+s+(t-s)*h+f(),p+a+2*(n-a)*h+f(),d+s+2*(t-s)*h+f(),n+(w?0:f()),t+(w?0:f())]}):g.push({op:"bcurveTo",data:[p+a+(n-a)*h+y(),d+s+(t-s)*h+y(),p+a+2*(n-a)*h+y(),d+s+2*(t-s)*h+y(),n+(w?0:y()),t+(w?0:y())]}),g}function Ea(a,s,n){if(!a.length)return[];const t=[];t.push([a[0][0]+M(s,n),a[0][1]+M(s,n)]),t.push([a[0][0]+M(s,n),a[0][1]+M(s,n)]);for(let e=1;e<a.length;e++)t.push([a[e][0]+M(s,n),a[e][1]+M(s,n)]),e===a.length-1&&t.push([a[e][0]+M(s,n),a[e][1]+M(s,n)]);return Ja(t,null,n)}function Ja(a,s,n){const t=a.length,e=[];if(t>3){const l=[],i=1-n.curveTightness;e.push({op:"move",data:[a[1][0],a[1][1]]});for(let r=1;r+2<t;r++){const o=a[r];l[0]=[o[0],o[1]],l[1]=[o[0]+(i*a[r+1][0]-i*a[r-1][0])/6,o[1]+(i*a[r+1][1]-i*a[r-1][1])/6],l[2]=[a[r+1][0]+(i*a[r][0]-i*a[r+2][0])/6,a[r+1][1]+(i*a[r][1]-i*a[r+2][1])/6],l[3]=[a[r+1][0],a[r+1][1]],e.push({op:"bcurveTo",data:[l[1][0],l[1][1],l[2][0],l[2][1],l[3][0],l[3][1]]})}}else t===3?(e.push({op:"move",data:[a[1][0],a[1][1]]}),e.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[2][0],a[2][1]]})):t===2&&e.push(...An(a[0][0],a[0][1],a[1][0],a[1][1],n,!0,!0));return e}function Xt(a,s,n,t,e,l,i,r){const o=r.roughness===0,m=[],c=[];if(o){a=a/4,c.push([s+t*Math.cos(-a),n+e*Math.sin(-a)]);for(let u=0;u<=Math.PI*2;u=u+a){const h=[s+t*Math.cos(u),n+e*Math.sin(u)];m.push(h),c.push(h)}c.push([s+t*Math.cos(0),n+e*Math.sin(0)]),c.push([s+t*Math.cos(a),n+e*Math.sin(a)])}else{const u=M(.5,r)-Math.PI/2;c.push([M(l,r)+s+.9*t*Math.cos(u-a),M(l,r)+n+.9*e*Math.sin(u-a)]);const h=Math.PI*2+u-.01;for(let p=u;p<h;p=p+a){const d=[M(l,r)+s+t*Math.cos(p),M(l,r)+n+e*Math.sin(p)];m.push(d),c.push(d)}c.push([M(l,r)+s+t*Math.cos(u+Math.PI*2+i*.5),M(l,r)+n+e*Math.sin(u+Math.PI*2+i*.5)]),c.push([M(l,r)+s+.98*t*Math.cos(u+i),M(l,r)+n+.98*e*Math.sin(u+i)]),c.push([M(l,r)+s+.9*t*Math.cos(u+i*.5),M(l,r)+n+.9*e*Math.sin(u+i*.5)])}return[c,m]}function se(a,s,n,t,e,l,i,r,o){const m=l+M(.1,o),c=[];c.push([M(r,o)+s+.9*t*Math.cos(m-a),M(r,o)+n+.9*e*Math.sin(m-a)]);for(let u=m;u<=i;u=u+a)c.push([M(r,o)+s+t*Math.cos(u),M(r,o)+n+e*Math.sin(u)]);return c.push([s+t*Math.cos(i),n+e*Math.sin(i)]),c.push([s+t*Math.cos(i),n+e*Math.sin(i)]),Ja(c,null,o)}function xm(a,s,n,t,e,l,i,r){const o=[],m=[r.maxRandomnessOffset||1,(r.maxRandomnessOffset||1)+.3];let c=[0,0];const u=r.disableMultiStroke?1:2,h=r.preserveVertices;for(let p=0;p<u;p++)p===0?o.push({op:"move",data:[i[0],i[1]]}):o.push({op:"move",data:[i[0]+(h?0:M(m[0],r)),i[1]+(h?0:M(m[0],r))]}),c=h?[e,l]:[e+M(m[p],r),l+M(m[p],r)],o.push({op:"bcurveTo",data:[a+M(m[p],r),s+M(m[p],r),n+M(m[p],r),t+M(m[p],r),c[0],c[1]]});return o}function da(a){return[...a]}function ae(a,s=0){const n=a.length;if(n<3)throw new Error("A curve must have at least three points.");const t=[];if(n===3)t.push(da(a[0]),da(a[1]),da(a[2]),da(a[2]));else{const e=[];e.push(a[0],a[0]);for(let r=1;r<a.length;r++)e.push(a[r]),r===a.length-1&&e.push(a[r]);const l=[],i=1-s;t.push(da(e[0]));for(let r=1;r+2<e.length;r++){const o=e[r];l[0]=[o[0],o[1]],l[1]=[o[0]+(i*e[r+1][0]-i*e[r-1][0])/6,o[1]+(i*e[r+1][1]-i*e[r-1][1])/6],l[2]=[e[r+1][0]+(i*e[r][0]-i*e[r+2][0])/6,e[r+1][1]+(i*e[r][1]-i*e[r+2][1])/6],l[3]=[e[r+1][0],e[r+1][1]],t.push(l[1],l[2],l[3])}}return t}function km(a,s){return Math.sqrt(Ia(a,s))}function Ia(a,s){return Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2)}function vm(a,s,n){const t=Ia(s,n);if(t===0)return Ia(a,s);let e=((a[0]-s[0])*(n[0]-s[0])+(a[1]-s[1])*(n[1]-s[1]))/t;return e=Math.max(0,Math.min(1,e)),Ia(a,Gs(s,n,e))}function Gs(a,s,n){return[a[0]+(s[0]-a[0])*n,a[1]+(s[1]-a[1])*n]}function bm(a,s){const n=a[s+0],t=a[s+1],e=a[s+2],l=a[s+3];let i=3*t[0]-2*n[0]-l[0];i*=i;let r=3*t[1]-2*n[1]-l[1];r*=r;let o=3*e[0]-2*l[0]-n[0];o*=o;let m=3*e[1]-2*l[1]-n[1];return m*=m,i<o&&(i=o),r<m&&(r=m),i+r}function Cn(a,s,n,t){const e=t||[];if(bm(a,s)<n){const l=a[s+0];e.length?km(e[e.length-1],l)>1&&e.push(l):e.push(l),e.push(a[s+3])}else{const i=a[s+0],r=a[s+1],o=a[s+2],m=a[s+3],c=Gs(i,r,.5),u=Gs(r,o,.5),h=Gs(o,m,.5),p=Gs(c,u,.5),d=Gs(u,h,.5),g=Gs(p,d,.5);Cn([i,c,p,g],0,n,e),Cn([g,d,h,m],0,n,e)}return e}function Mm(a,s){return Ka(a,0,a.length,s)}function Ka(a,s,n,t,e){const l=e||[],i=a[s],r=a[n-1];let o=0,m=1;for(let c=s+1;c<n-1;++c){const u=vm(a[c],i,r);u>o&&(o=u,m=c)}return Math.sqrt(o)>t?(Ka(a,s,m+1,t,l),Ka(a,m,n,t,l)):(l.length||l.push(i),l.push(r)),l}function Nn(a,s=.15,n){const t=[],e=(a.length-1)/3;for(let l=0;l<e;l++){const i=l*3;Cn(a,i,s,t)}return n&&n>0?Ka(t,0,t.length,n):t}function _m(a,s,n){const t=Gn(a),e=qe(Be(t)),l=[];let i=[],r=[0,0],o=[];const m=()=>{o.length>=4&&i.push(...Nn(o,s)),o=[]},c=()=>{m(),i.length&&(l.push(i),i=[])};for(const{key:h,data:p}of e)switch(h){case"M":c(),r=[p[0],p[1]],i.push(r);break;case"L":m(),i.push([p[0],p[1]]);break;case"C":if(!o.length){const d=i.length?i[i.length-1]:r;o.push([d[0],d[1]])}o.push([p[0],p[1]]),o.push([p[2],p[3]]),o.push([p[4],p[5]]);break;case"Z":m(),i.push([r[0],r[1]]);break}if(c(),!n)return l;const u=[];for(const h of l){const p=Mm(h,n);p.length&&u.push(p)}return u}const Q="none";class Lm{constructor(s){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=s||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return He()}_o(s){return s?Object.assign({},this.defaultOptions,s):this.defaultOptions}_d(s,n,t){return{shape:s,sets:n||[],options:t||this.defaultOptions}}line(s,n,t,e,l){const i=this._o(l);return this._d("line",[X(s,n,t,e,i)],i)}rectangle(s,n,t,e,l){const i=this._o(l),r=[],o=Ue(s,n,t,e,i);if(i.fill){const m=[[s,n],[s+t,n],[s+t,n+e],[s,n+e]];i.fillStyle==="solid"?r.push(fn([m],i)):r.push(na([m],i))}return i.stroke!==Q&&r.push(o),this._d("rectangle",r,i)}ellipse(s,n,t,e,l){const i=this._o(l),r=[],o=Je(t,e,i),m=Fn(s,n,i,o);if(i.fill)if(i.fillStyle==="solid"){const c=Fn(s,n,i,o).opset;c.type="fillPath",r.push(c)}else r.push(na([m.estimatedPoints],i));return i.stroke!==Q&&r.push(m.opset),this._d("ellipse",r,i)}circle(s,n,t,e){const l=this.ellipse(s,n,t,t,e);return l.shape="circle",l}linearPath(s,n){const t=this._o(n);return this._d("linearPath",[xa(s,!1,t)],t)}arc(s,n,t,e,l,i,r=!1,o){const m=this._o(o),c=[],u=Qt(s,n,t,e,l,i,r,!0,m);if(r&&m.fill)if(m.fillStyle==="solid"){const h=Object.assign({},m);h.disableMultiStroke=!0;const p=Qt(s,n,t,e,l,i,!0,!1,h);p.type="fillPath",c.push(p)}else c.push(dm(s,n,t,e,l,i,m));return m.stroke!==Q&&c.push(u),this._d("arc",c,m)}curve(s,n){const t=this._o(n),e=[],l=Gt(s,t);if(t.fill&&t.fill!==Q)if(t.fillStyle==="solid"){const i=Gt(s,Object.assign(Object.assign({},t),{disableMultiStroke:!0,roughness:t.roughness?t.roughness+t.fillShapeRoughnessGain:0}));e.push({type:"fillPath",ops:this._mergedShape(i.ops)})}else{const i=[],r=s;if(r.length){const m=typeof r[0][0]=="number"?[r]:r;for(const c of m)c.length<3?i.push(...c):c.length===3?i.push(...Nn(ae([c[0],c[0],c[1],c[2]]),10,(1+t.roughness)/2)):i.push(...Nn(ae(c),10,(1+t.roughness)/2))}i.length&&e.push(na([i],t))}return t.stroke!==Q&&e.push(l),this._d("curve",e,t)}polygon(s,n){const t=this._o(n),e=[],l=xa(s,!0,t);return t.fill&&(t.fillStyle==="solid"?e.push(fn([s],t)):e.push(na([s],t))),t.stroke!==Q&&e.push(l),this._d("polygon",e,t)}path(s,n){const t=this._o(n),e=[];if(!s)return this._d("path",e,t);s=(s||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const l=t.fill&&t.fill!=="transparent"&&t.fill!==Q,i=t.stroke!==Q,r=!!(t.simplification&&t.simplification<1),o=r?4-4*(t.simplification||1):(1+t.roughness)/2,m=_m(s,1,o),c=Zt(s,t);if(l)if(t.fillStyle==="solid")if(m.length===1){const u=Zt(s,Object.assign(Object.assign({},t),{disableMultiStroke:!0,roughness:t.roughness?t.roughness+t.fillShapeRoughnessGain:0}));e.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else e.push(fn(m,t));else e.push(na(m,t));return i&&(r?m.forEach(u=>{e.push(xa(u,!1,t))}):e.push(c)),this._d("path",e,t)}opsToPath(s,n){let t="";for(const e of s.ops){const l=typeof n=="number"&&n>=0?e.data.map(i=>+i.toFixed(n)):e.data;switch(e.op){case"move":t+=`M${l[0]} ${l[1]} `;break;case"bcurveTo":t+=`C${l[0]} ${l[1]}, ${l[2]} ${l[3]}, ${l[4]} ${l[5]} `;break;case"lineTo":t+=`L${l[0]} ${l[1]} `;break}}return t.trim()}toPaths(s){const n=s.sets||[],t=s.options||this.defaultOptions,e=[];for(const l of n){let i=null;switch(l.type){case"path":i={d:this.opsToPath(l),stroke:t.stroke,strokeWidth:t.strokeWidth,fill:Q};break;case"fillPath":i={d:this.opsToPath(l),stroke:Q,strokeWidth:0,fill:t.fill||Q};break;case"fillSketch":i=this.fillSketch(l,t);break}i&&e.push(i)}return e}fillSketch(s,n){let t=n.fillWeight;return t<0&&(t=n.strokeWidth/2),{d:this.opsToPath(s),stroke:n.fill||Q,strokeWidth:t,fill:Q}}_mergedShape(s){return s.filter((n,t)=>t===0?!0:n.op!=="move")}}const Ge="http://www.w3.org/2000/svg",Sm=800;let yn=null;function Om(){return yn||(yn=new Lm().defaultOptions),yn}function wn(a,s,n){return{...Om(),maxRandomnessOffset:2,roughness:a==="highlight"?3:1.5,bowing:1,stroke:"#000",strokeWidth:1.5,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,disableMultiStroke:a!=="double",disableMultiStrokeFill:!1,seed:s,...n}}function Pm(a){const s=a.padding;if(s||s===0){if(typeof s=="number")return[s,s,s,s];if(Array.isArray(s)){const n=s;if(n.length)switch(n.length){case 4:return[...n];case 1:return[n[0],n[0],n[0],n[0]];case 2:return[...n,...n];case 3:return[...n,n[1]];default:return[n[0],n[1],n[2],n[3]]}}}return[5,5,5,5]}function $m(a,s,n,t,e,l){const i=[];let r=n.strokeWidth||2;const o=Pm(n),m=n.animate===void 0?!0:!!n.animate,c=n.iterations||2,u=n.rtl?1:0,h=wn("single",l,n);switch(n.type){case"underline":{const p=s.y+s.h+o[2];for(let d=u;d<c+u;d++)d%2?i.push(X(s.x+s.w,p,s.x,p,h)):i.push(X(s.x,p,s.x+s.w,p,h));break}case"strike-through":{const p=s.y+s.h/2;for(let d=u;d<c+u;d++)d%2?i.push(X(s.x+s.w,p,s.x,p,h)):i.push(X(s.x,p,s.x+s.w,p,h));break}case"box":{const p=s.x-o[3],d=s.y-o[0],g=s.w+(o[1]+o[3]),f=s.h+(o[0]+o[2]);for(let y=0;y<c;y++)i.push(Ue(p,d,g,f,h));break}case"bracket":{const p=Array.isArray(n.brackets)?n.brackets:n.brackets?[n.brackets]:["right"],d=s.x-o[3]*2,g=s.x+s.w+o[1]*2,f=s.y-o[0]*2,y=s.y+s.h+o[2]*2;for(const w of p){let x;switch(w){case"bottom":x=[[d,s.y+s.h],[d,y],[g,y],[g,s.y+s.h]];break;case"top":x=[[d,s.y],[d,f],[g,f],[g,s.y]];break;case"left":x=[[s.x,f],[d,f],[d,y],[s.x,y]];break;case"right":x=[[s.x+s.w,f],[g,f],[g,y],[s.x+s.w,y]];break}x&&i.push(xa(x,!1,h))}break}case"crossed-off":{const p=s.x,d=s.y,g=p+s.w,f=d+s.h;for(let y=u;y<c+u;y++)y%2?i.push(X(g,f,p,d,h)):i.push(X(p,d,g,f,h));for(let y=u;y<c+u;y++)y%2?i.push(X(p,f,g,d,h)):i.push(X(g,d,p,f,h));break}case"circle":{const p=wn("double",l,n),d=s.w+(o[1]+o[3]),g=s.h+(o[0]+o[2]),f=s.x-o[3]+d/2,y=s.y-o[0]+g/2,w=Math.floor(c/2),x=c-w*2;for(let k=0;k<w;k++)i.push(En(f,y,d,g,p));for(let k=0;k<x;k++)i.push(En(f,y,d,g,h));break}case"highlight":{const p=wn("highlight",l,n);r=s.h*.95;const d=s.y+s.h/2;for(let g=u;g<c+u;g++)g%2?i.push(X(s.x+s.w,d,s.x,d,p)):i.push(X(s.x,d,s.x+s.w,d,p));break}}if(i.length){const p=Tm(i),d=[],g=[];let f=0;const y=(w,x,k)=>w.setAttribute(x,k);for(const w of p){const x=document.createElementNS(Ge,"path");if(y(x,"d",w),y(x,"fill","none"),y(x,"stroke",n.color||"currentColor"),y(x,"stroke-width",`${r}`),n.opacity!==void 0&&y(x,"style",`opacity:${n.opacity}`),m){const k=x.getTotalLength();d.push(k),f+=k}a.appendChild(x),g.push(x)}if(m){let w=0;for(let x=0;x<g.length;x++){const k=g[x],b=d[x],F=f?e*(b/f):0,C=t+w,H=k.style;H.strokeDashoffset=`${b}`,H.strokeDasharray=`${b}`,H.animation=`rough-notation-dash ${F}ms ease-out ${C}ms forwards`,w+=F}return ne(e+t)}}return ne(0)}function ne(a){return new Promise(s=>setTimeout(s,a))}function Tm(a){const s=[];for(const n of a){let t="";for(const e of n.ops){const l=e.data;switch(e.op){case"move":t.trim()&&s.push(t.trim()),t=`M${l[0]} ${l[1]} `;break;case"bcurveTo":t+=`C${l[0]} ${l[1]}, ${l[2]} ${l[3]}, ${l[4]} ${l[5]} `;break;case"lineTo":t+=`L${l[0]} ${l[1]} `;break}}t.trim()&&s.push(t.trim())}return s}function Em(){if(!window.__rno_kf_s){const a=window.__rno_kf_s=document.createElement("style");a.textContent="@keyframes rough-notation-dash { to { stroke-dashoffset: 0; } }",document.head.appendChild(a)}}var Fm=Object.defineProperty,Am=(a,s,n)=>s in a?Fm(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,ns=(a,s,n)=>(Am(a,typeof s!="symbol"?s+"":s,n),n);class Cm{constructor(s,n){ns(this,"_state","unattached"),ns(this,"_config"),ns(this,"_resizing",!1),ns(this,"_ro"),ns(this,"_seed",He()),ns(this,"_e"),ns(this,"_svg"),ns(this,"_lastSizes",[]),ns(this,"_animationDelay",0),ns(this,"_resizeListener",()=>{this._resizing||(this._resizing=!0,setTimeout(()=>{this._resizing=!1,this._state==="showing"&&this.haveRectsChanged()&&this.show()},400))}),ns(this,"pendingRefresh"),this._e=s,this._config=JSON.parse(JSON.stringify(n)),this.attach()}getConfig(s){return this._config[s]}setConfig(s,n){this._config[s]!==n&&(this._config[s]=n,this.refresh())}get animate(){return this._config.animate}set animate(s){this._config.animate=s}get animationDuration(){return this._config.animationDuration}set animationDuration(s){this._config.animationDuration=s}get iterations(){return this._config.iterations}set iterations(s){this._config.iterations=s}get color(){return this._config.color}set color(s){this._config.color!==s&&(this._config.color=s,this.refresh())}get class(){return this._config.class}set class(s){this._config.class!==s&&(this._config.class=s,this._svg&&this._svg.setAttribute("class",["rough-annotation",this._config.class||""].filter(Boolean).join(" ")))}get strokeWidth(){return this._config.strokeWidth}set strokeWidth(s){this._config.strokeWidth!==s&&(this._config.strokeWidth=s,this.refresh())}get padding(){return this._config.padding}set padding(s){this._config.padding!==s&&(this._config.padding=s,this.refresh())}attach(){if(this._state==="unattached"&&this._e.parentElement){Em();const s=this._svg=document.createElementNS(Ge,"svg");s.setAttribute("class",["rough-annotation",this._config.class||""].filter(Boolean).join(" "));const n=s.style;n.position="absolute",n.top="0",n.left="0",n.overflow="visible",n.pointerEvents="none",n.width="100px",n.height="100px";const t=this._config.type==="highlight";if(this._e.insertAdjacentElement(t?"beforebegin":"afterend",s),this._state="not-showing",t){const e=window.getComputedStyle(this._e).position;(!e||e==="static")&&(this._e.style.position="relative")}this.attachListeners()}}detachListeners(){window.removeEventListener("resize",this._resizeListener),this._ro&&this._ro.unobserve(this._e)}attachListeners(){this.detachListeners(),window.addEventListener("resize",this._resizeListener,{passive:!0}),!this._ro&&"ResizeObserver"in window&&(this._ro=new window.ResizeObserver(s=>{for(const n of s)n.contentRect&&this._resizeListener()})),this._ro&&this._ro.observe(this._e)}haveRectsChanged(){if(this._lastSizes.length){const s=this.rects();if(s.length===this._lastSizes.length){for(let n=0;n<s.length;n++)if(!this.isSameRect(s[n],this._lastSizes[n]))return!0}else return!0}return!1}isSameRect(s,n){const t=(e,l)=>Math.round(e)===Math.round(l);return t(s.x,n.x)&&t(s.y,n.y)&&t(s.w,n.w)&&t(s.h,n.h)}isShowing(){return this._state!=="not-showing"}refresh(){this.isShowing()&&!this.pendingRefresh&&(this.pendingRefresh=Promise.resolve().then(()=>{this.isShowing()&&this.show(),delete this.pendingRefresh}))}async show(){switch(this._state){case"unattached":break;case"showing":this.hide(),this._svg&&await this.render(this._svg,!0);break;case"not-showing":this.attach(),this._svg&&await this.render(this._svg,!1);break}}hide(){if(this._svg)for(;this._svg.lastChild;)this._svg.removeChild(this._svg.lastChild);this._state="not-showing"}remove(){this._svg&&this._svg.parentElement&&this._svg.parentElement.removeChild(this._svg),this._svg=void 0,this._state="unattached",this.detachListeners()}async render(s,n){let t=this._config;n&&(t=JSON.parse(JSON.stringify(this._config)),t.animate=!1);const e=this.rects();let l=0;e.forEach(m=>l+=m.w);const i=t.animationDuration||Sm;let r=0;const o=[];for(let m=0;m<e.length;m++){const c=e[m],u=i*(c.w/l);o.push($m(s,e[m],t,r+this._animationDelay+(this._config.delay||0),u,this._seed)),r+=u}return this._lastSizes=e,this._state="showing",await Promise.all(o)}rects(){const s=[];if(this._svg)if(this._config.multiline){const n=this._e.getClientRects();for(let t=0;t<n.length;t++)s.push(this.svgRect(this._svg,n[t]))}else s.push(this.svgRect(this._svg,this._e.getBoundingClientRect()));return s}svgRect(s,n){const t=s.getBoundingClientRect(),e=n;return{x:(e.x||e.left)-(t.x||t.left),y:(e.y||e.top)-(t.y||t.top),w:e.width,h:e.height}}}function Nm(a,s){return new Cm(a,s)}function K(a,s){return a.class=[a.class,s].filter(Boolean).join(" "),a}const te={box:a=>Object.assign(a,{type:"box"}),circle:a=>Object.assign(a,{type:"circle"}),underline:a=>Object.assign(a,{type:"underline"}),highlight:a=>Object.assign(a,{type:"highlight"}),"strike-through":a=>Object.assign(a,{type:"strike-through"}),"crossed-off":a=>Object.assign(a,{type:"crossed-off"}),bracket:a=>Object.assign(a,{type:"bracket"}),strike:a=>Object.assign(a,{type:"strike-through"}),cross:a=>Object.assign(a,{type:"crossed-off"}),crossed:a=>Object.assign(a,{type:"crossed-off"}),linethrough:a=>Object.assign(a,{type:"strike-through"}),"line-through":a=>Object.assign(a,{type:"strike-through"}),black:a=>K(a,"text-black"),blue:a=>K(a,"text-blue"),cyan:a=>K(a,"text-cyan"),gray:a=>K(a,"text-gray"),green:a=>K(a,"text-green"),indigo:a=>K(a,"text-indigo"),lime:a=>K(a,"text-lime"),orange:a=>K(a,"text-orange"),pink:a=>K(a,"text-pink"),purple:a=>K(a,"text-purple"),red:a=>K(a,"text-red"),teal:a=>K(a,"text-teal"),white:a=>K(a,"text-white"),yellow:a=>K(a,"text-yellow")},Dm=[[/^delay-?(\d+)?$/,(a,s,n)=>{const t=(a[1]?Number.parseInt(a[1]):n)||300;return s.delay=t,s}],[/^(?:op|opacity)-?(\d+)?$/,(a,s,n)=>{const t=(a[1]?Number.parseInt(a[1]):n)||100;return s.opacity=t/100,s}]];function Rm(){return{install(a){a.directive("mark",{name:"v-mark",mounted:(s,n)=>{const{isPrintMode:t}=ma(),e=v(()=>{const r=typeof n.value=="object"&&!Array.isArray(n.value)?{...n.value}:{at:n.value};let o={at:r.at};const m=Object.entries(n.modifiers).filter(([u,h])=>{if(te[u])return o=te[u](o,h),!1;for(const[p,d]of Dm){const g=u.match(p);if(g)return o=d(g,o,h),!1}return!0});m.length&&console.warn("[Slidev] Invalid modifiers for v-mark:",m);const c={...o,...r};return c.type||="underline",t.value&&(c.animationDuration=1),c}),l=Nm(s,e.value),i=Ra(s,n,e.value.at);if(!i){l.show();return}s.watchStopHandle=ra(()=>{let r;e.value.class&&(l.class=e.value.class),e.value.color&&(l.color=e.value.color);const o=e.value.at;o===!0?r=!0:o===!1?r=!1:r=i.isActive.value,r!=null&&(r?l.show():l.hide())})},unmounted:s=>{s.watchStopHandle?.()}})}}}function Im(){return{install(a){const s=_l();a.directive("motion",{name:"v-motion",mounted(n,t,e,l){const i=oa(t,Za),r=oa(t,Rn),o=oa(t,In),{currentPage:m,clicks:c,isPrintMode:u}=ma(),h=e.props={...e.props},p={...h.initial,...h.variants?.["slidev-initial"]},d={...h.enter,...h.variants?.["slidev-enter"]},g={...h.leave,...h.variants?.["slidev-leave"]};delete h.initial,delete h.enter,delete h.leave;const f=`${Jn()}-`,y=[];for(const x of Object.keys(h))if(x.startsWith("click-")){const k=x.slice(6),b=k.includes("-")?k.split("-").map(Number):+k,F=f+k;y.push({id:F,at:b,variant:{...h[x]},info:i?.value.calculate(b)}),delete h[x]}y.sort((x,k)=>(Array.isArray(x.at)?x.at[0]:x.at)-(Array.isArray(k.at)?k.at[0]:k.at)),s.created(n,t,e,l),s.mounted(n,t,e,l);const w=n.motionInstance;w.clickIds=y.map(x=>x.id),w.set(p),w.watchStopHandle=ss([r,m,c].filter(Boolean),()=>{const x=ze.get(n)?.visibilityState.value??"shown";if(!i?.value||!["slide","presenter"].includes(o?.value??"")){const k={...p,...d};for(const{variant:b}of y)Object.assign(k,b);w.set(k)}else if(u.value||r?.value===m.value)if(x==="shown"){const k={...p,...d};for(const{variant:b,info:F}of y)(!F||F.isActive.value)&&Object.assign(k,b);u.value?w.set(k):w.apply(k)}else w.apply(x==="before"?p:g);else w.apply((r?.value??-1)>m.value?p:g)},{immediate:!0})},unmounted(n){n.motionInstance.watchStopHandle()}})}}}const jm=[Object.values([])[0],Object.values([])[0]].filter(Boolean);function zm(){const a=[];function s(n){if(!R.remote||R.remote===n.query.password)return!0;if(R.remote&&n.query.password===void 0){const t=prompt("Enter password");if(R.remote===t)return!0}return n.params.no?{path:`/${n.params.no}`}:{path:""}}return a.push({name:"entry",path:"/entry",component:()=>_(()=>import("./slidev/entry-Ba0ND7gW.js"),__vite__mapDeps([48,1,3,4,49]),import.meta.url),beforeEnter:s},{name:"overview",path:"/overview",component:()=>_(()=>import("./slidev/overview-Cxt_ZL9W.js"),__vite__mapDeps([50,13,1,51,52,53,2,54,55,56,3,4]),import.meta.url),beforeEnter:s},{name:"notes",path:"/notes",component:()=>_(()=>import("./slidev/notes-Q3HH-ZzF.js"),__vite__mapDeps([57,1,51,52,58,55,59,3,4]),import.meta.url),beforeEnter:s},{name:"notes-edit",path:"/notes-edit",component:()=>_(()=>import("./slidev/notes-edit-DDovf49Z.js"),__vite__mapDeps([60,1,56,55,59,3,4]),import.meta.url),beforeEnter:s},{name:"presenter",path:"/presenter/:no",component:()=>_(()=>import("./slidev/presenter-BLtYmbD4.js"),__vite__mapDeps([61,1,53,2,54,62,13,55,3,4,63,51,52,58,56,64]),import.meta.url),beforeEnter:s},{path:"/presenter",redirect:{path:"/presenter/1"}}),a.push({name:"play",path:"/:no",component:()=>_(()=>import("./slidev/play-D-CWVdJk.js"),__vite__mapDeps([65,1,53,2,54,62,13,55,3,4,63,59,66]),import.meta.url)},{path:"",redirect:{path:"/1"}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>_(()=>import("./slidev/404-B02vpZi9.js"),__vite__mapDeps([67,1,3,4,68]),import.meta.url)}),jm.reduce((n,t)=>t(n),a)}async function Hm(a){function s(){document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`)}s(),window.addEventListener("resize",s);const n=Ll({history:Sl("./"),routes:zm()});a.use(n),a.use(Jo()),a.use(Ko()),a.use(Rm()),a.use(Yo()),a.use(Im()),a.use(Pl,{container:"#twoslash-container"});const t={app:a,router:n};for(const e of qo)await e(t)}async function Vm(){const a=Ol(zo);await Hm(a),a.mount("#app")}Vm();export{_a as $,Yr as A,ep as B,Aa as C,ao as D,Ln as E,op as F,dp as G,Wm as H,Ha as I,Ym as J,ve as K,Qr as L,Sa as M,np as N,Mp as O,hp as P,cp as Q,ts as R,Kr as S,Go as T,he as U,Nl as V,tp as W,Ir as X,jn as Y,Xm as Z,ui as _,ma as a,sp as a0,ap as a1,rp as a2,ip as a3,kp as a4,xp as a5,wp as a6,as as a7,Re as a8,Ie as a9,ke as aa,ce as ab,Km as ac,zr as ad,Rn as ae,In as af,Za as ag,Hr as ah,bp as ai,jr as aj,Gm as ak,Br as al,Jn as am,ha as an,yp as ao,Le as b,pi as c,vp as d,we as e,lp as f,ta as g,La as h,Wt as i,Zr as j,Va as k,up as l,gp as m,pp as n,R as o,Um as p,Jm as q,vn as r,ln as s,fp as t,ri as u,st as v,Ya as w,mp as x,Qm as y,Zm as z};
